var T=Object.defineProperty;var x=(o,t,e)=>t in o?T(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var n=(o,t,e)=>(x(o,typeof t!="symbol"?t+"":t,e),e);import{d as p,q as L,o as c,m as b,w as O,c as m,a as l,n as R,u as d,t as _,k as u,T as E,p as F,e as C,i as A,r as g,j as D,C as v,N as S,R as I,g as y,l as k,F as B}from"./vendor-49bb960b.js";import{_ as V}from"./preload-helper-33ac5944.js";import{_ as h}from"./plugin-vue_export-helper-4223c0cf.js";class H{constructor(){n(this,"intersectionObserver");n(this,"map",new WeakMap);n(this,"renders",new Set);n(this,"onIntersecte",(t,e)=>{for(let s of t){const r=this.map.get(s.target);r&&(s.isIntersecting?r.render():r.pausedRender())}});window.IntersectionObserver&&(this.intersectionObserver=new window.IntersectionObserver(this.onIntersecte))}set(t,e){var s;this.renders.add(e),this.map.set(t,e),this.map.set(e,t),(s=this.intersectionObserver)==null||s.observe(t),e.onDestroyed(()=>this.delete(t,e))}delete(t,e){var r;const s=this.map.get(e);s&&((r=this.intersectionObserver)==null||r.unobserve(s)),this.map.delete(t),this.map.delete(s),this.map.delete(e),this.renders.delete(e)}destroy(){var t;(t=this.intersectionObserver)==null||t.disconnect()}}class N{constructor(t,e){n(this,"function");n(this,"isOnce");this.function=t,this.isOnce=e.isOnce?e.isOnce:!1}}class q{constructor(){n(this,"__emittersMap__",new WeakMap);n(this,"__emitters__",new Map)}on(t,e){if(typeof t!="string"||t===""||typeof e!="function")return!1;let s=this.__emitters__.get(t);if(s||(s=new Set,this.__emitters__.set(t,s)),this.__emittersMap__.has(e))return!1;{const r=new N(e,{isOnce:!1});this.__emittersMap__.set(e,r),s.add(r)}return!0}once(t,e){if(this.on(t,e)){const s=this.__emittersMap__.get(e);if(!s)return!1;s.isOnce=!0}else return!1;return!0}off(t,e){const s=this.__emitters__.get(t);if(!s)return!1;const r=this.__emittersMap__.get(e);return r?(this.__emittersMap__.delete(e),s.delete(r),s.size===0&&this.__emitters__.delete(t),!0):!1}offAll(t){const e=this.__emitters__.get(t);return e?(e.clear(),this.__emitters__.delete(t),!0):!1}clearEvents(){return this.__emitters__.clear(),!0}async emit(t,...e){const s=this.__emitters__.get(t);if(!!s)for(let r of s.values()){try{await r.function.apply(void 0,e)}catch(a){console.error(a)}r.isOnce&&this.off(t,r.function)}}}class P extends q{constructor(){super();n(this,"viewList",new Set);n(this,"loaded",0);n(this,"loadTotal",0)}add(e){this.viewList.has(e)||(this.viewList.add(e),e.resources.onProgress(()=>this.progress()),e.resources.onReady(()=>this.someReady()),e.onDestroyed(()=>this.viewList.delete(e)))}someReady(){for(let e of this.viewList)if(!e.resources.isReady)return;this.emit("ready")}onReady(e){return this.once("ready",e)}progress(){let e=0,s=0;this.viewList.forEach(r=>{e+=r.resources.loaded,s+=r.resources.loadTotal}),this.loaded=e,this.loadTotal=s,console.log("loaded",this.loaded,"loadTotal",this.loadTotal)}destroy(){}}const W=o=>(F("data-v-40949c4c"),o=o(),C(),o),$={key:0,class:"loader"},z={class:"container"},j=W(()=>l("div",{class:"text"},[l("span",null,"Hi\uFF0C\u6211\u6765\u4E86\uFF0C\u7B49\u7B49")],-1)),U={class:"percentage"},Y=p({name:"Section-FirstLoad",props:{loaded:{type:Number,required:!0},loadTotal:{type:Number,required:!0},progress:{type:Number,required:!0},isReady:{type:Boolean,required:!0}},setup(o){const t=o,e=L(()=>`${t.progress*100}%`);return(s,r)=>(c(),b(E,{name:"fade"},{default:O(()=>[o.isReady?u("v-if",!0):(c(),m("section",$,[l("div",z,[j,l("div",{class:"progress",style:R({width:d(e)})},null,4),l("div",U,[l("span",null,_(t.loaded)+"/"+_(t.loadTotal),1)])])]))]),_:1}))}});var G=h(Y,[["__scopeId","data-v-40949c4c"],["__file","/Volumes/Work/l00 Studio/l00/source/src/graphics-components/home-page/components/Section-FirstLoad.vue"]]);const J={class:"container"},K=p({name:"Section-Debug",props:{rendersAreaMap:{type:null,required:!0}},setup(o){const t=o,e=t.rendersAreaMap,s=A({playing:0,total:0}),r=()=>{const a=[...e.renders].map(i=>({render:i,isPlaying:i.time.isTicking}));console.log(a),s.playing=a.reduce((i,f)=>i+(f.isPlaying?1:0),0),s.total=a.length};return window.rendersAreaMap=t.rendersAreaMap,window.checkRendersAreaMap=r,(a,i)=>(c(),m("section",J,[l("div",{class:"rendersAreaMapSummary",onClick:r}," \u6B63\u5728\u6E32\u67D3\u533A\u57DF: "+_(s.playing)+"/"+_(s.total),1)]))}});var Q=h(K,[["__scopeId","data-v-a7aeb812"],["__file","/Volumes/Work/l00 Studio/l00/source/src/graphics-components/home-page/components/Section-Debug.vue"]]);const X=p({name:"l00-Home",setup(o){const t=g(0),e=()=>{const w=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop,M=document.documentElement.clientHeight||document.body.clientHeight;t.value=w+M/2};D(()=>{window.addEventListener("scroll",e),e()}),v(()=>{window.removeEventListener("scroll",e)});let s=g(!1);const r=A(new P);r.onReady(()=>s.value=!0),v(()=>r.destroy()),S("loadingManager",r);const a=new H;v(()=>a.destroy()),S("rendersAreaMap",a);const i=g(window.location.hash.includes("debug")),f=I(()=>V(()=>import("./l00-Home-Main-18f462e5.js"),["static/js/l00-Home-Main-18f462e5.js","static/css/l00-Home-Main-3274127f.css","static/js/vendor-49bb960b.js","static/js/dat.gui.module-e489c5d1.js","static/js/FontLoader-60850552.js","static/js/index-6d58611a.js","static/js/plugin-vue_export-helper-4223c0cf.js","static/js/effectsList-1e66e4b1.js","static/js/preload-helper-33ac5944.js","static/js/ProjectsRouter-353b48cf.js","static/css/ProjectsRouter-d3e7cb03.css","static/js/metaverse-ba669b09.js","static/css/metaverse-f8978117.css","static/js/TopMenu-e5cff983.js","static/css/TopMenu-c80ebc82.css","static/js/logo-52bb2a61.js","static/js/helvetiker_regular.typeface-4d2cf33d.js","static/js/GammaCorrectionShader-bfa8e7d9.js"]));return(w,M)=>(c(),m(B,null,[u(" \u52A0\u8F7D\u73AF\u8282 "),y(G,{loaded:r.loaded,loadTotal:r.loadTotal,progress:r.loaded/r.loadTotal,isReady:d(s),class:"loading"},null,8,["loaded","loadTotal","progress","isReady"]),u(" \u6B63\u5F0F\u5185\u5BB9 "),y(d(f),{class:k(["main",{debug:i.value,loading:!d(s)}]),scrollMidline:t.value},null,8,["class","scrollMidline"]),u(" debug\u754C\u9762 "),i.value?(c(),b(Q,{key:0,rendersAreaMap:d(a)},null,8,["rendersAreaMap"])):u("v-if",!0)],64))}});var Z=h(X,[["__scopeId","data-v-41f43076"],["__file","/Volumes/Work/l00 Studio/l00/source/src/graphics-components/home-page/l00-Home.vue"]]);const ee=p({name:"index",setup(o){return(t,e)=>(c(),m("div",null,[y(Z)]))}});var te=h(ee,[["__file","/Volumes/Work/l00 Studio/l00/source/src/graphics-components/home-page/index.vue"]]),ae=Object.freeze(Object.defineProperty({__proto__:null,default:te},Symbol.toStringTag,{value:"Module"}));export{q as E,ae as i};
