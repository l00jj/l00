var Fe=Object.defineProperty;var Ee=(a,e,t)=>e in a?Fe(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var s=(a,e,t)=>(Ee(a,typeof e!="symbol"?e+"":e,t),t);import{d as T,I as S,r as x,j as z,C as R,S as Te,o as f,c as v,a as c,A as be,F as j,q as X,i as J,g as _,w as W,L as ge,U as fe,u as C,T as ve,p as q,e as Q,f as B,s as Le,B as He,n as we,l as ke}from"./vendor-49bb960b.js";import{j as A,a8 as K,e as D,f as ee,g as te,h as se,i as ie,P as ne,O as ae,u as g,W as re,s as F,H as N,a as Se,N as V,J as oe,K as he,C as ce,D as le,M as p,b as de,A as ue,r as Ie,n as $e,Q as O,m as Ue,S as me,G as ze,c as Re,T as Ge,d as We,a4 as Z,U as H,a9 as Be,aa as y,ab as Ne,ac as Ve,ad as Oe,V as L,a0 as G,Y as je,ae as qe,a1 as xe,a2 as Qe,af as Ye}from"./dat.gui.module-e489c5d1.js";import{E as k}from"./index-83661887.js";import{F as pe}from"./FontLoader-60850552.js";import{g as m}from"./index-6d58611a.js";import{_ as b}from"./plugin-vue_export-helper-4223c0cf.js";import{l as Xe}from"./effectsList-1e66e4b1.js";import{l as Ze}from"./metaverse-ba669b09.js";import{T as Y,h as Je}from"./helvetiker_regular.typeface-4d2cf33d.js";import{P as Ae,F as De,C as _e,E as Ke,R as et,S as tt,G as st,a as it}from"./GammaCorrectionShader-bfa8e7d9.js";import"./preload-helper-33ac5944.js";import"./ProjectsRouter-353b48cf.js";import"./TopMenu-e5cff983.js";import"./logo-52bb2a61.js";class nt{constructor(e){s(this,"main");s(this,"isActive",!1);s(this,"ui");this.main=e,window.location.hash.includes("debug")&&this.active()}active(){this.isActive=!0,this.ui=new A({autoPlace:!1}),this.fixGui(),this.toWindowTest()}fixGui(){if(!this.ui)return;const e=this.main.viewArea,t=this.ui.domElement;t.classList.add("a"),t.classList.add("taller-than-window");const i=window.document.createElement("div");i.classList.add("dg"),i.classList.add("ac"),i.style.position="absolute",i.appendChild(this.ui.domElement),e.appendChild(i)}toWindowTest(){window.debugView=this.main}addFolder(e){if(!this.ui||!(this.ui instanceof A))return i=>{};const t=this.ui.addFolder(e);return i=>{i(t)}}destroy(){var e;(e=this.ui)==null||e.destroy(),delete window.debugView}}class at extends k{constructor(t){super();s(this,"viewArea");s(this,"width",0);s(this,"height",0);s(this,"pixelRatio",0);s(this,"onWindowResizeListener",()=>{this.updateSize(),this.emit("resize")});this.viewArea=t,this.updateSize(),this.setWindowResizeEmitter()}updateSize(){this.width=this.viewArea.offsetWidth,this.height=this.viewArea.offsetHeight,this.pixelRatio=Math.min(window.devicePixelRatio,2)}setWindowResizeEmitter(){window.addEventListener("resize",this.onWindowResizeListener)}removeWindowResizeEmitter(){window.removeEventListener("resize",this.onWindowResizeListener)}onResize(t){return this.on("resize",t)}destroy(){return this.removeWindowResizeEmitter(),this.clearEvents()}}class rt extends k{constructor(){super();s(this,"start");s(this,"current");s(this,"elapsed");s(this,"delta");s(this,"requestAnimationFrameID",0);s(this,"onTickLoopFunction",()=>{const t=Date.now();this.delta=t-this.current,this.current=t,this.elapsed=this.current-this.start,this.emit("tick"),this.requestAnimationFrameID=window.requestAnimationFrame(this.currentTickLoopFunction)});s(this,"currentTickLoopFunction",()=>{});s(this,"isTicking",!1);this.start=Date.now(),this.current=this.start,this.elapsed=0,this.delta=16}tick(){this.currentTickLoopFunction!==this.onTickLoopFunction&&(this.currentTickLoopFunction=this.onTickLoopFunction,this.isTicking||(this.isTicking=!0,this.current=Date.now()-Math.trunc(1e3/60),this.currentTickLoopFunction()))}paused(){this.isTicking&&(window.cancelAnimationFrame(this.requestAnimationFrameID),this.currentTickLoopFunction=()=>{},this.isTicking=!1)}onTick(t){return this.on("tick",t)}destroy(){return this.currentTickLoopFunction=()=>{},this.clearEvents()}}class ot extends k{constructor(t){super();s(this,"sources");s(this,"items");s(this,"loadTotal",0);s(this,"loaded",0);s(this,"LoadingManager",new K(()=>{this.loaded===this.loadTotal&&this.ready()},(t,i,n)=>{this.loadTotal=n,this.loaded=i,this.emit("progress",this.loaded,this.loadTotal)}));s(this,"loaders",{gltfLoader:new D(this.LoadingManager),gltfDracoLoader:new D(this.LoadingManager).setDRACOLoader(new ee(this.LoadingManager).setDecoderPath(new te("/assets/draco/").url)),textureLoader:new se(this.LoadingManager),cubeTextureLoader:new ie(this.LoadingManager),fontLoader:new pe(this.LoadingManager)});s(this,"isReady",!1);this.sources=t,this.items={},this.startLoading()}startLoading(){if(this.sources.length===0)return this.ready();for(const t of this.sources)if(t.type==="gltfModel")this.loaders.gltfLoader.load(t.path,i=>{this.sourceLoaded(t,i)});else if(t.type==="gltfDracoModel")this.loaders.gltfDracoLoader.load(t.path,i=>{this.sourceLoaded(t,i)});else if(t.type==="texture")this.loaders.textureLoader.load(t.path,i=>{this.sourceLoaded(t,i)});else if(t.type==="cubeTexture")this.loaders.cubeTextureLoader.load(t.path,i=>{this.sourceLoaded(t,i)});else if(t.type==="fontJSON")this.loaders.fontLoader.load(t.path,i=>{this.sourceLoaded(t,i)});else throw`Unknow source.type: ${t.type}`}sourceLoaded(t,i){this.items[t.name]=i}ready(){this.isReady=!0,this.emit("ready")}onReady(t){return this.isReady?t():this.once("ready",t)}onProgress(t){return this.on("progress",t)}destroy(){return this.clearEvents()}}class ht{constructor(e){s(this,"main");s(this,"sizes");s(this,"scene");s(this,"canvas");s(this,"instance");s(this,"controls");this.main=e,this.sizes=this.main.sizes,this.scene=this.main.scene,this.canvas=this.main.canvas,this.setInstance(),this.setOrbitControls()}setInstance(){this.instance=new ne(45,this.sizes.width/this.sizes.height,.1,100),this.instance.position.set(0,1.45,-1.5),this.instance.lookAt(0,1.45,0),this.scene.add(this.instance)}setOrbitControls(){this.controls=new ae(this.instance,this.canvas),this.controls.target=new g(0,1.45,0),this.controls.enableDamping=!0,this.controls.enabled=!1}resize(){this.instance.aspect=this.sizes.width/this.sizes.height,this.instance.updateProjectionMatrix()}update(){this.controls.update()}}class ct extends k{constructor(t){super();s(this,"main");s(this,"finalRender");s(this,"coreRenderer");this.main=t,this.coreRenderer=new lt(this)}onDestroy(t){this.on("destroy",t)}destroy(){this.coreRenderer.instance.dispose(),this.emit("destroy")}onResize(t){this.on("resize",t)}resize(){this.emit("resize")}update(){this.finalRender()}}class lt{constructor(e){s(this,"renderer");s(this,"main");s(this,"canvas");s(this,"sizes");s(this,"scene");s(this,"camera");s(this,"renderToneMappingDebug");s(this,"instance");s(this,"resize",()=>{this.instance.setSize(this.sizes.width,this.sizes.height),this.instance.setPixelRatio(this.sizes.pixelRatio)});s(this,"render",()=>{this.instance.render(this.scene,this.camera.instance)});this.renderer=e,this.main=this.renderer.main,this.canvas=this.main.canvas,this.sizes=this.main.sizes,this.scene=this.main.scene,this.camera=this.main.camera,this.renderToneMappingDebug=this.main.debug.addFolder("RenderToneMapping"),this.setInstance()}setInstance(){this.instance=new re({canvas:this.canvas,antialias:!0,alpha:!0}),this.instance.physicallyCorrectLights=!0,this.instance.outputEncoding=F,this.instance.toneMapping=N,this.instance.toneMappingExposure=1.5,this.instance.shadowMap.enabled=!0,this.instance.shadowMap.type=Se,this.instance.setClearColor(16777215,0),this.resize(),this.renderToneMappingDebug(e=>{e.add(this.instance,"toneMapping",{No:V,Linear:oe,Reinhard:he,Cineon:ce,ACESFilmic:N}).onFinishChange(()=>{this.instance.toneMapping=Number(this.instance.toneMapping)}),e.add(this.instance,"toneMappingExposure").min(0).max(10).step(.001)}),this.renderer.onResize(this.resize),this.renderer.finalRender=this.render}}class dt{constructor(e){s(this,"main");s(this,"scene");s(this,"resources");s(this,"addDebug");s(this,"sunLight");s(this,"environmentMap");this.main=e,this.scene=this.main.scene,this.resources=this.main.resources,this.addDebug=this.main.debug.addFolder("environment"),this.setSunLight(),this.setEnvironmentMap()}setSunLight(){this.sunLight=new le("#ffffff",5),this.sunLight.castShadow=!0,this.sunLight.shadow.camera.far=20,this.sunLight.shadow.mapSize.set(1024,1024),this.sunLight.shadow.normalBias=.05,this.sunLight.position.set(5,2,2),this.scene.add(this.sunLight),this.addDebug(e=>{e.add(this.sunLight,"intensity").name("sunLightIntensity").min(0).max(10).step(.001),e.add(this.sunLight.position,"x").name("sunLightX").min(-50).max(50).step(.001),e.add(this.sunLight.position,"y").name("sunLightY").min(-50).max(50).step(.001),e.add(this.sunLight.position,"z").name("sunLightZ").min(-50).max(50).step(.001)})}setEnvironmentMap(){this.environmentMap={},this.environmentMap.intensity=1.5,this.environmentMap.texture=this.resources.items.environmentMapTexture,this.environmentMap.texture.encoding=F,this.scene.environment=this.environmentMap.texture,this.environmentMap.updateMaterials=()=>{this.scene.traverse(e=>{e instanceof p&&e.material instanceof de&&(e.material.envMap=this.environmentMap.texture,e.material.envMapIntensity=this.environmentMap.intensity,e.material.needsUpdate=!0,e.castShadow=!0,e.receiveShadow=!0)})},this.environmentMap.updateMaterials(),this.addDebug(e=>{e.add(this.environmentMap,"intensity").name("envMapIntensity").min(0).max(4).step(.001).onChange(()=>{this.environmentMap.updateMaterials()})})}}class ut{constructor(e){s(this,"main");s(this,"scene");s(this,"addDebug");s(this,"isShowAxesHelper",!0);s(this,"axesHelper");this.main=e,this.scene=this.main.scene,this.addDebug=this.main.debug.addFolder("AxesHelper"),this.setAxesHelper()}setAxesHelper(){this.addDebug(e=>{this.axesHelper=new ue(1),this.toggleAxesHelper(),e.open(),e.add(this,"isShowAxesHelper").onChange(t=>{this.toggleAxesHelper()})})}toggleAxesHelper(e){(typeof e=="boolean"?e:this.isShowAxesHelper)?this.scene.add(this.axesHelper):this.scene.remove(this.axesHelper)}}class mt{constructor(e){s(this,"main");s(this,"scene");s(this,"addDebug");s(this,"isControlCamera",!1);this.main=e,this.scene=this.main.scene,this.addDebug=this.main.debug.addFolder("CameraHelper"),this.setHelper()}setHelper(){this.addDebug(e=>{e.open(),e.add(this,"isControlCamera").onChange(t=>{this.toggleHelper(t)})}),this.addDebug(e=>{const t=this.main.camera;e.add(t.instance.position,"y").name("positionY").min(-10).max(10).step(.001),e.add(t.instance.position,"z").name("positionZ").min(-10).max(10).step(.001),e.add(t.controls.target,"x").name("lookAtX").min(-5).max(5).step(.001),e.add(t.controls.target,"y").name("lookAtY").min(-5).max(5).step(.001),e.add(t.controls.target,"z").name("lookAtZ").min(-5).max(5).step(.001)})}toggleHelper(e){this.main.canvas.style.pointerEvents=e?"unset":"",this.main.camera.controls.enabled=!!e}}class pt{constructor(e){s(this,"main");s(this,"scene");s(this,"addDebug");s(this,"isShowBorder",!0);this.main=e,this.scene=this.main.scene,this.addDebug=this.main.debug.addFolder("CssHelper"),this.setControler(),this.toggleControler()}setControler(){this.addDebug(e=>{e.add(this,"isShowBorder").onChange(t=>{this.toggleControler(t)})})}toggleControler(e){this.isShowBorder}}class gt{constructor(e){s(this,"main");s(this,"scene");s(this,"resources");s(this,"time");s(this,"addDebug");s(this,"resource");s(this,"model");s(this,"plane");s(this,"animation");this.main=e,this.scene=this.main.scene,this.resources=this.main.resources,this.time=this.main.time,this.addDebug=this.main.debug.addFolder("Model"),this.setModel(),this.setPlane()}setModel(){this.resource=this.main.resources.items["model-me"],this.model=this.resource.scene.children[0],this.model.rotation.y=Math.PI*1,this.scene.add(this.model),this.model.traverse(e=>{e instanceof p&&(e.castShadow=!0)}),this.addDebug(e=>{e.add(this.model.rotation,"y").name("rotationY").min(-2*Math.PI).max(2*Math.PI).step(.001)})}setPlane(){const e=new Ie(50,10),t=new $e({color:new O("rgba(255,255,255,0)"),transparent:!0,opacity:1}),i=new p(e,t);i.rotation.x=-Math.PI/2,i.position.x=0,i.position.z=-4,this.plane=i,this.scene.add(this.plane),this.model.traverse(n=>{n instanceof p&&(n.castShadow=!0)})}setAnimation(){this.animation={},this.animation.mixer=new Ue(this.model),this.animation.actions={},this.animation.actions.idle=this.animation.mixer.clipAction(this.resource.animations[0]),this.animation.actions.walking=this.animation.mixer.clipAction(this.resource.animations[1]),this.animation.actions.running=this.animation.mixer.clipAction(this.resource.animations[2]),this.animation.actions.current=this.animation.actions.idle,this.animation.actions.current.play(),this.animation.play=e=>{const t=this.animation.actions[e],i=this.animation.actions.current;t.reset(),t.play(),t.crossFadeFrom(i,1),this.animation.actions.current=t}}update(){}}class ft{constructor(e){s(this,"main");s(this,"time");s(this,"progress",0);s(this,"progress1Rotates",[150*Math.PI/180,190*Math.PI/180]);s(this,"progress1Position",new g(0,1.45,-1.5));s(this,"progress1Target",new g(0,1.45,0));s(this,"progress2Rotate",(150+360)*Math.PI/180);s(this,"progress2Position",new g(0,.33,-3.3));s(this,"progress2Target",new g(0,1.11,0));s(this,"progress3Rotates",[(150+360)*Math.PI/180,(220+360)*Math.PI/180]);this.main=e,this.time=this.main.time,this.adjustParameters(),this.main.sizes.onResize(()=>this.adjustParameters()),this.computeProgress()}setProgress(e){this.progress=e}adjustParameters(){const e=window.innerWidth<=1024,t=[150,190],i=e?[0,1.4,-2]:[0,1.45,-1.5],n=e?[0,1.4,0]:[0,1.45,0],r=t[0]+360,l=e?[0,.5,-4]:[0,.33,-3.3],o=e?[0,.77,0]:[0,1.11,0],h=[t[0]+360,250+360];this.progress1Rotates=t.map(d=>d*Math.PI/180),this.progress1Position=new g(...i),this.progress1Target=new g(...n),this.progress2Rotate=r*Math.PI/180,this.progress2Position=new g(...l),this.progress2Target=new g(...o),this.progress3Rotates=h.map(d=>d*Math.PI/180)}computeProgress(){if(!this.main.world.model)return;const e=this.progress,t=this.main.camera,i=this.main.world.model;if(e<=1){const{progress1Rotates:n,progress:r}=this,l=n[0]+r*(n[1]-n[0]),o={duration:1,y:l};m.to(i.model.rotation,o);const h={duration:1,x:this.progress1Position.x,y:this.progress1Position.y,z:this.progress1Position.z};m.to(t.instance.position,h);const d={duration:1,x:this.progress1Target.x,y:this.progress1Target.y,z:this.progress1Target.z};m.to(t.controls.target,d)}else if(e<=2){const n=this.progress2Rotate,r={duration:1,y:n};m.to(i.model.rotation,r);const l={duration:1,x:this.progress2Position.x,y:this.progress2Position.y,z:this.progress2Position.z};m.to(t.instance.position,l);const o={duration:1,x:this.progress2Target.x,y:this.progress2Target.y,z:this.progress2Target.z};m.to(t.controls.target,o)}else if(e<=3){const{progress3Rotates:n,progress:r}=this,l=r%1,o=n[0]+l*(n[1]-n[0]),h={duration:1,y:o};m.to(i.model.rotation,h);const d={duration:1,x:this.progress2Position.x,y:this.progress2Position.y,z:this.progress2Position.z};m.to(t.instance.position,d);const u={duration:1,x:this.progress2Target.x,y:this.progress2Target.y,z:this.progress2Target.z};m.to(t.controls.target,u)}}update(){}}class vt{constructor(e){s(this,"main");s(this,"scene");s(this,"environment");s(this,"resources");s(this,"guiAxesHelper");s(this,"guiCameraHelper");s(this,"guiCssHelper");s(this,"model");s(this,"commander");this.main=e,this.scene=this.main.scene,this.resources=this.main.resources,this.resources.onReady(()=>{this.model=new gt(this.main),this.environment=new dt(this.main),this.guiAxesHelper=new ut(this.main),this.guiCameraHelper=new mt(this.main),this.guiCssHelper=new pt(this.main),this.commander=new ft(this.main)})}resize(){}update(){var e,t;(e=this.model)==null||e.update(),(t=this.commander)==null||t.update()}}var wt=[{name:"environmentMapTexture",type:"cubeTexture",path:[new URL("/l00/static/jpg/px-5f94a820.jpg?url",self.location).href,new URL("/l00/static/jpg/nx-17c6256f.jpg?url",self.location).href,new URL("/l00/static/jpg/py-eb6ff9ff.jpg?url",self.location).href,new URL("/l00/static/jpg/ny-bedb4db1.jpg?url",self.location).href,new URL("/l00/static/jpg/pz-4e8175e8.jpg?url",self.location).href,new URL("/l00/static/jpg/nz-ee7dfac2.jpg?url",self.location).href]},{name:"model-me",type:"gltfDracoModel",path:new URL("/l00/static/gltf/me-1d61ce68.gltf?url",self.location).href}];class xt extends k{constructor(t,i){super();s(this,"canvas");s(this,"viewArea");s(this,"sizes");s(this,"time");s(this,"scene");s(this,"resources");s(this,"camera");s(this,"renderer");s(this,"world");s(this,"debug");this.canvas=t,this.viewArea=i,this.debug=new nt(this),this.sizes=new at(i),this.time=new rt,this.scene=new me,this.resources=new ot(wt),this.camera=new ht(this),this.renderer=new ct(this),this.world=new vt(this),this.sizes.onResize(()=>this.resize()),this.time.onTick(()=>this.update())}resize(){this.camera.resize(),this.world.resize(),this.renderer.resize()}update(){this.camera.update(),this.world.update(),this.renderer.update()}render(){this.time.tick()}pausedRender(){this.time.paused()}destroy(){this.sizes.destroy(),this.time.destroy(),this.renderer.destroy(),this.camera.controls.dispose(),this.resources.destroy(),this.debug.destroy(),this.scene.traverse(t=>{if(t instanceof p){t.geometry.dispose();for(const i in t.material){const n=t.material[i];n&&typeof n.dispose=="function"&&n.dispose()}}}),this.emit("destroyed")}onDestroyed(t){return this.once("destroyed",t)}}const _t=T({name:"Section-1-Scene-Model",props:{progress:{type:Number,required:!0}},setup(a){const e=a,t=S("rendersAreaMap"),i=S("loadingManager"),n=x(),r=x(),l=x();let o;z(async()=>{const d=n.value,u=r.value;o=new xt(d,u),o.render(),t&&t.set(l.value,o),i&&i.add(o)}),R(()=>{o==null||o.destroy()});const h=d=>{!o||!o.world.commander||(o.world.commander.setProgress(d),o.world.commander.computeProgress())};return z(()=>{R(Te(()=>e.progress,h))}),(d,u)=>(f(),v(j,null,[c("div",{class:"viewReactArea",ref_key:"viewReactArea",ref:l},null,512),be(d.$slots,"default",{},void 0,!0),c("div",{class:"viewArea",ref_key:"viewArea",ref:r},[c("canvas",{class:"background",ref_key:"canvas",ref:n},null,512)],512)],64))}});var yt=b(_t,[["__scopeId","data-v-22fa3410"],["__file","/Volumes/Work/l00 Studio/l00/source/src/graphics-components/home-page/components/Section-1-Scene-Model.vue"]]);const Pe=a=>(q("data-v-136e4096"),a=a(),Q(),a),Mt={class:"viewarea"},Ct=Pe(()=>c("div",{class:"content"},[c("div",{class:"title"},[c("span",null,"He"),c("span",null,"llo")]),c("div",{class:"left"},[c("span",null,[B("Welcome to"),c("br"),B("l00 Studio")])]),c("div",{class:"right"},[c("span",null,"\u6211\u53EB\u5C0F\u5218")])],-1)),Tt=[Ct],bt={class:"viewarea"},Lt=Pe(()=>c("div",{class:"content"},[c("div",{class:"title"},[c("span",null,"\u91CE"),c("span",null,"\u7801")]),c("div",{class:"top"},[c("span",null,"// \u597D\u5B66\u7684\u4E00\u679A[\u91CE\u751F]JS[\u7801\u519C]")]),c("div",{class:"bottom"},[c("span",null,"< Es6 Vue Threejs"),c("span",null,"C4d Blender AE/>")])],-1)),St=[Lt],zt=T({name:"Section-1-Scene-Text",props:{scrollMidline:{type:Number,required:!0},progress:{type:Number,required:!0}},emits:["update:progress"],setup(a,{emit:e}){const t=a,i=X({get(){return t.progress},set(h){e("update:progress",h)}}),o=class{constructor(d){s(this,"el",{});s(this,"top",0);s(this,"bottom",0);s(this,"height",0);s(this,"effect",{blurMax:50,translateYMax:25});s(this,"isShow",!1);s(this,"transitionName","fade");s(this,"contentStyle",{filter:"",transform:"",opacity:1});s(this,"currentProgress",0);s(this,"lastProgress",-1/0);s(this,"index");this.index=d}computedProgress(d){this.top>=d?this.changeShowState(!1):this.bottom<d?this.changeShowState(!1):this.changeShowState(!0)}changeShowState(d){if(d){const u=(t.scrollMidline-this.top)/this.height;i.value=this.index+u}this.isShow!==d&&(this.transitionName=o.isReverse?"fade-reverse":"fade",this.isShow=d)}};let n=o;s(n,"lastScroll",t.scrollMidline),s(n,"isReverse",!1);const r=(()=>{const h=J([new n(0),new n(2)]),d=()=>{h.forEach((w,E)=>{w.top=0;for(let U=w.el;U;U=U.offsetParent)w.top+=U.offsetTop;w.height=w.el.offsetHeight,w.bottom=w.top+w.el.offsetHeight,E+1===h.length&&(w.bottom=1/0)})},u=()=>{window.addEventListener("resize",d),d()},M=()=>{window.removeEventListener("resize",d)};return z(()=>u()),R(()=>M()),h})(),l=h=>{n.isReverse=n.lastScroll-h>0,n.lastScroll=h;for(let d of r)d.computedProgress(h)};return z(()=>{l(t.scrollMidline),R(Te(()=>t.scrollMidline,l))}),(h,d)=>(f(),v(j,null,[c("div",{class:"section section1",ref:u=>C(r)[0].el=u},[_(ve,{name:C(r)[0].transitionName,persisted:""},{default:W(()=>[ge(c("div",Mt,Tt,512),[[fe,C(r)[0].isShow]])]),_:1},8,["name"])],512),c("div",{class:"section section2",ref:u=>C(r)[1].el=u},[_(ve,{name:C(r)[1].transitionName,persisted:""},{default:W(()=>[ge(c("div",bt,St,512),[[fe,C(r)[1].isShow]])]),_:1},8,["name"])],512)],64))}});var Rt=b(zt,[["__scopeId","data-v-136e4096"],["__file","/Volumes/Work/l00 Studio/l00/source/src/graphics-components/home-page/components/Section-1-Scene-Text.vue"]]);const At={class:"container"},Dt=T({name:"Section-1",props:{scrollMidline:{type:Number,required:!0}},setup(a){const e=a,t=x(0);return(i,n)=>(f(),v("section",At,[_(yt,{progress:t.value},{default:W(()=>[_(Rt,{scrollMidline:e.scrollMidline,progress:t.value,"onUpdate:progress":n[0]||(n[0]=r=>t.value=r)},null,8,["scrollMidline","progress"])]),_:1},8,["progress"])]))}});var Pt=b(Dt,[["__scopeId","data-v-7f2304f5"],["__file","/Volumes/Work/l00 Studio/l00/source/src/graphics-components/home-page/components/Section-1.vue"]]);const Ft=a=>(q("data-v-2a1f3664"),a=a(),Q(),a),Et=["href"],Ht={class:"card"},kt=["src","alt"],It=["href"],$t=Ft(()=>c("div",{class:"more"},"\u67E5\u770B\u66F4\u591A",-1)),Ut=[$t],Gt=T({name:"Section-2-ExamplesList",props:{list:{type:Array,required:!0},base:{type:String,required:!0}},setup(a){const e=a,t=e.list,n=class{};let i=n;return s(i,"origin",new URL("/l00/",location.origin).href),s(i,"from",l=>new URL(`./${e.base}/#/${l}`,n.origin).href),(r,l)=>(f(),v("ul",null,[(f(!0),v(j,null,Le(C(t),o=>(f(),v("li",null,[c("a",{href:i.from(o.id),target:"blank"},[c("div",Ht,[c("img",{src:o.coverUrl,alt:o.id,loading:"lazy"},null,8,kt)])],8,Et)]))),256)),c("a",{href:i.from(""),target:"blank"},Ut,8,It)]))}});var ye=b(Gt,[["__scopeId","data-v-2a1f3664"],["__file","/Volumes/Work/l00 Studio/l00/source/src/graphics-components/home-page/components/Section-2-ExamplesList.vue"]]);const Wt={class:"container"},Bt={class:"target"},Nt=T({name:"index",props:{isPlay:{type:Boolean,required:!0},color:{type:[String,Array],required:!1},perspective:{type:Array,required:!1}},setup(a){const e=a,t=J({sideNumbers:16,sideHeight:45,sideRotate:0,sideRadius:0,sideTextOffset:46,perspectiveMin:100,perspectiveMax:1e3}),i=(o,h)=>(h=10**h,Math.round(o*h)/h);He(()=>{const o=360/t.sideNumbers;t.sideRotate=i(o,5),t.sideRadius=i(t.sideHeight/2/Math.tan(Math.PI*o/360),5)});const n=X(()=>Object.entries({"--side-height":`${t.sideHeight}px`,"--side-rotate":`${t.sideRotate}deg`,"--side-translateZ":`${t.sideRadius}px`,"--side-textOffset":`${t.sideTextOffset}px`,"--perspectiveMin":`${e.perspective&&e.perspective[0]?e.perspective[0]:t.perspectiveMin}px`,"--perspectiveMax":`${e.perspective&&e.perspective[1]?e.perspective[1]:t.perspectiveMax}px`}).reduce((o,h)=>`${o}${h[0]}:${h[1]};`,""));class r{constructor(h){s(this,"id",Symbol());s(this,"style",{"--i":0});this.style["--i"]=h}}const l=X(()=>Array(t.sideNumbers).fill(0).map((o,h)=>new r(h)));return(o,h)=>(f(),v("div",Wt,[c("div",{class:ke(["view",{paused:!e.isPlay}]),style:we(C(n))},[c("div",Bt,[(f(!0),v(j,null,Le(C(l),d=>(f(),v("div",{class:"side",key:d.id,style:we(d.style)},[be(o.$slots,"default")],4))),128))])],6)]))}});var Vt=b(Nt,[["__scopeId","data-v-3d114266"],["__file","/Volumes/Work/l00 Studio/l00/source/src/graphics-components/home-page/components/Section-2-1-Banner-Css3DText/index.vue"]]);const Ot=a=>(q("data-v-3aec2223"),a=a(),Q(),a),jt={class:"viewArea"},qt=Ot(()=>c("span",{style:{"font-size":"3.5rem"}},[c("i",{style:{color:"#ff246f"}},"l00"),B("web"),c("i",{style:{color:"#12b5ff"}},"w"),B("elcome")],-1)),Qt=T({name:"Section-2-1-Banner-Css3DText",setup(a){const e=S("rendersAreaMap"),t=x(),i=J({isPlay:!0,time:{isTicking:!0},render(){this.isPlay=!0,this.time.isTicking=!0},pausedRender(){this.isPlay=!1,this.time.isTicking=!1},onDestroyed(){}});return z(async()=>{e&&e.set(t.value,i)}),(n,r)=>(f(),v("div",jt,[c("div",{class:"viewReactArea",ref_key:"viewReactArea",ref:t},null,512),_(Vt,{perspective:[100,300],isPlay:i.isPlay},{default:W(()=>[qt]),_:1},8,["isPlay"])]))}});var Yt=b(Qt,[["__scopeId","data-v-3aec2223"],["__file","/Volumes/Work/l00 Studio/l00/source/src/graphics-components/home-page/components/Section-2-1-Banner-Css3DText.vue"]]);class Xt{constructor(e){s(this,"main");s(this,"isActive",!1);s(this,"ui");this.main=e,window.location.hash.includes("debug")&&this.active()}active(){this.isActive=!0,this.ui=new A({autoPlace:!1}),this.fixGui(),this.toWindowTest()}fixGui(){if(!this.ui)return;const e=this.main.viewArea,t=this.ui.domElement;t.classList.add("a"),t.classList.add("taller-than-window");const i=window.document.createElement("div");i.classList.add("dg"),i.classList.add("ac"),i.style.position="absolute",i.appendChild(this.ui.domElement),e.appendChild(i)}toWindowTest(){window.debugView=this.main}addFolder(e){if(!this.ui||!(this.ui instanceof A))return i=>{};const t=this.ui.addFolder(e);return i=>{i(t)}}destroy(){var e;(e=this.ui)==null||e.destroy(),delete window.debugView}}class Zt{constructor(e,t){s(this,"function");s(this,"isOnce");this.function=e,this.isOnce=t.isOnce?t.isOnce:!1}}class I{constructor(){s(this,"__emittersMap__",new WeakMap);s(this,"__emitters__",new Map)}on(e,t){if(typeof e!="string"||e===""||typeof t!="function")return!1;let i=this.__emitters__.get(e);if(i||(i=new Set,this.__emitters__.set(e,i)),this.__emittersMap__.has(t))return!1;{const n=new Zt(t,{isOnce:!1});this.__emittersMap__.set(t,n),i.add(n)}return!0}once(e,t){if(this.on(e,t)){const i=this.__emittersMap__.get(t);if(!i)return!1;i.isOnce=!0}else return!1;return!0}off(e,t){const i=this.__emitters__.get(e);if(!i)return!1;const n=this.__emittersMap__.get(t);return n?(this.__emittersMap__.delete(t),i.delete(n),i.size===0&&this.__emitters__.delete(e),!0):!1}offAll(e){const t=this.__emitters__.get(e);return t?(t.clear(),this.__emitters__.delete(e),!0):!1}clearEvents(){return this.__emitters__.clear(),!0}async emit(e,...t){const i=this.__emitters__.get(e);if(!!i)for(let n of i.values()){try{await n.function.apply(void 0,t)}catch(r){console.error(r)}n.isOnce&&this.off(e,n.function)}}}class Jt extends I{constructor(t){super();s(this,"viewArea");s(this,"width",0);s(this,"height",0);s(this,"pixelRatio",0);s(this,"onWindowResizeListener",()=>{this.updateSize(),this.emit("resize")});this.viewArea=t,this.updateSize(),this.setWindowResizeEmitter()}updateSize(){this.width=this.viewArea.offsetWidth,this.height=this.viewArea.offsetHeight,this.pixelRatio=Math.min(window.devicePixelRatio,2)}setWindowResizeEmitter(){window.addEventListener("resize",this.onWindowResizeListener)}removeWindowResizeEmitter(){window.removeEventListener("resize",this.onWindowResizeListener)}onResize(t){return this.on("resize",t)}destroy(){return this.removeWindowResizeEmitter(),this.clearEvents()}}class Kt extends I{constructor(){super();s(this,"start");s(this,"current");s(this,"elapsed");s(this,"delta");s(this,"requestAnimationFrameID",0);s(this,"onTickLoopFunction",()=>{const t=Date.now();this.delta=t-this.current,this.current=t,this.elapsed=this.current-this.start,this.emit("tick"),this.requestAnimationFrameID=window.requestAnimationFrame(this.currentTickLoopFunction)});s(this,"currentTickLoopFunction",()=>{});s(this,"isTicking",!1);this.start=Date.now(),this.current=this.start,this.elapsed=0,this.delta=16}tick(){this.currentTickLoopFunction!==this.onTickLoopFunction&&(this.currentTickLoopFunction=this.onTickLoopFunction,this.isTicking||(this.isTicking=!0,this.current=Date.now()-16,this.currentTickLoopFunction()))}paused(){this.isTicking&&(window.cancelAnimationFrame(this.requestAnimationFrameID),this.currentTickLoopFunction=()=>{},this.isTicking=!1)}onTick(t){return this.on("tick",t)}destroy(){return this.currentTickLoopFunction=()=>{},this.clearEvents()}}class es extends I{constructor(t){super();s(this,"sources");s(this,"items");s(this,"loadTotal",0);s(this,"loaded",0);s(this,"LoadingManager",new K(()=>{this.loaded===this.loadTotal&&this.ready()},(t,i,n)=>{this.loadTotal=n,this.loaded=i,this.emit("progress",this.loaded,this.loadTotal)}));s(this,"loaders",{gltfLoader:new D(this.LoadingManager),gltfDracoLoader:new D(this.LoadingManager).setDRACOLoader(new ee(this.LoadingManager).setDecoderPath(new te("/assets/draco/").url)),textureLoader:new se(this.LoadingManager),cubeTextureLoader:new ie(this.LoadingManager),fontLoader:new pe(this.LoadingManager)});s(this,"isReady",!1);this.sources=t,this.items={},this.startLoading()}startLoading(){if(this.sources.length===0)return this.ready();for(const t of this.sources)if(t.type==="gltfModel")this.loaders.gltfLoader.load(t.path,i=>{this.sourceLoaded(t,i)});else if(t.type==="gltfDracoModel")this.loaders.gltfDracoLoader.load(t.path,i=>{this.sourceLoaded(t,i)});else if(t.type==="texture")this.loaders.textureLoader.load(t.path,i=>{this.sourceLoaded(t,i)});else if(t.type==="cubeTexture")this.loaders.cubeTextureLoader.load(t.path,i=>{this.sourceLoaded(t,i)});else if(t.type==="fontJSON")this.loaders.fontLoader.load(t.path,i=>{this.sourceLoaded(t,i)});else throw`Unknow source.type: ${t.type}`}sourceLoaded(t,i){this.items[t.name]=i}ready(){this.isReady=!0,this.emit("ready")}onReady(t){return this.isReady?t():this.once("ready",t)}onProgress(t){return this.on("progress",t)}destroy(){return this.clearEvents()}}class ts{constructor(e){s(this,"main");s(this,"sizes");s(this,"scene");s(this,"canvas");s(this,"instance");s(this,"controls");s(this,"isNeedUpdate",!1);this.main=e,this.sizes=this.main.sizes,this.scene=this.main.scene,this.canvas=this.main.canvas,this.setInstance(),this.setOrbitControls()}setInstance(){this.instance=new ne(75,this.sizes.width/this.sizes.height,.1,100),this.instance.position.set(0,-1.5,4),this.instance.lookAt(0,0,0),this.scene.add(this.instance)}setOrbitControls(){this.controls=new ae(this.instance,this.main.viewControlsArea),this.controls.enableDamping=!0}resize(){this.instance.aspect=this.sizes.width/this.sizes.height,this.instance.updateProjectionMatrix()}update(){this.isNeedUpdate=this.controls.update()}}class ss extends I{constructor(t){super();s(this,"main");s(this,"finalRender");s(this,"coreRenderer");this.main=t,this.coreRenderer=new is(this)}onDestroy(t){this.on("destroy",t)}destroy(){this.coreRenderer.instance.dispose(),this.emit("destroy")}onResize(t){this.on("resize",t)}resize(){this.emit("resize")}update(){this.finalRender()}}class is{constructor(e){s(this,"renderer");s(this,"main");s(this,"canvas");s(this,"sizes");s(this,"scene");s(this,"camera");s(this,"renderToneMappingDebug");s(this,"instance");s(this,"resize",()=>{this.instance.setSize(this.sizes.width,this.sizes.height),this.instance.setPixelRatio(this.sizes.pixelRatio)});s(this,"render",()=>{this.instance.render(this.scene,this.camera.instance)});this.renderer=e,this.main=this.renderer.main,this.canvas=this.main.canvas,this.sizes=this.main.sizes,this.scene=this.main.scene,this.camera=this.main.camera,this.renderToneMappingDebug=this.main.debug.addFolder("RenderToneMapping"),this.setInstance()}setInstance(){this.instance=new re({canvas:this.canvas,antialias:!0,alpha:!0}),this.instance.outputEncoding=F,this.instance.toneMapping=V,this.instance.toneMappingExposure=1,this.instance.shadowMap.enabled=!0,this.instance.shadowMap.type=Se,this.instance.setClearColor(16777215,0),this.resize(),this.renderToneMappingDebug(e=>{e.add(this.instance,"toneMapping",{No:V,Linear:oe,Reinhard:he,Cineon:ce,ACESFilmic:N}).onFinishChange(()=>{this.instance.toneMapping=Number(this.instance.toneMapping)}),e.add(this.instance,"toneMappingExposure").min(0).max(10).step(.001)}),this.renderer.onResize(this.resize),this.renderer.finalRender=this.render}}class ns{constructor(e){s(this,"main");s(this,"scene");s(this,"resources");s(this,"addDebug");s(this,"sunLight");s(this,"environmentMap");this.main=e,this.scene=this.main.scene,this.resources=this.main.resources,this.addDebug=this.main.debug.addFolder("environment")}setSunLight(){this.sunLight=new le("#ffffff",5),this.sunLight.castShadow=!0,this.sunLight.shadow.camera.far=20,this.sunLight.shadow.mapSize.set(1024,1024),this.sunLight.shadow.normalBias=.05,this.sunLight.position.set(5,2,2),this.scene.add(this.sunLight),this.addDebug(e=>{e.add(this.sunLight,"intensity").name("sunLightIntensity").min(0).max(10).step(.001),e.add(this.sunLight.position,"x").name("sunLightX").min(-50).max(50).step(.001),e.add(this.sunLight.position,"y").name("sunLightY").min(-50).max(50).step(.001),e.add(this.sunLight.position,"z").name("sunLightZ").min(-50).max(50).step(.001)})}setEnvironmentMap(){this.environmentMap={},this.environmentMap.intensity=1.5,this.environmentMap.texture=this.resources.items.environmentMapTexture,this.environmentMap.texture.encoding=F,this.scene.environment=this.environmentMap.texture,this.environmentMap.updateMaterials=()=>{this.scene.traverse(e=>{e instanceof p&&e.material instanceof de&&(e.material.envMap=this.environmentMap.texture,e.material.envMapIntensity=this.environmentMap.intensity,e.material.needsUpdate=!0,e.castShadow=!0,e.receiveShadow=!0)})},this.environmentMap.updateMaterials(),this.addDebug(e=>{e.add(this.environmentMap,"intensity").name("envMapIntensity").min(0).max(4).step(.001).onChange(()=>{this.environmentMap.updateMaterials()})})}}class as{constructor(e){s(this,"main");s(this,"scene");s(this,"addDebug");s(this,"isShowAxesHelper",!0);s(this,"axesHelper");this.main=e,this.scene=this.main.scene,this.addDebug=this.main.debug.addFolder("AxesHelper"),this.setAxesHelper()}setAxesHelper(){this.addDebug(e=>{this.axesHelper=new ue(1),this.toggleAxesHelper(),e.open(),e.add(this,"isShowAxesHelper").onChange(t=>{this.toggleAxesHelper()})})}toggleAxesHelper(e){(typeof e=="boolean"?e:this.isShowAxesHelper)?this.scene.add(this.axesHelper):this.scene.remove(this.axesHelper)}}class rs{constructor(e){s(this,"main");s(this,"scene");s(this,"addDebug");s(this,"isControlCamera",!0);this.main=e,this.scene=this.main.scene,this.addDebug=this.main.debug.addFolder("CameraHelper"),this.setHelper()}setHelper(){this.addDebug(e=>{e.open(),e.add(this,"isControlCamera").onChange(t=>{this.toggleHelper(t)})}),this.addDebug(e=>{const t=this.main.camera;e.add(t.instance.position,"y").name("positionY").min(-10).max(10).step(.001),e.add(t.instance.position,"z").name("positionZ").min(-10).max(10).step(.001),e.add(t.controls.target,"x").name("lookAtX").min(-5).max(5).step(.001),e.add(t.controls.target,"y").name("lookAtY").min(-5).max(5).step(.001),e.add(t.controls.target,"z").name("lookAtZ").min(-5).max(5).step(.001)})}toggleHelper(e){this.main.canvas.style.pointerEvents=e?"unset":"none",this.main.camera.controls.enabled=!!e}}class os{constructor(e){s(this,"main");s(this,"textGroup");s(this,"sizes");s(this,"scene");s(this,"environment");s(this,"resource");s(this,"addDebug");s(this,"material");s(this,"aspect",NaN);this.textGroup=new ze,this.main=e,this.sizes=e.sizes,this.scene=this.main.scene,this.addDebug=this.main.debug.addFolder("Text"),this.resource=this.main.resources.items.font,this.setMaterial(),this.setText(),this.scene.add(this.textGroup)}setMaterial(){this.material=new Re}updateOrientation(){const e=window.innerWidth/window.innerHeight,t=e>1?1:-1,i=Number.isNaN(this.aspect)?NaN:this.aspect>1?1:-1;return t!==i?(this.aspect=e,!0):!1}setText(){if(!this.updateOrientation())return;const e=this.material,t={font:this.resource,size:.5,height:.2,curveSegments:5,bevelEnabled:!0,bevelThickness:.03,bevelSize:.02,bevelOffset:0,bevelSegments:4};if(this.textGroup.clear(),this.aspect>1){const i=new Y("Welcome to l00 Metaverse",t),n=new p(i,e);i.center(),this.textGroup.add(n)}else{const i=new Y("Welcome to",t),n=new p(i,e);i.center(),i.translate(0,.4,0);const r=new Y("l00 Metaverse",t),l=new p(r,e);r.center(),r.translate(0,-.4,0),this.textGroup.add(n,l)}}resize(){this.setText()}update(){}}class hs{constructor(e){s(this,"main");s(this,"scene");s(this,"environment");s(this,"resources");s(this,"geometryRatio",27);s(this,"toruGeometry");s(this,"coneGeometry");s(this,"material");s(this,"mesh");s(this,"meshsGroup");s(this,"playAnimationTime",1/0);s(this,"animationDuration",2.5);s(this,"animationDelay",4);this.main=e,this.scene=this.main.scene,this.resources=this.main.resources,this.setGeometry(),this.setMaterial(),this.setMesh()}setGeometry(){this.toruGeometry=new Ge(.3,.2,20,45),this.coneGeometry=new We(.4,.6,3)}setMaterial(){this.material=new Re}setMesh(){this.meshsGroup=new ze,this.scene.add(this.meshsGroup),Array(300).fill(0).map((e,t)=>{const i=new p(this.toruGeometry,this.material),{position:n,rotation:r,scale:l}=this.random();i.position.set(n.x,n.y,n.z),i.rotation.set(r.x,r.y,r.z),i.scale.set(l,l,l),this.meshsGroup.add(i)}),Array(300).fill(0).map((e,t)=>{const i=new p(this.coneGeometry,this.material),{position:n,rotation:r,scale:l}=this.random();i.position.set(n.x,n.y,n.z),i.rotation.set(r.x,r.y,r.z),i.scale.set(l,l,l),this.meshsGroup.add(i)})}random(){const e=this.geometryRatio;return{position:{x:(Math.random()-.5)*e,y:(Math.random()-.3)*e,z:(Math.random()-.8)*e},rotation:{x:Math.random()*Math.PI,y:Math.random()*Math.PI,z:Math.random()*Math.PI},scale:Math.random()}}playAnimation(){Number.isNaN(this.playAnimationTime)&&(this.playAnimationTime=0),this.playAnimationTime+=this.main.time.delta/1e3,this.playAnimationTime>this.animationDelay&&(this.playAnimationTime=this.playAnimationTime%this.animationDelay,this.animation())}animation(){const e=this.animationDuration;this.meshsGroup.traverseVisible(t=>{if(!(t instanceof p))return;const{position:i,rotation:n,scale:r}=this.random();m.to(t.position,{duration:e,x:i.x}),m.to(t.position,{duration:e,y:i.y}),m.to(t.position,{duration:e,z:i.z}),m.to(t.rotation,{duration:e,x:n.x}),m.to(t.rotation,{duration:e,y:n.y}),m.to(t.rotation,{duration:e,z:n.z}),m.to(t.scale,{duration:e,x:r}),m.to(t.scale,{duration:e,y:r}),m.to(t.scale,{duration:e,z:r})})}update(){this.playAnimation()}}class cs{constructor(e){s(this,"main");s(this,"time");s(this,"originalCameraPosition");s(this,"resetCameraControlTimeoutID",NaN);s(this,"isCameraControling",!1);this.main=e,this.time=this.main.time,this.setCameraControl()}setCameraControl(){this.originalCameraPosition=this.main.camera.instance.position.clone();const e=this.main.camera.controls;e.enableDamping=!0,e.enablePan=!1,e.enableZoom=!1,e.addEventListener("start",()=>this.onCameraControl(1)),e.addEventListener("end",()=>this.onCameraControl(-1)),e.addEventListener("change",()=>this.onCameraControl(0))}onCameraControl(e){e===0?(this.clearResetCameraControlTimeout(),this.setResetCameraControlTimeout()):e===1?(this.isCameraControling=!0,this.clearResetCameraControlTimeout()):(this.isCameraControling=!1,this.setResetCameraControlTimeout())}clearResetCameraControlTimeout(){Number.isNaN(this.resetCameraControlTimeoutID)||(window.clearTimeout(this.resetCameraControlTimeoutID),this.resetCameraControlTimeoutID=NaN)}setResetCameraControlTimeout(){this.main.camera.isNeedUpdate||this.isCameraControling||(this.resetCameraControlTimeoutID=window.setTimeout(()=>this.resetCameraControl(),250))}resetCameraControl(){if(!this.originalCameraPosition)return;const e=this.main.camera.instance,t=1,{x:i,y:n,z:r}=this.originalCameraPosition;m.to(e.position,{duration:t,x:i,y:n,z:r})}update(){}}class ls{constructor(e){s(this,"main");s(this,"scene");s(this,"environment");s(this,"resources");s(this,"guiAxesHelper");s(this,"guiCameraHelper");s(this,"text");s(this,"geometrys");s(this,"commander");this.main=e,this.scene=this.main.scene,this.resources=this.main.resources,this.resources.onReady(()=>{this.text=new os(this.main),this.geometrys=new hs(this.main),this.environment=new ns(this.main),this.guiAxesHelper=new as(this.main),this.guiCameraHelper=new rs(this.main),this.commander=new cs(this.main)})}resize(){var e;this.text&&((e=this.text)==null||e.resize())}update(){var e,t;(e=this.geometrys)==null||e.update(),(t=this.commander)==null||t.update()}}var ds=[{name:"font",type:"fontJSON",path:Je}];class us extends I{constructor(t,i,n){super();s(this,"canvas");s(this,"viewArea");s(this,"viewControlsArea");s(this,"sizes");s(this,"time");s(this,"scene");s(this,"resources");s(this,"camera");s(this,"renderer");s(this,"world");s(this,"debug");this.canvas=t,this.viewArea=i,this.viewControlsArea=n||this.canvas,this.debug=new Xt(this),this.sizes=new Jt(i),this.time=new Kt,this.scene=new me,this.resources=new es(ds),this.camera=new ts(this),this.renderer=new ss(this),this.world=new ls(this),this.sizes.onResize(()=>this.resize()),this.time.onTick(()=>this.update())}resize(){this.camera.resize(),this.world.resize(),this.renderer.resize()}update(){this.camera.update(),this.world.update(),this.renderer.update()}render(){this.time.tick()}pausedRender(){this.time.paused()}destroy(){this.sizes.destroy(),this.time.destroy(),this.renderer.destroy(),this.camera.controls.dispose(),this.resources.destroy(),this.debug.destroy(),this.scene.traverse(t=>{if(t instanceof p){t.geometry.dispose();for(const i in t.material){const n=t.material[i];n&&typeof n.dispose=="function"&&n.dispose()}}}),this.emit("destroyed")}onDestroyed(t){return this.once("destroyed",t)}}const ms=T({name:"Section-2-2-Banner-RenderView-Text",setup(a){const e=S("rendersAreaMap"),t=S("loadingManager"),i=x(),n=x(),r=x(),l=x();let o;return z(async()=>{const h=i.value,d=n.value,u=l.value;o=new us(h,d,u),o.render(),e&&e.set(r.value,o),t&&t.add(o)}),R(()=>{o==null||o.destroy()}),(h,d)=>(f(),v("div",{class:"viewArea",ref_key:"viewArea",ref:n},[c("div",{class:"viewReactArea",ref_key:"viewReactArea",ref:r},null,512),c("canvas",{class:"background",ref_key:"canvas",ref:i},null,512),c("div",{class:"viewControlsArea",ref_key:"viewControlsArea",ref:l},null,512)],512))}});var ps=b(ms,[["__scopeId","data-v-8fbe8300"],["__file","/Volumes/Work/l00 Studio/l00/source/src/graphics-components/home-page/components/Section-2-2-Banner-RenderView-Text.vue"]]);const gs={class:"section"},fs={class:"container"},vs={class:"banner"},ws={class:"container"},xs={class:"banner"},_s=T({name:"Section-2",setup(a){const e=Xe.slice(0,10),t=Ze.slice(0,10);return(i,n)=>(f(),v("section",gs,[c("div",fs,[c("div",vs,[_(Yt)]),_(ye,{list:C(e),base:"effects",style:{background:"#333333"}},null,8,["list"])]),c("div",ws,[c("div",xs,[_(ps)]),_(ye,{list:C(t),base:"metaverse",style:{background:"#f4f4f4"}},null,8,["list"])])]))}});var ys=b(_s,[["__scopeId","data-v-7f311c76"],["__file","/Volumes/Work/l00 Studio/l00/source/src/graphics-components/home-page/components/Section-2.vue"]]);class Ms{constructor(e){s(this,"main");s(this,"isActive",!1);s(this,"ui");this.main=e,window.location.hash.includes("debug")&&this.active()}active(){this.isActive=!0,this.ui=new A({autoPlace:!1}),this.fixGui(),this.toWindowTest()}fixGui(){if(!this.ui)return;const e=this.main.viewArea,t=this.ui.domElement;t.classList.add("a"),t.classList.add("taller-than-window");const i=window.document.createElement("div");i.classList.add("dg"),i.classList.add("ac"),i.style.position="absolute",i.appendChild(this.ui.domElement),e.appendChild(i)}toWindowTest(){window.debugView=this.main}addFolder(e){if(!this.ui||!(this.ui instanceof A))return i=>{};const t=this.ui.addFolder(e);return i=>{i(t)}}destroy(){var e;(e=this.ui)==null||e.destroy(),delete window.debugView}}class Cs{constructor(e,t){s(this,"function");s(this,"isOnce");this.function=e,this.isOnce=t.isOnce?t.isOnce:!1}}class ${constructor(){s(this,"__emittersMap__",new WeakMap);s(this,"__emitters__",new Map)}on(e,t){if(typeof e!="string"||e===""||typeof t!="function")return!1;let i=this.__emitters__.get(e);if(i||(i=new Set,this.__emitters__.set(e,i)),this.__emittersMap__.has(t))return!1;{const n=new Cs(t,{isOnce:!1});this.__emittersMap__.set(t,n),i.add(n)}return!0}once(e,t){if(this.on(e,t)){const i=this.__emittersMap__.get(t);if(!i)return!1;i.isOnce=!0}else return!1;return!0}off(e,t){const i=this.__emitters__.get(e);if(!i)return!1;const n=this.__emittersMap__.get(t);return n?(this.__emittersMap__.delete(t),i.delete(n),i.size===0&&this.__emitters__.delete(e),!0):!1}offAll(e){const t=this.__emitters__.get(e);return t?(t.clear(),this.__emitters__.delete(e),!0):!1}clearEvents(){return this.__emitters__.clear(),!0}async emit(e,...t){const i=this.__emitters__.get(e);if(!!i)for(let n of i.values()){try{await n.function.apply(void 0,t)}catch(r){console.error(r)}n.isOnce&&this.off(e,n.function)}}}class Ts extends ${constructor(t){super();s(this,"viewArea");s(this,"width",0);s(this,"height",0);s(this,"pixelRatio",0);s(this,"onWindowResizeListener",()=>{this.updateSize(),this.emit("resize")});this.viewArea=t,this.updateSize(),this.setWindowResizeEmitter()}updateSize(){this.width=this.viewArea.offsetWidth,this.height=this.viewArea.offsetHeight,this.pixelRatio=Math.min(window.devicePixelRatio,2)}setWindowResizeEmitter(){window.addEventListener("resize",this.onWindowResizeListener)}removeWindowResizeEmitter(){window.removeEventListener("resize",this.onWindowResizeListener)}onResize(t){return this.on("resize",t)}destroy(){return this.removeWindowResizeEmitter(),this.clearEvents()}}class bs extends ${constructor(){super();s(this,"start");s(this,"current");s(this,"elapsed");s(this,"delta");s(this,"requestAnimationFrameID",0);s(this,"onTickLoopFunction",()=>{const t=Date.now();this.delta=t-this.current,this.current=t,this.elapsed=this.current-this.start,this.emit("tick"),this.requestAnimationFrameID=window.requestAnimationFrame(this.currentTickLoopFunction)});s(this,"currentTickLoopFunction",()=>{});s(this,"isTicking",!1);this.start=Date.now(),this.current=this.start,this.elapsed=0,this.delta=16}tick(){this.currentTickLoopFunction!==this.onTickLoopFunction&&(this.currentTickLoopFunction=this.onTickLoopFunction,this.isTicking||(this.isTicking=!0,this.current=Date.now()-Math.trunc(1e3/60),this.currentTickLoopFunction()))}paused(){this.isTicking&&(window.cancelAnimationFrame(this.requestAnimationFrameID),this.currentTickLoopFunction=()=>{},this.isTicking=!1)}onTick(t){return this.on("tick",t)}destroy(){return this.currentTickLoopFunction=()=>{},this.clearEvents()}}class Ls extends ${constructor(t){super();s(this,"sources");s(this,"items");s(this,"loaded",0);s(this,"loadTotal",0);s(this,"LoadingManager",new K(()=>{this.loaded===this.loadTotal&&this.ready()},(t,i,n)=>{this.loadTotal=n,this.loaded=i,this.emit("progress",this.loaded,this.loadTotal)}));s(this,"loaders",{gltfLoader:new D(this.LoadingManager),gltfDracoLoader:new D(this.LoadingManager).setDRACOLoader(new ee(this.LoadingManager).setDecoderPath(new te("/assets/draco/").url)),textureLoader:new se(this.LoadingManager),cubeTextureLoader:new ie(this.LoadingManager),fontLoader:new pe(this.LoadingManager)});s(this,"isReady",!1);this.sources=t,this.items={},this.startLoading()}startLoading(){if(this.sources.length===0)return this.ready();for(const t of this.sources)if(t.type==="gltfModel")this.loaders.gltfLoader.load(t.path,i=>{this.sourceLoaded(t,i)});else if(t.type==="gltfDracoModel")this.loaders.gltfDracoLoader.load(t.path,i=>{this.sourceLoaded(t,i)});else if(t.type==="texture")this.loaders.textureLoader.load(t.path,i=>{this.sourceLoaded(t,i)});else if(t.type==="cubeTexture")this.loaders.cubeTextureLoader.load(t.path,i=>{this.sourceLoaded(t,i)});else if(t.type==="fontJSON")this.loaders.fontLoader.load(t.path,i=>{this.sourceLoaded(t,i)});else throw`Unknow source.type: ${t.type}`}sourceLoaded(t,i){this.items[t.name]=i}ready(){this.isReady=!0,this.emit("ready")}onReady(t){return this.isReady?t():this.once("ready",t)}onProgress(t){return this.on("progress",t)}destroy(){return this.clearEvents()}}class Ss{constructor(e){s(this,"main");s(this,"sizes");s(this,"scene");s(this,"canvas");s(this,"instance");s(this,"controls");s(this,"isNeedUpdate",!1);this.main=e,this.sizes=this.main.sizes,this.scene=this.main.scene,this.canvas=this.main.canvas,this.setInstance(),this.setOrbitControls()}setInstance(){this.instance=new ne(45,this.sizes.width/this.sizes.height,.1,100),this.instance.position.set(0,0,-1.5),this.instance.lookAt(0,0,0),this.scene.add(this.instance)}setOrbitControls(){this.controls=new ae(this.instance,this.main.viewControlsArea),this.controls.target=new g(0,0,0),this.controls.enableDamping=!0,this.controls.enabled=!0}resize(){this.instance.aspect=this.sizes.width/this.sizes.height,this.instance.updateProjectionMatrix()}update(){this.isNeedUpdate=this.controls.update()}}const Me={uniforms:{tDiffuse:{value:null},tDisp:{value:null},byp:{value:0},amount:{value:.08},angle:{value:.02},seed:{value:.02},seed_x:{value:.02},seed_y:{value:.02},distortion_x:{value:.5},distortion_y:{value:.6},col_s:{value:.05}},vertexShader:`

		varying vec2 vUv;
		void main() {
			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
		}`,fragmentShader:`

		uniform int byp; //should we apply the glitch ?

		uniform sampler2D tDiffuse;
		uniform sampler2D tDisp;

		uniform float amount;
		uniform float angle;
		uniform float seed;
		uniform float seed_x;
		uniform float seed_y;
		uniform float distortion_x;
		uniform float distortion_y;
		uniform float col_s;

		varying vec2 vUv;


		float rand(vec2 co){
			return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);
		}

		void main() {
			if(byp<1) {
				vec2 p = vUv;
				float xs = floor(gl_FragCoord.x / 0.5);
				float ys = floor(gl_FragCoord.y / 0.5);
				//based on staffantans glitch shader for unity https://github.com/staffantan/unityglitch
				float disp = texture2D(tDisp, p*seed*seed).r;
				if(p.y<distortion_x+col_s && p.y>distortion_x-col_s*seed) {
					if(seed_x>0.){
						p.y = 1. - (p.y + distortion_y);
					}
					else {
						p.y = distortion_y;
					}
				}
				if(p.x<distortion_y+col_s && p.x>distortion_y-col_s*seed) {
					if(seed_y>0.){
						p.x=distortion_x;
					}
					else {
						p.x = 1. - (p.x + distortion_x);
					}
				}
				p.x+=disp*seed_x*(seed/5.);
				p.y+=disp*seed_y*(seed/5.);
				//base from RGB shift shader
				vec2 offset = amount * vec2( cos(angle), sin(angle));
				vec4 cr = texture2D(tDiffuse, p + offset);
				vec4 cga = texture2D(tDiffuse, p);
				vec4 cb = texture2D(tDiffuse, p - offset);
				gl_FragColor = vec4(cr.r, cga.g, cb.b, cga.a);
				//add noise
				vec4 snow = 200.*amount*vec4(rand(vec2(xs * seed,ys * seed*50.))*0.2);
				gl_FragColor = gl_FragColor+ snow;
			}
			else {
				gl_FragColor=texture2D (tDiffuse, vUv);
			}
		}`};class zs extends Ae{constructor(e=64){super(),Me===void 0&&console.error("THREE.GlitchPass relies on DigitalGlitch");const t=Me;this.uniforms=Z.clone(t.uniforms),this.uniforms.tDisp.value=this.generateHeightmap(e),this.material=new H({uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader}),this.fsQuad=new De(this.material),this.goWild=!1,this.curF=0,this.generateTrigger()}render(e,t,i){e.capabilities.isWebGL2===!1&&(this.uniforms.tDisp.value.format=Be),this.uniforms.tDiffuse.value=i.texture,this.uniforms.seed.value=Math.random(),this.uniforms.byp.value=0,this.curF%this.randX==0||this.goWild==!0?(this.uniforms.amount.value=Math.random()/30,this.uniforms.angle.value=y.randFloat(-Math.PI,Math.PI),this.uniforms.seed_x.value=y.randFloat(-1,1),this.uniforms.seed_y.value=y.randFloat(-1,1),this.uniforms.distortion_x.value=y.randFloat(0,1),this.uniforms.distortion_y.value=y.randFloat(0,1),this.curF=0,this.generateTrigger()):this.curF%this.randX<this.randX/5?(this.uniforms.amount.value=Math.random()/90,this.uniforms.angle.value=y.randFloat(-Math.PI,Math.PI),this.uniforms.distortion_x.value=y.randFloat(0,1),this.uniforms.distortion_y.value=y.randFloat(0,1),this.uniforms.seed_x.value=y.randFloat(-.3,.3),this.uniforms.seed_y.value=y.randFloat(-.3,.3)):this.goWild==!1&&(this.uniforms.byp.value=1),this.curF++,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(),this.fsQuad.render(e))}generateTrigger(){this.randX=y.randInt(120,240)}generateHeightmap(e){const t=new Float32Array(e*e),i=e*e;for(let r=0;r<i;r++){const l=y.randFloat(0,1);t[r]=l}const n=new Ne(t,e,e,Ve,Oe);return n.needsUpdate=!0,n}}const Ce={shaderID:"luminosityHighPass",uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new O(0)},defaultOpacity:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform vec3 defaultColor;
		uniform float defaultOpacity;
		uniform float luminosityThreshold;
		uniform float smoothWidth;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );

			vec3 luma = vec3( 0.299, 0.587, 0.114 );

			float v = dot( texel.xyz, luma );

			vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );

			float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );

			gl_FragColor = mix( outputColor, texel, alpha );

		}`};class P extends Ae{constructor(e,t,i,n){super(),this.strength=t!==void 0?t:1,this.radius=i,this.threshold=n,this.resolution=e!==void 0?new L(e.x,e.y):new L(256,256),this.clearColor=new O(0,0,0),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let r=Math.round(this.resolution.x/2),l=Math.round(this.resolution.y/2);this.renderTargetBright=new G(r,l),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let M=0;M<this.nMips;M++){const w=new G(r,l);w.texture.name="UnrealBloomPass.h"+M,w.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(w);const E=new G(r,l);E.texture.name="UnrealBloomPass.v"+M,E.texture.generateMipmaps=!1,this.renderTargetsVertical.push(E),r=Math.round(r/2),l=Math.round(l/2)}Ce===void 0&&console.error("THREE.UnrealBloomPass relies on LuminosityHighPassShader");const o=Ce;this.highPassUniforms=Z.clone(o.uniforms),this.highPassUniforms.luminosityThreshold.value=n,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new H({uniforms:this.highPassUniforms,vertexShader:o.vertexShader,fragmentShader:o.fragmentShader,defines:{}}),this.separableBlurMaterials=[];const h=[3,5,7,9,11];r=Math.round(this.resolution.x/2),l=Math.round(this.resolution.y/2);for(let M=0;M<this.nMips;M++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(h[M])),this.separableBlurMaterials[M].uniforms.texSize.value=new L(r,l),r=Math.round(r/2),l=Math.round(l/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=t,this.compositeMaterial.uniforms.bloomRadius.value=.1,this.compositeMaterial.needsUpdate=!0;const d=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms.bloomFactors.value=d,this.bloomTintColors=[new g(1,1,1),new g(1,1,1),new g(1,1,1),new g(1,1,1),new g(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,_e===void 0&&console.error("THREE.UnrealBloomPass relies on CopyShader");const u=_e;this.copyUniforms=Z.clone(u.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new H({uniforms:this.copyUniforms,vertexShader:u.vertexShader,fragmentShader:u.fragmentShader,blending:je,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new O,this.oldClearAlpha=1,this.basic=new qe,this.fsQuad=new De(null)}dispose(){for(let e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(let e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose()}setSize(e,t){let i=Math.round(e/2),n=Math.round(t/2);this.renderTargetBright.setSize(i,n);for(let r=0;r<this.nMips;r++)this.renderTargetsHorizontal[r].setSize(i,n),this.renderTargetsVertical[r].setSize(i,n),this.separableBlurMaterials[r].uniforms.texSize.value=new L(i,n),i=Math.round(i/2),n=Math.round(n/2)}render(e,t,i,n,r){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const l=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),r&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=i.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=i.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);let o=this.renderTargetBright;for(let h=0;h<this.nMips;h++)this.fsQuad.material=this.separableBlurMaterials[h],this.separableBlurMaterials[h].uniforms.colorTexture.value=o.texture,this.separableBlurMaterials[h].uniforms.direction.value=P.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[h]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[h].uniforms.colorTexture.value=this.renderTargetsHorizontal[h].texture,this.separableBlurMaterials[h].uniforms.direction.value=P.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[h]),e.clear(),this.fsQuad.render(e),o=this.renderTargetsVertical[h];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,r&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(i),this.fsQuad.render(e)),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=l}getSeperableBlurMaterial(e){return new H({defines:{KERNEL_RADIUS:e,SIGMA:e},uniforms:{colorTexture:{value:null},texSize:{value:new L(.5,.5)},direction:{value:new L(.5,.5)}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 texSize;
				uniform vec2 direction;

				float gaussianPdf(in float x, in float sigma) {
					return 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;
				}
				void main() {
					vec2 invSize = 1.0 / texSize;
					float fSigma = float(SIGMA);
					float weightSum = gaussianPdf(0.0, fSigma);
					vec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;
					for( int i = 1; i < KERNEL_RADIUS; i ++ ) {
						float x = float(i);
						float w = gaussianPdf(x, fSigma);
						vec2 uvOffset = direction * invSize * x;
						vec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;
						vec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;
						diffuseSum += (sample1 + sample2) * w;
						weightSum += 2.0 * w;
					}
					gl_FragColor = vec4(diffuseSum/weightSum, 1.0);
				}`})}getCompositeMaterial(e){return new H({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;
				uniform sampler2D blurTexture1;
				uniform sampler2D blurTexture2;
				uniform sampler2D blurTexture3;
				uniform sampler2D blurTexture4;
				uniform sampler2D blurTexture5;
				uniform float bloomStrength;
				uniform float bloomRadius;
				uniform float bloomFactors[NUM_MIPS];
				uniform vec3 bloomTintColors[NUM_MIPS];

				float lerpBloomFactor(const in float factor) {
					float mirrorFactor = 1.2 - factor;
					return mix(factor, mirrorFactor, bloomRadius);
				}

				void main() {
					gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +
						lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +
						lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +
						lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +
						lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );
				}`})}}P.BlurDirectionX=new L(1,0);P.BlurDirectionY=new L(0,1);class Rs{constructor(e){s(this,"renderer");s(this,"coreRenderer");s(this,"sizes");s(this,"scene");s(this,"resources");s(this,"camera");s(this,"webGLRenderTargetResize");s(this,"webGLRenderTargetDestroy");s(this,"webGLRenderTarget");s(this,"effectComposer");s(this,"renderPass");s(this,"resize",()=>{this.effectComposer.setSize(this.sizes.width,this.sizes.height),this.effectComposer.setPixelRatio(this.sizes.pixelRatio)});s(this,"render",()=>{this.effectComposer.render()});this.renderer=e,this.coreRenderer=this.renderer.coreRenderer,{sizes:this.sizes,scene:this.scene,resources:this.resources,camera:this.camera}=this.renderer.main,this.setWebGLRenderTarget(),this.setEffectComposer(),this.resources.onReady(()=>{this.setRenderEffectPass()}),this.renderer.onResize(this.resize),this.renderer.finalRender=this.render}setWebGLRenderTarget(){const e={minFilter:xe,magFilter:xe,format:Qe,encoding:F},t=this.coreRenderer.instance;t.getPixelRatio()===1&&(this.webGLRenderTarget=new G(this.sizes.width,this.sizes.height,e),t.getPixelRatio()===1&&t.capabilities.isWebGL2&&(this.webGLRenderTarget.samples=4),this.webGLRenderTargetDestroy=()=>{var i;(i=this.webGLRenderTarget)==null||i.dispose()},this.renderer.onDestroy(this.webGLRenderTargetDestroy))}setEffectComposer(){this.effectComposer=new Ke(this.coreRenderer.instance,this.webGLRenderTarget),this.resize()}setRenderEffectPass(){this.renderPass=new et(this.scene,this.camera.instance),this.effectComposer.addPass(this.renderPass);const e=new zs;e.goWild=!1,this.effectComposer.addPass(e);const t=new P(new L(0,0),.5,0,0);this.effectComposer.addPass(t),this.renderer.onDestroy(()=>t.dispose());const i=new tt(st);this.effectComposer.addPass(i),this.setSMAAPass()}setSMAAPass(){const e=this.renderer.coreRenderer.instance;if(e.getPixelRatio()!==1||e.capabilities.isWebGL2)return;const t=new it(0,0);this.effectComposer.addPass(t)}}class As extends ${constructor(t){super();s(this,"main");s(this,"finalRender");s(this,"coreRenderer");this.main=t,this.coreRenderer=new Ds(this),new Rs(this)}onDestroy(t){this.on("destroy",t)}destroy(){this.coreRenderer.instance.dispose(),this.emit("destroy")}onResize(t){this.on("resize",t)}resize(){this.emit("resize")}update(){this.finalRender()}}class Ds{constructor(e){s(this,"renderer");s(this,"main");s(this,"canvas");s(this,"sizes");s(this,"scene");s(this,"camera");s(this,"renderToneMappingDebug");s(this,"instance");s(this,"resize",()=>{this.instance.setSize(this.sizes.width,this.sizes.height),this.instance.setPixelRatio(this.sizes.pixelRatio)});s(this,"render",()=>{this.instance.render(this.scene,this.camera.instance)});this.renderer=e,this.main=this.renderer.main,this.canvas=this.main.canvas,this.sizes=this.main.sizes,this.scene=this.main.scene,this.camera=this.main.camera,this.renderToneMappingDebug=this.main.debug.addFolder("RenderToneMapping"),this.setInstance()}setInstance(){this.instance=new re({canvas:this.canvas,antialias:!0,alpha:!0}),this.instance.toneMappingExposure=1,this.resize(),this.renderToneMappingDebug(e=>{e.add(this.instance,"toneMapping",{No:V,Linear:oe,Reinhard:he,Cineon:ce,ACESFilmic:N}).onFinishChange(()=>{this.instance.toneMapping=Number(this.instance.toneMapping)}),e.add(this.instance,"toneMappingExposure").min(0).max(10).step(.001)}),this.renderer.onResize(this.resize),this.renderer.finalRender=this.render}}class Ps{constructor(e){s(this,"main");s(this,"scene");s(this,"resources");s(this,"addDebug");s(this,"sunLight");s(this,"environmentMap");this.main=e,this.scene=this.main.scene,this.resources=this.main.resources,this.addDebug=this.main.debug.addFolder("environment"),this.setSunLight()}setSunLight(){this.sunLight=new le("#ffffff",5),this.sunLight.castShadow=!0,this.sunLight.shadow.camera.far=20,this.sunLight.shadow.mapSize.set(1024,1024),this.sunLight.shadow.normalBias=.05,this.sunLight.position.set(5,2,2),this.scene.add(this.sunLight),this.addDebug(e=>{e.add(this.sunLight,"intensity").name("sunLightIntensity").min(0).max(10).step(.001),e.add(this.sunLight.position,"x").name("sunLightX").min(-50).max(50).step(.001),e.add(this.sunLight.position,"y").name("sunLightY").min(-50).max(50).step(.001),e.add(this.sunLight.position,"z").name("sunLightZ").min(-50).max(50).step(.001)})}setEnvironmentMap(){this.environmentMap={},this.environmentMap.intensity=1.5,this.environmentMap.texture=this.resources.items.environmentMapTexture,this.environmentMap.texture.encoding=F,this.scene.environment=this.environmentMap.texture,this.environmentMap.updateMaterials=()=>{this.scene.traverse(e=>{e instanceof p&&e.material instanceof de&&(e.material.envMap=this.environmentMap.texture,e.material.envMapIntensity=this.environmentMap.intensity,e.material.needsUpdate=!0,e.castShadow=!0,e.receiveShadow=!0)})},this.environmentMap.updateMaterials(),this.addDebug(e=>{e.add(this.environmentMap,"intensity").name("envMapIntensity").min(0).max(4).step(.001).onChange(()=>{this.environmentMap.updateMaterials()})})}}class Fs{constructor(e){s(this,"main");s(this,"scene");s(this,"addDebug");s(this,"isShowAxesHelper",!0);s(this,"axesHelper");this.main=e,this.scene=this.main.scene,this.addDebug=this.main.debug.addFolder("AxesHelper"),this.setAxesHelper()}setAxesHelper(){this.addDebug(e=>{this.axesHelper=new ue(1),this.toggleAxesHelper(),e.open(),e.add(this,"isShowAxesHelper").onChange(t=>{this.toggleAxesHelper()})})}toggleAxesHelper(e){(typeof e=="boolean"?e:this.isShowAxesHelper)?this.scene.add(this.axesHelper):this.scene.remove(this.axesHelper)}}class Es{constructor(e){s(this,"main");s(this,"scene");s(this,"addDebug");s(this,"isControlCamera",!0);this.main=e,this.scene=this.main.scene,this.addDebug=this.main.debug.addFolder("CameraHelper"),this.setHelper()}setHelper(){this.isControlCamera=this.main.camera.controls.enabled,this.addDebug(e=>{e.open(),e.add(this,"isControlCamera").onChange(t=>{this.toggleHelper(t)})}),this.addDebug(e=>{const t=this.main.camera;e.add(t.instance.position,"y").name("positionY").min(-10).max(10).step(.001),e.add(t.instance.position,"z").name("positionZ").min(-10).max(10).step(.001),e.add(t.controls.target,"x").name("lookAtX").min(-5).max(5).step(.001),e.add(t.controls.target,"y").name("lookAtY").min(-5).max(5).step(.001),e.add(t.controls.target,"z").name("lookAtZ").min(-5).max(5).step(.001)})}toggleHelper(e){this.main.canvas.style.pointerEvents=e?"unset":"",this.main.camera.controls.enabled=!!e}}class Hs{constructor(e){s(this,"main");s(this,"scene");s(this,"addDebug");s(this,"isShowBorder",!0);this.main=e,this.scene=this.main.scene,this.addDebug=this.main.debug.addFolder("CssHelper"),this.setControler(),this.toggleControler()}setControler(){this.addDebug(e=>{e.add(this,"isShowBorder").onChange(t=>{this.toggleControler(t)})})}toggleControler(e){this.isShowBorder}}class ks{constructor(e){s(this,"main");s(this,"scene");s(this,"resources");s(this,"time");s(this,"addDebug");s(this,"material");s(this,"resource");s(this,"model");s(this,"animation");this.main=e,this.scene=this.main.scene,this.resources=this.main.resources,this.time=this.main.time,this.addDebug=this.main.debug.addFolder("Model"),this.setMaterial(),this.setModel(),this.setAnimation()}setMaterial(){const e=new Ye,t=this.resources.items.matcap;e.matcap=t,e.needsUpdate=!0,this.material=e}setModel(){this.resource=this.main.resources.items["model-myhead"],this.model=this.resource.scene.children[0],this.model.rotation.y=Math.PI*1,this.model.rotation.x=Math.PI*-.03,this.model.position.y=-.05,this.scene.add(this.model),this.model.traverse(e=>{e instanceof p&&(e.name==="test"&&(e.visible=!1),e.castShadow=!0,e.material=this.material)}),this.addDebug(e=>{e.add(this.model.rotation,"y").name("rotationY").min(-2*Math.PI).max(2*Math.PI).step(.001)})}setAnimation(){this.animation={},this.animation.rotation={},this.animation.rotation.update=()=>{this.model.rotation.y+=this.time.delta*2e-4}}update(){this.animation.rotation.update()}}class Is{constructor(e){s(this,"main");s(this,"time");s(this,"originalCameraPosition");s(this,"resetCameraControlTimeoutID",NaN);s(this,"isCameraControling",!1);this.main=e,this.time=this.main.time,this.setCameraControl()}setCameraControl(){this.originalCameraPosition=this.main.camera.instance.position.clone();const e=this.main.camera.controls;e.enableDamping=!0,e.maxPolarAngle=Math.PI*.7,e.enablePan=!1,e.enableZoom=!1,e.addEventListener("start",()=>this.onCameraControl(1)),e.addEventListener("end",()=>this.onCameraControl(-1)),e.addEventListener("change",()=>this.onCameraControl(0))}onCameraControl(e){e===0?(this.clearResetCameraControlTimeout(),this.setResetCameraControlTimeout()):e===1?(this.isCameraControling=!0,this.clearResetCameraControlTimeout()):(this.isCameraControling=!1,this.setResetCameraControlTimeout())}clearResetCameraControlTimeout(){Number.isNaN(this.resetCameraControlTimeoutID)||(window.clearTimeout(this.resetCameraControlTimeoutID),this.resetCameraControlTimeoutID=NaN)}setResetCameraControlTimeout(){this.main.camera.isNeedUpdate||this.isCameraControling||(this.resetCameraControlTimeoutID=window.setTimeout(()=>this.resetCameraControl()))}resetCameraControl(){if(!this.originalCameraPosition)return;const e=this.main.camera.instance,t=1,{x:i,y:n,z:r}=this.originalCameraPosition;m.to(e.position,{duration:t,x:i,y:n,z:r})}update(){}}class $s{constructor(e){s(this,"main");s(this,"scene");s(this,"environment");s(this,"resources");s(this,"guiAxesHelper");s(this,"guiCameraHelper");s(this,"guiCssHelper");s(this,"model");s(this,"commander");this.main=e,this.scene=this.main.scene,this.resources=this.main.resources,this.resources.onReady(()=>{this.model=new ks(this.main),this.environment=new Ps(this.main),this.guiAxesHelper=new Fs(this.main),this.guiCameraHelper=new Es(this.main),this.guiCssHelper=new Hs(this.main),this.commander=new Is(this.main)})}resize(){}update(){var e,t;(e=this.model)==null||e.update(),(t=this.commander)==null||t.update()}}var Us=[{name:"matcap",type:"texture",path:new URL("/l00/static/png/1B1B1B_999999_575757_747474-PS-bf501b3f.png?url",self.location).href},{name:"model-myhead",type:"gltfDracoModel",path:new URL("/l00/static/gltf/my head-08ad7dc7.gltf?url",self.location).href}];class Gs extends ${constructor(t,i,n){super();s(this,"canvas");s(this,"viewArea");s(this,"viewControlsArea");s(this,"sizes");s(this,"time");s(this,"scene");s(this,"resources");s(this,"camera");s(this,"renderer");s(this,"world");s(this,"debug");this.canvas=t,this.viewArea=i,this.viewControlsArea=n||this.canvas,this.debug=new Ms(this),this.sizes=new Ts(i),this.time=new bs,this.scene=new me,this.resources=new Ls(Us),this.camera=new Ss(this),this.renderer=new As(this),this.world=new $s(this),this.sizes.onResize(()=>this.resize()),this.time.onTick(()=>this.update())}resize(){this.camera.resize(),this.world.resize(),this.renderer.resize()}update(){this.camera.update(),this.world.update(),this.renderer.update()}render(){this.time.tick()}pausedRender(){this.time.paused()}destroy(){this.sizes.destroy(),this.time.destroy(),this.renderer.destroy(),this.camera.controls.dispose(),this.resources.destroy(),this.debug.destroy(),this.scene.traverse(t=>{if(t instanceof p){t.geometry.dispose();for(const i in t.material){const n=t.material[i];n&&typeof n.dispose=="function"&&n.dispose()}}}),this.emit("destroyed")}onDestroyed(t){return this.once("destroyed",t)}}const Ws=T({name:"Section-3-RenderView-Head",setup(a){const e=S("rendersAreaMap"),t=S("loadingManager"),i=x(),n=x(),r=x(),l=x();let o;return z(async()=>{const h=i.value,d=n.value,u=l.value;o=new Gs(h,d,u),o.render(),e&&e.set(r.value,o),t&&t.add(o)}),R(()=>{o==null||o.destroy()}),(h,d)=>(f(),v("div",{class:"viewArea",ref_key:"viewArea",ref:n},[c("div",{class:"viewReactArea",ref_key:"viewReactArea",ref:r},null,512),c("canvas",{class:"",ref_key:"canvas",ref:i},null,512),c("div",{class:"viewControlsArea",ref_key:"viewControlsArea",ref:l},null,512)],512))}});var Bs=b(Ws,[["__scopeId","data-v-107f72bc"],["__file","/Volumes/Work/l00 Studio/l00/source/src/graphics-components/home-page/components/Section-3-RenderView-Head.vue"]]);const Ns=a=>(q("data-v-7f3f33f7"),a=a(),Q(),a),Vs={class:"container"},Os={class:"head"},js=Ns(()=>c("div",{class:"content"},[c("span",{class:""},"WeChatID: junjian12")],-1)),qs=T({name:"Section-3",setup(a){return(e,t)=>(f(),v("section",null,[c("div",Vs,[c("div",Os,[_(Bs)]),js])]))}});var Qs=b(qs,[["__scopeId","data-v-7f3f33f7"],["__file","/Volumes/Work/l00 Studio/l00/source/src/graphics-components/home-page/components/Section-3.vue"]]);const Ys={class:"main"},Xs=T({name:"l00-Home-Main",props:{scrollMidline:{type:Number,required:!0}},setup(a){const e=a;return(t,i)=>(f(),v("div",Ys,[_(Pt,{scrollMidline:e.scrollMidline},null,8,["scrollMidline"]),_(ys,{style:{"margin-top":"-50vh"}}),_(Qs)]))}});var ui=b(Xs,[["__scopeId","data-v-2137cbde"],["__file","/Volumes/Work/l00 Studio/l00/source/src/graphics-components/home-page/l00-Home-Main.vue"]]);export{ui as default};
