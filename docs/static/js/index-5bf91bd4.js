var A=Object.defineProperty;var k=(n,t,e)=>t in n?A(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var s=(n,t,e)=>(k(n,typeof t!="symbol"?t+"":t,e),e);import{d as b,r as w,P as T,j as F,C as E,o as m,c as f,a as l,F as U,s as V,t as x,M as y,N as S,k as z,u as D,K as H,p as W,e as O,m as j}from"./vendor-9f0bb9fc.js";import{j as M,e as L,f as I,g as B,h as G,i as N,P as $,O as q,W as J,s as K,a3 as P,a as Q,a4 as X,a5 as Y,C as Z,Q as ee,A as te,r as se,H as ie,a6 as ne,M as C,S as re}from"./dat.gui.module-3ed960a2.js";import{F as ae}from"./FontLoader-446c44a8.js";import{_ as R}from"./plugin-vue_export-helper-4223c0cf.js";class oe{constructor(t){s(this,"number");s(this,"fragment",null);s(this,"vertex",null);this.number=t}}const ce={"./View/core/Shaders/Pattern 1/fragment.glsl":`varying vec2 vUv;

void main()
{
  gl_FragColor = vec4(vUv.x, vUv.y, 1.0, 1.0);
}`,"./View/core/Shaders/Pattern 1/vertex.glsl":`varying vec2 vUv;

void main()
{
    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);

    vUv = uv;
}`,"./View/core/Shaders/Pattern 2/fragment.glsl":`varying vec2 vUv;

void main()
{
  gl_FragColor = vec4(vUv, 0.0, 1.0); // \u8C03\u8282 Blue \u6709\u4E0D\u540C\u7684\u6548\u679C
}`,"./View/core/Shaders/Pattern 2/vertex.glsl":`varying vec2 vUv;

void main()
{
    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);

    vUv = uv;
}`,"./View/core/Shaders/Pattern 3/fragment.glsl":`varying vec2 vUv;

void main()
{
  float strength = vUv.x;

  gl_FragColor = vec4(vec3(strength), 1.0); // 
}`,"./View/core/Shaders/Pattern 3/vertex.glsl":`varying vec2 vUv;

void main()
{
    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);

    vUv = uv;
}`,"./View/core/Shaders/Pattern 3 copy/fragment.glsl":`varying vec2 vUv;

void main()
{
  float strength = vUv.x;

  gl_FragColor = vec4(vec3(strength), 1.0); // 
}

[16:52]`,"./View/core/Shaders/Pattern 3 copy/vertex.glsl":`varying vec2 vUv;

void main()
{
    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);

    vUv = uv;
}`},p=[];Object.entries(ce).forEach(([n,t])=>{var d,_;const i=n.toString().split("/"),a=(d=i.pop())==null?void 0:d.split(".")[0],u=(_=i.pop())==null?void 0:_.match(/\d+/),v=u?parseInt(u[0]):0,c=v-1,r=!!p[c],h=r?p[c]:new oe(v),o=t.toString();r||(p[c]=h),a==="fragment"?h.fragment=o:a==="vertex"&&(h.vertex=o)});p.sort((n,t)=>t.number-n.number);class he{constructor(t){s(this,"main");s(this,"isActive",!1);s(this,"ui");this.main=t,window.location.hash.includes("debug")&&this.active()}active(){this.isActive=!0,this.ui=new M,this.fixGui(),this.toWindowTest()}fixGui(){var i;const t=this.main.viewArea,e=(i=this.ui)==null?void 0:i.domElement.parentElement;t.appendChild(e),e.style.position="absolute"}toWindowTest(){window.debugView=this.main}addFolder(t){if(!this.ui||!(this.ui instanceof M))return i=>{};const e=this.ui.addFolder(t);return i=>{i(e)}}destroy(){var t;(t=this.ui)==null||t.destroy(),delete window.debugView}}class de{constructor(t,e){s(this,"function");s(this,"isOnce");this.function=t,this.isOnce=e.isOnce?e.isOnce:!1}}class g{constructor(){s(this,"__emittersMap__",new WeakMap);s(this,"__emitters__",new Map)}on(t,e){if(typeof t!="string"||t===""||typeof e!="function")return!1;let i=this.__emitters__.get(t);if(i||(i=new Set,this.__emitters__.set(t,i)),this.__emittersMap__.has(e))return!1;{const a=new de(e,{isOnce:!1});this.__emittersMap__.set(e,a),i.add(a)}return!0}once(t,e){if(this.on(t,e)){const i=this.__emittersMap__.get(e);if(!i)return!1;i.isOnce=!0}else return!1;return!0}off(t,e){const i=this.__emitters__.get(t);if(!i)return!1;const a=this.__emittersMap__.get(e);return a?(this.__emittersMap__.delete(e),i.delete(a),i.size===0&&this.__emitters__.delete(t),!0):!1}offAll(t){const e=this.__emitters__.get(t);return e?(e.clear(),this.__emitters__.delete(t),!0):!1}clearEvents(){return this.__emitters__.clear(),!0}async emit(t,...e){const i=this.__emitters__.get(t);if(!!i)for(let a of i.values()){try{await a.function.apply(void 0,e)}catch(u){console.error(u)}a.isOnce&&this.off(t,a.function)}}}class le extends g{constructor(e){super();s(this,"viewArea");s(this,"width",0);s(this,"height",0);s(this,"pixelRatio",0);s(this,"onWindowResizeListener",()=>{this.updateSize(),this.emit("resize")});this.viewArea=e,this.updateSize(),this.setWindowResizeEmitter()}updateSize(){this.width=this.viewArea.offsetWidth,this.height=this.viewArea.offsetHeight,this.pixelRatio=Math.min(window.devicePixelRatio,2)}setWindowResizeEmitter(){window.addEventListener("resize",this.onWindowResizeListener)}removeWindowResizeEmitter(){window.removeEventListener("resize",this.onWindowResizeListener)}onResize(e){return this.on("resize",e)}destroy(){return this.removeWindowResizeEmitter(),this.clearEvents()}}class ue extends g{constructor(){super();s(this,"start");s(this,"current");s(this,"elapsed");s(this,"delta");s(this,"onTickLoopFunction",()=>{const e=Date.now();this.delta=e-this.current,this.current=e,this.elapsed=this.current-this.start,this.emit("tick"),window.requestAnimationFrame(this.currentTickLoopFunction)});s(this,"currentTickLoopFunction",()=>{});this.start=Date.now(),this.current=this.start,this.elapsed=0,this.delta=16}tick(){this.currentTickLoopFunction!==this.onTickLoopFunction&&(this.currentTickLoopFunction=this.onTickLoopFunction,this.currentTickLoopFunction())}onTick(e){return this.on("tick",e)}destroy(){return this.currentTickLoopFunction=()=>{},this.clearEvents()}}class pe extends g{constructor(e){super();s(this,"sources");s(this,"items");s(this,"toLoad");s(this,"loaded");s(this,"loaders",{gltfLoader:new L,gltfDracoLoader:new L().setDRACOLoader(new I().setDecoderPath(new B("/assets/draco/").url)),textureLoader:new G,cubeTextureLoader:new N,fontLoader:new ae});s(this,"isReady",!1);this.sources=e,this.items={},this.toLoad=this.sources.length,this.loaded=0,this.startLoading()}startLoading(){if(this.sources.length===0)return this.ready();for(const e of this.sources)if(e.type==="gltfModel")this.loaders.gltfLoader.load(e.path,i=>{this.sourceLoaded(e,i)});else if(e.type==="gltfDracoModel")this.loaders.gltfDracoLoader.load(e.path,i=>{this.sourceLoaded(e,i)});else if(e.type==="texture")this.loaders.textureLoader.load(e.path,i=>{this.sourceLoaded(e,i)});else if(e.type==="cubeTexture")this.loaders.cubeTextureLoader.load(e.path,i=>{this.sourceLoaded(e,i)});else if(e.type==="fontJSON")this.loaders.fontLoader.load(e.path,i=>{this.sourceLoaded(e,i)});else throw`Unknow source.type: ${e.type}`}sourceLoaded(e,i){this.items[e.name]=i,this.loaded++,this.loaded===this.toLoad&&this.ready()}ready(){this.isReady=!0,this.emit("ready")}onReady(e){return this.isReady?e():this.once("ready",e)}}class me{constructor(t){s(this,"main");s(this,"sizes");s(this,"scene");s(this,"canvas");s(this,"instance");s(this,"controls");this.main=t,this.sizes=this.main.sizes,this.scene=this.main.scene,this.canvas=this.main.canvas,this.setInstance(),this.setOrbitControls()}setInstance(){this.instance=new $(75,this.sizes.width/this.sizes.height,.1,100),this.instance.position.set(1,-.5,2),this.instance.lookAt(0,0,0),this.scene.add(this.instance)}setOrbitControls(){this.controls=new q(this.instance,this.canvas),this.controls.enableDamping=!0}resize(){this.instance.aspect=this.sizes.width/this.sizes.height,this.instance.updateProjectionMatrix()}update(){this.controls.update()}}class ve extends g{constructor(e){super();s(this,"main");s(this,"finalRender");s(this,"coreRenderer");this.main=e,this.coreRenderer=new fe(this)}onDestroy(e){this.on("destroy",e)}destroy(){this.coreRenderer.instance.dispose(),this.emit("destroy")}onResize(e){this.on("resize",e)}resize(){this.emit("resize")}update(){this.finalRender()}}class fe{constructor(t){s(this,"renderer");s(this,"main");s(this,"canvas");s(this,"sizes");s(this,"scene");s(this,"camera");s(this,"renderToneMappingDebug");s(this,"instance");s(this,"resize",()=>{this.instance.setSize(this.sizes.width,this.sizes.height),this.instance.setPixelRatio(this.sizes.pixelRatio)});s(this,"render",()=>{this.instance.render(this.scene,this.camera.instance)});this.renderer=t,this.main=this.renderer.main,this.canvas=this.main.canvas,this.sizes=this.main.sizes,this.scene=this.main.scene,this.camera=this.main.camera,this.renderToneMappingDebug=this.main.debug.addFolder("RenderToneMapping"),this.setInstance()}setInstance(){this.instance=new J({canvas:this.canvas,antialias:!0,alpha:!1}),this.instance.physicallyCorrectLights=!0,this.instance.outputEncoding=K,this.instance.toneMapping=P,this.instance.toneMappingExposure=1.5,this.instance.shadowMap.enabled=!0,this.instance.shadowMap.type=Q,this.resize(),this.renderToneMappingDebug(t=>{t.add(this.instance,"toneMapping",{No:X,Linear:Y,Reinhard:P,Cineon:Z,ACESFilmic:ee}).onFinishChange(()=>{this.instance.toneMapping=Number(this.instance.toneMapping)}),t.add(this.instance,"toneMappingExposure").min(0).max(10).step(.001)}),this.renderer.onResize(this.resize),this.renderer.finalRender=this.render}}class ge{constructor(t){s(this,"main");s(this,"scene");s(this,"addDebug");s(this,"isShowAxesHelper",!0);s(this,"axesHelper");this.main=t,this.scene=this.main.scene,this.addDebug=this.main.debug.addFolder("AxesHelper"),this.setAxesHelper()}setAxesHelper(){this.addDebug(t=>{this.axesHelper=new te(1),this.toggleAxesHelper(),t.open(),t.add(this,"isShowAxesHelper").onChange(e=>{this.toggleAxesHelper()})})}toggleAxesHelper(t){(typeof t=="boolean"?t:this.isShowAxesHelper)?this.scene.add(this.axesHelper):this.scene.remove(this.axesHelper)}}class we{constructor(t){s(this,"main");s(this,"scene");s(this,"resources");s(this,"time");s(this,"patternPlane");s(this,"animation");this.main=t,this.scene=this.main.scene,this.resources=this.main.resources,this.time=this.main.time,this.setPatternPlane()}setPatternPlane(){const t=new se(2,2,32,32),e=new ie({vertexShader:`
void main()
{
    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,fragmentShader:`
void main()
{
    gl_FragColor = vec4(0.5, 0.0, 1.0, 1.0);
}`,side:ne});this.patternPlane=new C(t,e),this.scene.add(this.patternPlane)}setAnimation(){}update(){}}class _e{constructor(t){s(this,"main");s(this,"scene");s(this,"environment");s(this,"resources");s(this,"axesHelper");s(this,"patternPlane");this.main=t,this.scene=this.main.scene,this.resources=this.main.resources,this.resources.onReady(()=>{this.axesHelper=new ge(this.main),this.patternPlane=new we(this.main)})}resize(){}update(){var t;(t=this.patternPlane)==null||t.update()}}var xe=[];class ye{constructor(t,e){s(this,"canvas");s(this,"viewArea");s(this,"sizes");s(this,"time");s(this,"scene");s(this,"resources");s(this,"camera");s(this,"renderer");s(this,"world");s(this,"isPlayAnimation",!0);s(this,"debug");this.canvas=t,this.viewArea=e,this.debug=new he(this),this.sizes=new le(e),this.time=new ue,this.scene=new re,this.resources=new pe(xe),this.camera=new me(this),this.renderer=new ve(this),this.world=new _e(this),this.sizes.onResize(()=>this.resize()),this.time.onTick(()=>this.update())}resize(){this.camera.resize(),this.world.resize(),this.renderer.resize()}update(){this.camera.update(),this.world.update(),this.renderer.update()}render(){this.time.tick()}destroy(){this.sizes.destroy(),this.time.destroy(),this.renderer.destroy(),this.camera.controls.dispose(),this.debug.destroy(),this.scene.traverse(t=>{if(t instanceof C){t.geometry.dispose();for(const e in t.material){const i=t.material[e];i&&typeof i.dispose=="function"&&i.dispose()}}})}}var Se=(n,t)=>{var i;if(!n)return;const e=(i=n.world.patternPlane)==null?void 0:i.patternPlane.material;t.fragmentShader&&(e.fragmentShader=t.fragmentShader),t.vertexShader&&(e.vertexShader=t.vertexShader),e.needsUpdate=!0};const ze=n=>(W("data-v-493f0785"),n=n(),O(),n),Me={class:"patterns"},Le={class:"codepart"},Pe={class:"title"},be={key:0,class:"code"},Ce=["onUpdate:modelValue"],Re={key:1,class:"code"},Ae=["onUpdate:modelValue"],ke=["onClick"],Te={class:"render"},Fe=ze(()=>l("div",{class:"background"},null,-1)),Ee={class:"",style:{margin:"20px 0"}},Ue=b({name:"l00-ShaderPatterns",setup(n){console.log(p);const t=r=>{const{fragment:h,vertex:o}=r,d={};h&&(d.fragmentShader=h),o&&(d.vertexShader=o),Se(c,d)},e=w(!1),i={},a=T(e,()=>{const r=c.camera;e.value?(i.fov=r.instance.fov,i.position=r.instance.position.clone(),r.controls.enabled=!1,r.instance.fov=90,r.instance.position.set(0,0,1),r.instance.lookAt(0,0,0),r.instance.updateProjectionMatrix()):(r.controls.enabled=!0,r.instance.fov=i.fov,r.instance.position.copy(i.position),r.instance.updateProjectionMatrix())}),u=w(),v=w();let c;return F(async()=>{const r=u.value,h=v.value;c=new ye(r,h),t(p[0]),c.render()}),E(()=>{c==null||c.destroy(),a()}),(r,h)=>(m(),f("div",H({class:"container"},r.$attrs),[l("section",Me,[(m(!0),f(U,null,V(D(p),o=>(m(),f("div",Le,[l("div",Pe,"Pattern "+x(o.number),1),o.vertex?(m(),f("div",be,[y(l("textarea",{rows:"5","onUpdate:modelValue":d=>o.vertex=d},null,8,Ce),[[S,o.vertex]])])):z("v-if",!0),o.fragment?(m(),f("div",Re,[y(l("textarea",{rows:"30","onUpdate:modelValue":d=>o.fragment=d},null,8,Ae),[[S,o.fragment]])])):z("v-if",!0),l("div",{style:{width:"100px",height:"100px",display:"block",cursor:"pointer",background:"red","align-self":"flex-end"},onClick:d=>t(o)},null,8,ke)]))),256))]),l("div",Te,[l("section",{class:"view",ref_key:"viewArea",ref:v},[Fe,l("canvas",{class:"",ref_key:"canvas",ref:u},null,512)],512),l("div",Ee,[l("button",{onClick:h[0]||(h[0]=()=>e.value=!e.value)},x(e.value?"\u81EA\u7531\u89C6\u89D2":"\u6B63\u9762\u67E5\u770B"),1)])])],16))}});var Ve=R(Ue,[["__scopeId","data-v-493f0785"],["__file","/Volumes/Work/l00 Studio/l00/source/src/graphics-components/test-shader-patterns/l00-ShaderPatterns.vue"]]);const De=b({name:"index",setup(n){return(t,e)=>(m(),j(Ve))}});var Be=R(De,[["__file","/Volumes/Work/l00 Studio/l00/source/src/graphics-components/test-shader-patterns/index.vue"]]);export{Be as default};
