var g=Object.defineProperty;var x=(o,t,e)=>t in o?g(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var r=(o,t,e)=>(x(o,typeof t!="symbol"?t+"":t,e),e);import{_ as h}from"./plugin-vue_export-helper-4223c0cf.js";import{o as u,b as _,e as v,C as z,M as p,d as m,h as f,i as C,l as P,s as d,w as b,F as E,v as L,H as M}from"./vendor-79ae1290.js";import{T as A}from"./TopMenu-ee721ceb.js";/* empty css              */const W={},S={class:"container"},R={class:"preview"};function O(o,t){return u(),_("div",S,[v("div",R,[z(o.$slots,"default",{},void 0,!0)])])}var V=h(W,[["render",O],["__scopeId","data-v-19ae30b0"],["__file","/Volumes/Work/l00 Studio/l00/source/root/particles/Preview.vue"]]);class D{constructor(t){r(this,"main");r(this,"isActive",!1);r(this,"ui");this.main=t,this.active()}active(){this.isActive=!0,this.ui=new p({autoPlace:!1}),this.fixGui(),this.toWindowTest()}fixGui(){if(!this.ui)return;const t=this.main.viewArea,e=this.ui.domElement;e.classList.add("a"),e.classList.add("taller-than-window");const s=window.document.createElement("div");s.classList.add("dg"),s.classList.add("ac"),s.style.position="absolute",s.appendChild(this.ui.domElement),t.appendChild(s)}toWindowTest(){window.debugView=this.main}addFolder(t){if(!this.ui||!(this.ui instanceof p))return s=>{};const e=this.ui.addFolder(t);return s=>{s(e)}}destroy(){var t;(t=this.ui)==null||t.destroy(),delete window.debugView}}class T{constructor(t,e){r(this,"function");r(this,"isOnce");this.function=t,this.isOnce=e.isOnce?e.isOnce:!1}}class w{constructor(){r(this,"__emittersMap__",new WeakMap);r(this,"__emitters__",new Map)}on(t,e){if(typeof t!="string"||t===""||typeof e!="function")return!1;let s=this.__emitters__.get(t);if(s||(s=new Set,this.__emitters__.set(t,s)),this.__emittersMap__.has(e))return!1;{const i=new T(e,{isOnce:!1});this.__emittersMap__.set(e,i),s.add(i)}return!0}once(t,e){if(this.on(t,e)){const s=this.__emittersMap__.get(e);if(!s)return!1;s.isOnce=!0}else return!1;return!0}off(t,e){const s=this.__emitters__.get(t);if(!s)return!1;const i=this.__emittersMap__.get(e);return i?(this.__emittersMap__.delete(e),s.delete(i),s.size===0&&this.__emitters__.delete(t),!0):!1}offAll(t){const e=this.__emitters__.get(t);return e?(e.clear(),this.__emitters__.delete(t),!0):!1}clearEvents(){return this.__emitters__.clear(),!0}async emit(t,...e){const s=this.__emitters__.get(t);if(!!s)for(let i of s.values()){try{await i.function.apply(void 0,e)}catch(n){console.error(n)}i.isOnce&&this.off(t,i.function)}}}class l extends w{constructor(e){super();r(this,"main");r(this,"width",0);r(this,"height",0);r(this,"onWindowResizeListener",()=>{this.updateSize(),this.emit("resize")});r(this,"resizeObserver");this.main=e,this.updateSize(),l.setWindowResizeEmitter(this)}updateSize(){const{viewArea:e,canvas:s}=this.main,{offsetWidth:i,offsetHeight:n}=e;this.width=i,this.height=n,s.width=i,s.height=n,s.style.width=i+"px",s.style.height=n+"px"}static setWindowResizeEmitter(e){window.ResizeObserver?(e.resizeObserver=new ResizeObserver(s=>e.onWindowResizeListener()),e.resizeObserver.observe(e.main.viewArea)):window.addEventListener("resize",e.onWindowResizeListener)}static removeWindowResizeEmitter(e){e.resizeObserver?e.resizeObserver.disconnect():window.removeEventListener("resize",e.onWindowResizeListener)}onResize(e){return this.on("resize",e)}destroy(){return l.removeWindowResizeEmitter(this),this.clearEvents()}}class ${constructor(t,e){r(this,"main");this.main=t,this.main.debug.addFolder("Helper")(i=>{const{parameter:n}=e;i.add(n,"quantity").name("Quantity").min(1).max(50).step(1).onChange(a=>{}),i.addColor(n,"recedingColor").name("RecedingColor").onChange(a=>{}),i.add(n.recedingColor,"3").name("recedingColorAlpha").min(0).max(1).step(.01).onChange(a=>{n.recedingColor[3]=a}),i.add(n,"independentColor").name("independentColor").onChange(a=>{}),i.open()})}}const c={quantity:5,recedingColor:[0,0,0,1],hue:0,independentColor:!0,getRecedingColor(){return`rgba(${this.recedingColor.join(",")})`},getColor(){return`hsl(${this.hue}, 100%, 50%)`}};class F{constructor(t,e,s){r(this,"onDestroy",()=>{});r(this,"x");r(this,"y");r(this,"ctx");r(this,"size");r(this,"speedX");r(this,"speedY");r(this,"color");this.x=t,this.y=e,this.ctx=s,this.size=Math.random()*15+1,this.speedX=Math.random()*3-1.5,this.speedY=Math.random()*3-1.5,this.color=c.getColor()}update(){this.x+=this.speedX,this.y+=this.speedY,this.size>.2?this.size-=.1:this.destroy()}render(){const{ctx:t}=this;t.fillStyle=this.color,t.beginPath(),t.arc(this.x,this.y,this.size,0,Math.PI*2),t.fill()}destroy(){typeof this.onDestroy=="function"&&this.onDestroy()}}class k{constructor(t){r(this,"main");r(this,"guiHelper");r(this,"parameter",c);r(this,"controler",{x:NaN,y:NaN});r(this,"particlesList",new Set);this.main=t,this.setControls(),this.animate(),this.guiHelper=new $(this.main,this)}resize(){}update(){}setControls(){const{canvas:t}=this.main,e=(i,n)=>{this.controler.x=i,this.controler.y=n,this.createParticles(i,n)},s=i=>{e(i.layerX,i.layerY)};t.addEventListener("mousemove",s),this.main.onDestroyed(()=>t.removeEventListener("mousemove",s))}drawCircle(){const{ctx:t}=this.main,e=this.controler;t.fillStyle="blue",t.beginPath(),t.arc(e.x,e.y,50,0,Math.PI*2),t.fill()}createParticles(t,e){for(let s=0;s<c.quantity;s++){const i=new F(t,e,this.main.ctx);this.particlesList.add(i),i.onDestroy=()=>this.particlesList.delete(i)}}renderParticle(){const{ctx:t}=this.main;for(let e of this.particlesList){e.update(),e.render();for(let s of this.particlesList){if(e===s)continue;const i=e.x-s.x,n=e.y-s.y;Math.sqrt(i*i+n*n)<50&&(t.strokeStyle=e.color,t.lineWidth=e.size/3,t.beginPath(),t.moveTo(e.x,e.y),t.lineTo(s.x,s.y),t.stroke())}}}animate(){const{ctx:t}=this.main,e=this.main.sizes;c.hue+=.5,t.fillStyle=c.getRecedingColor(),t.fillRect(0,0,e.width,e.height),this.renderParticle(),window.requestAnimationFrame(()=>this.animate())}}class H extends w{constructor(e,s){super();r(this,"canvas");r(this,"ctx");r(this,"viewArea");r(this,"world");r(this,"sizes");r(this,"debug");this.canvas=e,this.viewArea=s,this.ctx=this.canvas.getContext("2d"),this.debug=new D(this),this.sizes=new l(this),this.world=new k(this)}resize(){}update(){}render(){}pausedRender(){}destroy(){this.emit("destroyed")}onDestroyed(e){return this.once("destroyed",e)}}const I=m({name:"View",setup(o){const t=f(),e=f();let s;return C(async()=>{const i=t.value,n=e.value;s=new H(i,n),s.render()}),P(()=>{s==null||s.destroy()}),(i,n)=>(u(),_("div",{class:"viewArea",ref_key:"viewArea",ref:e},[v("canvas",{class:"",ref_key:"canvas",ref:t},null,512)],512))}});var N=h(I,[["__scopeId","data-v-0948235e"],["__file","/Volumes/Work/l00 Studio/l00/source/root/particles/ParticlesTest-A/View.vue"]]);const q={class:"main"},G=m({name:"PreviewsList",setup(o){return(t,e)=>(u(),_("div",q,[d(V,null,{default:b(()=>[d(N)]),_:1})]))}});var X=h(G,[["__scopeId","data-v-b9deca8e"],["__file","/Volumes/Work/l00 Studio/l00/source/root/particles/PreviewsList.vue"]]);const Y=m({name:"index",setup(o){return(t,e)=>(u(),_(E,null,[d(A),d(X)],64))}});var B=h(Y,[["__file","/Volumes/Work/l00 Studio/l00/source/root/particles/index.vue"]]);const y=L(B);y.use(M);y.mount("#app");
