var Y=Object.defineProperty;var Q=(r,t,e)=>t in r?Y(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var i=(r,t,e)=>(Q(r,typeof t!="symbol"?t+"":t,e),e);import{d as N,h as M,i as A,l as W,o as T,b as S,e as B,s as x,w as P}from"./vendor-cabe9347.js";import{P as R}from"./Preview-fffd81b3.js";import{E as I}from"./EventEmitter-80978bd8.js";import{S as V}from"./Stats-c12fee77.js";import{D as H}from"./DatGui-ba968fee.js";import{a as m}from"./anime.es-826e4a6c.js";import{_ as z}from"./plugin-vue_export-helper-4223c0cf.js";class U{static adapt(t,e){Object.assign(t,e)}}const d=class{constructor(t,e){i(this,"main");i(this,"width",0);i(this,"height",0);i(this,"fit",d.Fit_None);this.main=t,this.update({fit:e!=null&&e.fit?e.fit:d.Fit_None}),d.resizeObserve(this)}static resizeObserve(t){const e=t.main;if(window.ResizeObserver){const s=new ResizeObserver(n=>t.update());s.observe(e.viewContainerDom),e.onDestroyed(()=>s.disconnect())}else{const s=()=>t.update();window.addEventListener("resize",s),e.onDestroyed(()=>window.removeEventListener("resize",s))}}update(t={}){let{width:e,height:s,fit:n}=t;const{viewContainerDom:h,canvasDom:o}=this.main;if(!h||!o)return;const p=(a,l)=>{this.width=a,this.height=l,o.width=a,o.height=l};this.fit===d.Fit_None?(e=e||this.main.viewContainerDom.offsetWidth,s=s||this.main.viewContainerDom.offsetHeight,p(e,s),o.style.width=e+"px",o.style.height=s+"px"):(this.width!==e||this.height!==s)&&e&&s&&(p(e,s),o.style.width="100%",o.style.height="100%"),n&&n!==this.fit&&d.fitMap.hasOwnProperty(n)&&(this.fit=n,o.style.objectFit=d.fitMap[this.fit]),this.main.emit(f.Event_Resize)}onResize(t){return this.main.on(f.Event_Resize,t)}};let w=d;i(w,"Fit_Contain",Symbol()),i(w,"Fit_Cover",Symbol()),i(w,"Fit_Fill",Symbol()),i(w,"Fit_None",Symbol()),i(w,"fitMap",{[d.Fit_Contain]:"contain",[d.Fit_Cover]:"cover",[d.Fit_Fill]:"fill",[d.Fit_None]:"none"});class J{constructor(t){i(this,"main");i(this,"time");i(this,"start");i(this,"current");i(this,"elapsed");i(this,"delta");i(this,"requestAnimationFrameID",0);i(this,"onTickLoopFunction",t=>{this.current=Date.now();const e=performance.now();this.delta=e-this.time,this.time=e,this.elapsed+=this.delta,this.main.emit(f.Event_Tick),this.currentTickLoopFunction&&(this.requestAnimationFrameID=window.requestAnimationFrame(this.currentTickLoopFunction))});i(this,"currentTickLoopFunction");i(this,"isTicking",!1);this.main=t,this.start=Date.now(),this.current=this.start,this.time=performance.now(),this.elapsed=0,this.delta=16}tick(){this.currentTickLoopFunction||(this.currentTickLoopFunction=this.main.params.helper.stats.enable?t=>{var e,s;(e=this.main.stats)==null||e.begin(),this.onTickLoopFunction(t),(s=this.main.stats)==null||s.end()}:this.onTickLoopFunction,this.isTicking||(this.isTicking=!0,this.time=performance.now()-1e3/60,this.currentTickLoopFunction(window.performance.now())))}paused(){this.isTicking&&(window.cancelAnimationFrame(this.requestAnimationFrameID),this.currentTickLoopFunction=void 0,this.isTicking=!1)}onTick(t){return this.main.on(f.Event_Tick,t)}}const k=class{constructor(t){i(this,"main");i(this,"target",{x:NaN,y:NaN});i(this,"clickControler",t=>{const e=t.layerX,s=t.layerY;this.main.emit(k.Event_Click,e,s)});this.main=t}onClick(t){if(!this.main.has(k.Event_Click)){const{canvasDom:e}=this.main;e.addEventListener("click",this.clickControler)}if(!this.main.has(k.Event_RemoveClickControlerOnDestroyed)){const{canvasDom:e}=this.main;this.main.on(k.Event_RemoveClickControlerOnDestroyed,()=>e.removeEventListener("click",this.clickControler))}return this.main.on(k.Event_Click,t)}offClick(){}};let _=k;i(_,"Event_Move",Symbol()),i(_,"Event_Click",Symbol()),i(_,"Event_RemoveClickControlerOnDestroyed",Symbol());class K{constructor(t){i(this,"main");i(this,"datGui");this.main=t,this.datGui=new H(this.main.viewContainerDom),this.main.onDestroyed(()=>this.datGui.destroy()),Promise.resolve().then(()=>this.init())}init(){const{particles:t}=this.main.params,e=this.datGui.ui.addFolder("Particles");e.open(),e.add(t.color,"randomIndex").name("RandomColorIndex")}}class Z{constructor(t,e){i(this,"Event_Destroy",Symbol());i(this,"main");i(this,"type","base");i(this,"x",NaN);i(this,"y",NaN);i(this,"xSpeed",0);i(this,"ySpeed",0);i(this,"xAccelerated",0);i(this,"yAccelerated",0);i(this,"size",NaN);i(this,"renderSize",NaN);i(this,"fill");i(this,"stroke");i(this,"opacity",1);i(this,"color","#fff");i(this,"colorHSL",[1,1,1]);i(this,"move",{outMode:null});i(this,"animation");this.main=t,U.adapt(this,e)}animate(t){t.targets=this,t.autoplay=!1,t.complete=()=>this.destroy(),this.animation=m(t)}update(){this.animation&&this.animation.tick(this.main.time.elapsed),this.render()}render(){const{ctx:t,params:e}=this.main,s=Math.PI*2,{x:n,y:h,size:o}=this;t.globalAlpha!==this.opacity&&(t.globalAlpha=this.opacity),t.beginPath(),t.arc(n,h,o,0,s),this.stroke&&(t.strokeStyle=this.stroke.color,t.lineWidth=this.stroke.width,t.stroke()),this.fill&&(t.fillStyle=this.fill.color,t.fill())}destroy(){this.main.emit(this.Event_Destroy)}onDestroy(t){this.main.once(this.Event_Destroy,t)}}class L extends Z{constructor(t,e){super(t,e),this.type="emit"}}class $ extends Set{constructor(e){super();i(this,"main");this.main=e}add(e){return super.add(e),this.main.render(),this}delete(e){const s=super.delete(e);return this.size===0&&this.main.paused(),s}}class tt{constructor(t){i(this,"main");i(this,"emitClickEffect",(t,e)=>{this.createEmitterParticles(t,e)});i(this,"particlesList");this.main=t,this.particlesList=new $(this.main),this.main.controler.onClick(this.emitClickEffect)}createEmitterParticles(t,e){const s=(c,D,q,G)=>{const j=Math.max(c-0,q-c),X=Math.max(D-0,G-D);return Math.sqrt(Math.pow(j,2)+Math.pow(X,2))},n=this.main.sizes,h=this.main.params.particles.color,o=h.value,p=h.next(),a=s(t,e,n.width,n.height),l=Math.min(200,n.width*.4,n.height*.4);(()=>{const c=new L(this.main,{x:t,y:e,size:0,fill:{color:p}});return c.animate({size:a,duration:Math.max(a/2,750),easing:"easeOutQuart"}),c.onDestroy(()=>{h.backgroundFill=p,this.particlesList.delete(c)}),this.particlesList.add(c),c})(),(()=>{const c=new L(this.main,{x:t,y:e,size:0,fill:{color:o},stroke:{width:3,color:o},opacity:1});return c.animate({size:l,opacity:0,duration:900,easing:"easeOutExpo"}),c.onDestroy(()=>{this.particlesList.delete(c)}),this.particlesList.add(c),c})();for(var b=0;b<32;b++){const c=new L(this.main,{x:t,y:e,size:m.random(24,48),fill:{color:o}});c.animate({x:t+m.random(l,-l),y:e+m.random(l*1.15,-l*1.15),size:0,easing:"easeOutExpo",duration:m.random(1e3,1300)}),c.onDestroy(()=>{this.particlesList.delete(c)}),this.particlesList.add(c)}}render(){for(let t of this.particlesList)t.update()}}class et{constructor(t){i(this,"main");i(this,"render",()=>{const{ctx:t,sizes:e,world:s,params:n}=this.main;t.fillStyle=n.particles.color.backgroundFill,t.fillRect(0,0,e.width,e.height),s.render()});this.main=t,this.main.time.onTick(this.render)}}const E=class extends I{constructor(e,s){super();i(this,"params",{helper:{stats:{enable:!0},gui:{enable:!0}},particles:{emitterNumber:{value:2},vanish:{speed:7},color:{backgroundFill:"#FF6138",value:"#FF6138",index:0,randomIndex:!1,list:["#FF6138","#FFBE53","#2980B9","#282741"],next(){const e=typeof this.index!="number"||Number.isNaN(this.index)?0:this.randomIndex?(s=>{do s=Math.floor(Math.random()*this.list.length);while(s===this.index);return s})(this.index):(this.index+1)%this.list.length;return this.index=e,this.value=this.list[e],this.value}},shape:{type:"circle",stroke:{width:0,color:"#000000"},polygon:{nb_sides:5},image:{src:"img/github.svg",width:100,height:100}}}});i(this,"time");i(this,"sizes");i(this,"renderer");i(this,"controler");i(this,"world");i(this,"viewContainerDom");i(this,"canvasDom",window.document.createElement("canvas"));i(this,"ctx",this.canvasDom.getContext("2d"));i(this,"stats");i(this,"particleHelper");this.viewContainerDom=e,this.viewContainerDom.appendChild(this.canvasDom),this.params.helper.stats.enable&&(this.stats=new V(e)),this.params.helper.gui.enable&&(this.particleHelper=new K(this)),this.time=new J(this),this.sizes=new w(this,{fit:w.Fit_None}),this.controler=new _(this),this.renderer=new et(this),this.world=new tt(this)}render(){this.time.tick()}paused(){this.time.paused()}onDestroyed(e){return this.once(E.Event_Destroyed,e)}destroy(){this.emit(E.Event_Destroyed)}};let f=E;i(f,"Event_Tick",Symbol()),i(f,"Event_Resize",Symbol()),i(f,"Event_Destroyed",Symbol());const it={class:"background"},st=N({name:"View",setup(r){const t=M();return A(()=>{const e=new f(t.value);e.world.createEmitterParticles(e.sizes.width/2,e.sizes.height/2),W(()=>e.destroy)}),(e,s)=>(T(),S("section",it,[B("div",{class:"viewContainer",ref_key:"viewDom",ref:t},null,512)]))}});var nt=z(st,[["__scopeId","data-v-1968e68c"],["__file","/Volumes/Work/l00 Studio/l00/source/src/magics-components/cartoon-bloom/Boom-A/View.vue"]]);class ot{static adapt(t,e){Object.assign(t,e)}}const u=class{constructor(t,e){i(this,"main");i(this,"width",0);i(this,"height",0);i(this,"fit",u.Fit_None);this.main=t,this.update({fit:e!=null&&e.fit?e.fit:u.Fit_None}),u.resizeObserve(this)}static resizeObserve(t){const e=t.main;if(window.ResizeObserver){const s=new ResizeObserver(n=>t.update());s.observe(e.viewContainerDom),e.onDestroyed(()=>s.disconnect())}else{const s=()=>t.update();window.addEventListener("resize",s),e.onDestroyed(()=>window.removeEventListener("resize",s))}}update(t={}){let{width:e,height:s,fit:n}=t;const{viewContainerDom:h,canvasDom:o}=this.main;if(!h||!o)return;const p=(a,l)=>{this.width=a,this.height=l,o.width=a,o.height=l};this.fit===u.Fit_None?(e=e||this.main.viewContainerDom.offsetWidth,s=s||this.main.viewContainerDom.offsetHeight,p(e,s),o.style.width=e+"px",o.style.height=s+"px"):(this.width!==e||this.height!==s)&&e&&s&&(p(e,s),o.style.width="100%",o.style.height="100%"),n&&n!==this.fit&&u.fitMap.hasOwnProperty(n)&&(this.fit=n,o.style.objectFit=u.fitMap[this.fit]),this.main.emit(v.Event_Resize)}onResize(t){return this.main.on(v.Event_Resize,t)}};let y=u;i(y,"Fit_Contain",Symbol()),i(y,"Fit_Cover",Symbol()),i(y,"Fit_Fill",Symbol()),i(y,"Fit_None",Symbol()),i(y,"fitMap",{[u.Fit_Contain]:"contain",[u.Fit_Cover]:"cover",[u.Fit_Fill]:"fill",[u.Fit_None]:"none"});class rt{constructor(t){i(this,"main");i(this,"time");i(this,"start");i(this,"current");i(this,"elapsed");i(this,"delta");i(this,"requestAnimationFrameID",0);i(this,"onTickLoopFunction",t=>{this.current=Date.now();const e=performance.now();this.delta=e-this.time,this.time=e,this.elapsed+=this.delta,this.main.emit(v.Event_Tick),this.currentTickLoopFunction&&(this.requestAnimationFrameID=window.requestAnimationFrame(this.currentTickLoopFunction))});i(this,"currentTickLoopFunction");i(this,"isTicking",!1);this.main=t,this.start=Date.now(),this.current=this.start,this.time=performance.now(),this.elapsed=0,this.delta=16}tick(){this.currentTickLoopFunction||(this.currentTickLoopFunction=this.main.params.helper.stats.enable?t=>{var e,s;(e=this.main.stats)==null||e.begin(),this.onTickLoopFunction(t),(s=this.main.stats)==null||s.end()}:this.onTickLoopFunction,this.isTicking||(this.isTicking=!0,this.time=performance.now()-1e3/60,this.currentTickLoopFunction(window.performance.now())))}paused(){this.isTicking&&(window.cancelAnimationFrame(this.requestAnimationFrameID),this.currentTickLoopFunction=void 0,this.isTicking=!1)}onTick(t){return this.main.on(v.Event_Tick,t)}}const g=class{constructor(t){i(this,"main");i(this,"target",{x:NaN,y:NaN});i(this,"clickControler",t=>{const e=t.layerX,s=t.layerY;this.main.emit(g.Event_Click,e,s)});this.main=t}onClick(t){if(!this.main.has(g.Event_Click)){const{canvasDom:e}=this.main;e.addEventListener("click",this.clickControler)}if(!this.main.has(g.Event_RemoveClickControlerOnDestroyed)){const{canvasDom:e}=this.main;this.main.on(g.Event_RemoveClickControlerOnDestroyed,()=>e.removeEventListener("click",this.clickControler))}return this.main.on(g.Event_Click,t)}offClick(){}};let F=g;i(F,"Event_Move",Symbol()),i(F,"Event_Click",Symbol()),i(F,"Event_RemoveClickControlerOnDestroyed",Symbol());class at{constructor(t){i(this,"main");i(this,"datGui");this.main=t,this.datGui=new H(this.main.viewContainerDom),this.main.onDestroyed(()=>this.datGui.destroy()),Promise.resolve().then(()=>this.init())}init(){this.main.params,this.datGui.ui.addFolder("Particles").open()}}class ct{constructor(t,e){i(this,"Event_Destroy",Symbol());i(this,"main");i(this,"type","base");i(this,"x",NaN);i(this,"y",NaN);i(this,"xSpeed",0);i(this,"ySpeed",0);i(this,"xAccelerated",0);i(this,"yAccelerated",0);i(this,"size",NaN);i(this,"renderSize",NaN);i(this,"fillStyle");i(this,"strokeStyle");i(this,"lineWidth",0);i(this,"alpha",1);i(this,"color","#fff");i(this,"colorHSL",[1,1,1]);i(this,"move",{outMode:null});i(this,"animation");this.main=t,ot.adapt(this,e)}animate(t){t.targets=this,t.autoplay=!1,t.complete=()=>{this.destroy()},this.animation=m(t)}update(){this.animation&&this.animation.tick(this.main.time.elapsed),this.render()}render(){const{ctx:t,params:e}=this.main,s=Math.PI*2,{x:n,y:h,size:o}=this;t.globalAlpha!==this.alpha&&(t.globalAlpha=this.alpha),t.beginPath(),t.arc(n,h,o,0,s),this.strokeStyle&&(t.strokeStyle=this.strokeStyle,t.lineWidth=this.lineWidth,t.stroke()),this.fillStyle&&(t.fillStyle=this.fillStyle,t.fill())}destroy(){this.main.emit(this.Event_Destroy)}onDestroy(t){this.main.once(this.Event_Destroy,t)}}class O extends ct{constructor(t,e){super(t,e),this.type="emit"}}class lt extends Set{constructor(e){super();i(this,"main");this.main=e}add(e){return super.add(e),this.main.render(),this}delete(e){const s=super.delete(e);return this.size===0&&this.main.paused(),s}}class ht{constructor(t){i(this,"main");i(this,"emitClickEffect",(t,e)=>{this.createEmitterParticles(t,e)});i(this,"particlesList");this.main=t,this.particlesList=new lt(this.main),this.main.controler.onClick(this.emitClickEffect)}createEmitterParticles(t,e){const s=this.main.sizes,n=this.main.params.particles.colors;Math.min(200,s.width*.4,s.height*.4);const h=()=>n.list[Math.floor(Math.random()*n.list.length)],o=(a,l)=>{var b=m.random(0,360)*Math.PI/180,c=m.random(50,180),D=[-1,1][m.random(0,1)]*c;return{x:a+D*Math.cos(b),y:l+D*Math.sin(b)}};(()=>{const a=new O(this.main,{x:t,y:e,size:0,strokeStyle:h(),lineWidth:12,alpha:.5});return a.animate({size:m.random(80,160),strokeStyle:"#fff",alpha:{value:0,easing:"linear"},lineWidth:.001,duration:m.random(600,800),easing:"easeOutExpo"}),a.onDestroy(()=>{this.particlesList.delete(a)}),this.particlesList.add(a),a})();for(var p=0;p<32;p++){const a=new O(this.main,{x:t,y:e,size:m.random(16,32),fillStyle:h()}),l=o(a.x,a.y);a.animate({x:l.x,y:l.y,size:0,easing:"easeOutExpo",duration:m.random(1e3,1300)}),a.onDestroy(()=>{this.particlesList.delete(a)}),this.particlesList.add(a)}}render(){for(let t of this.particlesList)t.update()}}class mt{constructor(t){i(this,"main");i(this,"render",()=>{const{ctx:t,sizes:e,world:s,params:n}=this.main;n.renderer.background.clear.enable?t.clearRect(0,0,e.width,e.height):(t.fillStyle=n.renderer.background.fill.color,t.fillRect(0,0,e.width,e.height)),s.render()});this.main=t,this.main.time.onTick(this.render)}}const C=class extends I{constructor(e,s){super();i(this,"params",{helper:{stats:{enable:!0},gui:{enable:!0}},particles:{emitterNumber:{value:2},vanish:{speed:7},colors:{backgroundFill:"#FF6138",value:"#FF6138",index:0,randomIndex:!1,list:["#FF1461","#18FF92","#5A87FF","#FBF38C"],next(){const e=typeof this.index!="number"||Number.isNaN(this.index)?0:this.randomIndex?(s=>{do s=Math.floor(Math.random()*this.list.length);while(s===this.index);return s})(this.index):(this.index+1)%this.list.length;return this.index=e,this.value=this.list[e],this.value}},shape:{type:"circle",stroke:{width:0,color:"#000000"},polygon:{nb_sides:5},image:{src:"img/github.svg",width:100,height:100}}},renderer:{background:{clear:{enable:!0},fill:{color:"rgba(0,0,0,0)"}}}});i(this,"time");i(this,"sizes");i(this,"renderer");i(this,"controler");i(this,"world");i(this,"viewContainerDom");i(this,"canvasDom",window.document.createElement("canvas"));i(this,"ctx",this.canvasDom.getContext("2d"));i(this,"stats");i(this,"particleHelper");this.viewContainerDom=e,this.viewContainerDom.appendChild(this.canvasDom),this.params.helper.stats.enable&&(this.stats=new V(e)),this.params.helper.gui.enable&&(this.particleHelper=new at(this)),this.time=new rt(this),this.sizes=new y(this,{fit:y.Fit_None}),this.controler=new F(this),this.renderer=new mt(this),this.world=new ht(this)}render(){this.time.tick()}paused(){this.time.paused()}onDestroyed(e){return this.once(C.Event_Destroyed,e)}destroy(){this.emit(C.Event_Destroyed)}};let v=C;i(v,"Event_Tick",Symbol()),i(v,"Event_Resize",Symbol()),i(v,"Event_Destroyed",Symbol());const dt={class:"background"},ut=N({name:"View",setup(r){const t=M();return A(()=>{const e=new v(t.value);e.world.createEmitterParticles(e.sizes.width/2,e.sizes.height/2),W(()=>e.destroy)}),(e,s)=>(T(),S("section",dt,[B("div",{class:"viewContainer",ref_key:"viewDom",ref:t},null,512)]))}});var pt=z(ut,[["__scopeId","data-v-0db257ab"],["__file","/Volumes/Work/l00 Studio/l00/source/src/magics-components/cartoon-bloom/Boom-B/View.vue"]]);const ft={class:"main"},vt=N({name:"index",setup(r){return(t,e)=>(T(),S("div",ft,[x(R,null,{default:P(()=>[x(pt)]),_:1}),x(R,null,{default:P(()=>[x(nt)]),_:1})]))}});var xt=z(vt,[["__file","/Volumes/Work/l00 Studio/l00/source/src/magics-components/cartoon-bloom/index.vue"]]);export{xt as default};
