var _=Object.defineProperty;var o=(i,t,e)=>t in i?_(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var f=(i,t,e)=>(o(i,typeof t!="symbol"?t+"":t,e),e);class m{constructor(t,e){f(this,"function");f(this,"isOnce");this.function=t,this.isOnce=e.isOnce?e.isOnce:!1}}class h{constructor(){f(this,"__emittersMap__",new WeakMap);f(this,"__emitters__",new Map)}on(t,e){if((typeof t=="symbol"||typeof t=="string"&&t!=="")&&typeof e=="function"){let s=this.__emitters__.get(t);if(s||(s=new Set,this.__emitters__.set(t,s)),this.__emittersMap__.has(e))return!1;{const r=new m(e,{isOnce:!1});this.__emittersMap__.set(e,r),s.add(r)}return!0}else return!1}has(t){if(typeof t=="symbol"||typeof t=="string"&&t!==""){let e=this.__emitters__.get(t);if(e)return e.size!==0}return!1}once(t,e){if(this.on(t,e)){const s=this.__emittersMap__.get(e);if(!s)return!1;s.isOnce=!0}else return!1;return!0}off(t,e){const s=this.__emitters__.get(t);if(!s)return!1;const r=this.__emittersMap__.get(e);return r?(this.__emittersMap__.delete(e),s.delete(r),s.size===0&&this.__emitters__.delete(t),!0):!1}offAll(t){const e=this.__emitters__.get(t);return e?(e.clear(),this.__emitters__.delete(t),!0):!1}clearEvents(){return this.__emitters__.clear(),!0}emit(t,...e){const s=this.__emitters__.get(t);if(!!s)for(let r of s){try{r.function.apply(void 0,e)}catch(n){console.error(n)}r.isOnce&&this.off(t,r.function)}}}export{h as E};
