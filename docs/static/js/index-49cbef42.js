var I=Object.defineProperty;var R=(r,t,e)=>t in r?I(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var l=(r,t,e)=>(R(r,typeof t!="symbol"?t+"":t,e),e);import{_ as f}from"./plugin-vue_export-helper-4223c0cf.js";import{d as v,c as T,o as p,a as A,w as $,b as w,e as i,n as x,u as c,t as g,f as _,T as D,p as F,g as C,r as L,h as m,i as O,j as k,k as P,l as S,m as B,q as V,s as y,F as H,v as W}from"./vendor-09eaf53f.js";import{_ as q}from"./preload-helper-33ac5944.js";import{T as G}from"./TopMenu-352eaf6b.js";class N{constructor(){l(this,"intersectionObserver");l(this,"map",new WeakMap);l(this,"renders",new Set);l(this,"onIntersecte",(t,e)=>{for(let s of t){const o=this.map.get(s.target);o&&(s.isIntersecting?o.render():o.pausedRender())}});window.IntersectionObserver&&(this.intersectionObserver=new window.IntersectionObserver(this.onIntersecte))}set(t,e){var s;this.renders.add(e),this.map.set(t,e),this.map.set(e,t),(s=this.intersectionObserver)==null||s.observe(t),e.onDestroyed(()=>this.delete(t,e))}delete(t,e){var o;const s=this.map.get(e);s&&((o=this.intersectionObserver)==null||o.unobserve(s)),this.map.delete(t),this.map.delete(s),this.map.delete(e),this.renders.delete(e)}destroy(){var t;(t=this.intersectionObserver)==null||t.disconnect()}}class z{constructor(t,e){l(this,"function");l(this,"isOnce");this.function=t,this.isOnce=e.isOnce?e.isOnce:!1}}class U{constructor(){l(this,"__emittersMap__",new WeakMap);l(this,"__emitters__",new Map)}on(t,e){if(typeof t!="string"||t===""||typeof e!="function")return!1;let s=this.__emitters__.get(t);if(s||(s=new Set,this.__emitters__.set(t,s)),this.__emittersMap__.has(e))return!1;{const o=new z(e,{isOnce:!1});this.__emittersMap__.set(e,o),s.add(o)}return!0}once(t,e){if(this.on(t,e)){const s=this.__emittersMap__.get(e);if(!s)return!1;s.isOnce=!0}else return!1;return!0}off(t,e){const s=this.__emitters__.get(t);if(!s)return!1;const o=this.__emittersMap__.get(e);return o?(this.__emittersMap__.delete(e),s.delete(o),s.size===0&&this.__emitters__.delete(t),!0):!1}offAll(t){const e=this.__emitters__.get(t);return e?(e.clear(),this.__emitters__.delete(t),!0):!1}clearEvents(){return this.__emitters__.clear(),!0}async emit(t,...e){const s=this.__emitters__.get(t);if(!!s)for(let o of s.values()){try{await o.function.apply(void 0,e)}catch(n){console.error(n)}o.isOnce&&this.off(t,o.function)}}}class j extends U{constructor(){super();l(this,"viewList",new Set);l(this,"loaded",0);l(this,"loadTotal",0)}add(e){this.viewList.has(e)||(this.viewList.add(e),e.resources.onProgress(()=>this.progress()),e.resources.onReady(()=>this.someReady()),e.onDestroyed(()=>this.viewList.delete(e)))}someReady(){for(let e of this.viewList)if(!e.resources.isReady)return;this.emit("ready")}onReady(e){return this.once("ready",e)}progress(){let e=0,s=0;this.viewList.forEach(o=>{e+=o.resources.loaded,s+=o.resources.loadTotal}),this.loaded=e,this.loadTotal=s}destroy(){}}const Y=r=>(F("data-v-9fe2f632"),r=r(),C(),r),J={key:0,class:"loader"},K={class:"container"},Q=Y(()=>i("div",{class:"text"},[i("span",null,"Hi\uFF0C\u6211\u6765\u4E86\uFF0C\u7B49\u7B49")],-1)),X={class:"percentage"},Z=v({name:"Section-FirstLoad",props:{loaded:{type:Number,required:!0},loadTotal:{type:Number,required:!0},progress:{type:Number,required:!0},isLoading:{type:Boolean,required:!0}},emits:["onAfterLeave"],setup(r){const t=r,e=T(()=>`${t.progress*100}%`);return(s,o)=>(p(),A(D,{name:"fade",onAfterLeave:o[0]||(o[0]=n=>s.$emit("onAfterLeave",n))},{default:$(()=>[r.isLoading?(p(),w("section",J,[i("div",K,[Q,i("div",{class:"progress",style:x({width:c(e)})},null,4),i("div",X,[i("span",null,g(t.loaded)+"/"+g(t.loadTotal),1)])])])):_("v-if",!0)]),_:1}))}});var ee=f(Z,[["__scopeId","data-v-9fe2f632"],["__file","/Volumes/Work/l00 Studio/l00/source/root/home/components/Section-FirstLoad.vue"]]),te="/l00/static/mp3/And So It Begins - Brief-82d07386.mp3";const b=r=>(F("data-v-5a0a57b9"),r=r(),C(),r),se={class:"container"},oe=b(()=>i("span",{style:{"--i":"1"}},null,-1)),re=b(()=>i("span",{style:{"--i":"2"}},null,-1)),ne=b(()=>i("span",{style:{"--i":"3"}},null,-1)),ie=[oe,re,ne],ae=["src"],le=v({name:"Section-BGM",props:{isReady:{type:Boolean,required:!0}},setup(r){const t=r,e=L({url:T(()=>t.isReady?te:""),isPlay:!1,isCanplay:!1}),s=m();window.testaudio=s,window.testbgm=e;const o=()=>{var a;P.fromTo(s.value,{volume:0},{volume:.5,duration:4,ease:"sine.out"}),(a=s.value)==null||a.play(),e.isPlay=!0},n=()=>{var a;(a=s.value)==null||a.pause(),e.isPlay=!1},d=()=>{e.isPlay?n():o()},u=()=>{const a=()=>{e.isCanplay&&(o(),window.removeEventListener("click",a))};window.addEventListener("click",a)};return O(()=>u()),(a,h)=>(p(),w("section",se,[i("div",{class:k(["player",{play:e.isPlay}]),onClick:d},ie,2),i("audio",{src:e.url,ref_key:"audio",ref:s,loop:"true",onCanplay:h[0]||(h[0]=M=>e.isCanplay=!0)},null,40,ae)]))}});var de=f(le,[["__scopeId","data-v-5a0a57b9"],["__file","/Volumes/Work/l00 Studio/l00/source/root/home/components/Section-BGM.vue"]]);const ue={class:"container"},ce=v({name:"Section-Debug",props:{rendersAreaMap:{type:null,required:!0}},setup(r){const t=r,e=t.rendersAreaMap,s=L({playing:0,total:0}),o=()=>{const n=[...e.renders].map(d=>({render:d,isPlaying:d.time.isTicking}));console.log(n),s.playing=n.reduce((d,u)=>d+(u.isPlaying?1:0),0),s.total=n.length};return window.rendersAreaMap=t.rendersAreaMap,window.checkRendersAreaMap=o,(n,d)=>(p(),w("section",ue,[i("div",{class:"rendersAreaMapSummary",onClick:o}," \u6B63\u5728\u6E32\u67D3\u533A\u57DF: "+g(s.playing)+"/"+g(s.total),1)]))}});var _e=f(ce,[["__scopeId","data-v-24d70584"],["__file","/Volumes/Work/l00 Studio/l00/source/root/home/components/Section-Debug.vue"]]);const pe=v({name:"l00-Home",setup(r){const t=m(0),e=()=>{const M=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop,E=document.documentElement.clientHeight||document.body.clientHeight;t.value=M+E/2};O(()=>{window.addEventListener("scroll",e),e()}),S(()=>{window.removeEventListener("scroll",e)});let s=m(!1),o=m(!0);const n=L(new j);n.onReady(()=>setTimeout(()=>o.value=!1,2500)),S(()=>n.destroy()),B("loadingManager",n);const d=()=>s.value=!0,u=new N;S(()=>u.destroy()),B("rendersAreaMap",u);const a=m(window.location.hash.includes("debug")),h=V(()=>q(()=>import("./l00-Home-Main-a918cf4b.js"),["static/js/l00-Home-Main-a918cf4b.js","static/css/l00-Home-Main-ca854c0f.css","static/js/vendor-09eaf53f.js","static/js/OrbitControls-f9727bec.js","static/js/dat.gui.module-45c8a01b.js","static/js/FontLoader-e4f92b51.js","static/js/plugin-vue_export-helper-4223c0cf.js","static/js/effectsList-9380de74.js","static/js/preload-helper-33ac5944.js","static/js/ProjectInfo-7c1d079e.js","static/js/graphicsList-d0599776.js","static/js/index-50deada7.js","static/js/helvetiker_regular.typeface-6970b3ef.js","static/js/GammaCorrectionShader-98453a89.js","static/js/UnrealBloomPass-951de12e.js","static/js/TopMenu-352eaf6b.js","static/css/TopMenu-c80ebc82.css"]));return(M,E)=>(p(),w(H,null,[_(" \u9876\u90E8\u5BFC\u822A\u680F "),y(G,{style:x({zIndex:c(s)?"1":"0"})},null,8,["style"]),_(" \u52A0\u8F7D\u73AF\u8282 "),y(ee,{loaded:n.loaded,loadTotal:n.loadTotal,progress:n.loaded/n.loadTotal,isLoading:c(o),onOnAfterLeave:d},null,8,["loaded","loadTotal","progress","isLoading"]),_(" \u6B63\u5F0F\u5185\u5BB9 "),i("div",{class:k({debug:a.value,loading:!c(s)})},[y(c(h),{scrollMidline:t.value},null,8,["scrollMidline"])],2),_(" \u80CC\u666F\u97F3\u4E50 "),y(de,{isReady:c(s)},null,8,["isReady"]),_(" debug\u754C\u9762 "),a.value?(p(),A(_e,{key:0,rendersAreaMap:c(u)},null,8,["rendersAreaMap"])):_("v-if",!0)],64))}});var me=f(pe,[["__scopeId","data-v-09bb0352"],["__file","/Volumes/Work/l00 Studio/l00/source/root/home/l00-Home.vue"]]);const fe=v({name:"index",setup(r){return(t,e)=>(p(),A(me))}});var ve=f(fe,[["__file","/Volumes/Work/l00 Studio/l00/source/root/home/index.vue"]]);W(ve).mount("#app");export{U as E};
