var d=Object.defineProperty;var p=(i,t,s)=>t in i?d(i,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[t]=s;var e=(i,t,s)=>(p(i,typeof t!="symbol"?t+"":t,s),s);import{d as l,r as a,w as u,j as w,o as m,c as x,a as h}from"./vendor-3967ae7f.js";import{P as g,O as f,W as v,s as L,C as z,a as _,D as M,M as R,B as b,b as y,T as j,c as C,S as E}from"./OrbitControls-ce38456d.js";import{E as r}from"./EventEmitter-f1a40125.js";import{G as S}from"./GLTFLoader-ccdc043c.js";import{_ as T}from"./plugin-vue_export-helper-4223c0cf.js";class k extends r{constructor(){super();e(this,"width",window.innerWidth);e(this,"height",window.innerHeight);e(this,"pixelRatio",Math.min(window.devicePixelRatio,2));window.addEventListener("resize",()=>{this.width=window.innerWidth,this.height=window.innerHeight,this.pixelRatio=Math.min(window.devicePixelRatio,2),this.emit("resize")})}}class P extends r{constructor(){super();e(this,"start");e(this,"current");e(this,"elapsed");e(this,"delta");this.start=Date.now(),this.current=this.start,this.elapsed=0,this.delta=16}tick(){const s=Date.now();this.delta=s-this.current,this.current=s,this.elapsed=this.current-this.start,this.emit("tick"),window.requestAnimationFrame(()=>{this.tick()})}}class B{constructor(t){e(this,"experience");e(this,"sizes");e(this,"scence");e(this,"canvas");e(this,"instance");e(this,"controls");this.experience=t,this.sizes=this.experience.sizes,this.scence=this.experience.scence,this.canvas=this.experience.canvas,this.setInstance(),this.setOrbitControls()}setInstance(){this.instance=new g(35,this.sizes.width/this.sizes.height,.1,100),this.instance.position.set(6,4,8),this.scence.add(this.instance)}setOrbitControls(){this.controls=new f(this.instance,this.canvas),this.controls.enableDamping=!0}resize(){this.instance.aspect=this.sizes.width/this.sizes.height,this.instance.updateProjectionMatrix()}update(){this.controls.update()}}class U{constructor(t){e(this,"experience");e(this,"canvas");e(this,"sizes");e(this,"scence");e(this,"camera");e(this,"instance");this.experience=t,this.canvas=this.experience.canvas,this.sizes=this.experience.sizes,this.scence=this.experience.scence,this.camera=this.experience.camera,this.setInstance()}setInstance(){this.instance=new v({canvas:this.canvas,antialias:!0}),this.instance.physicallyCorrectLights=!0,this.instance.outputEncoding=L,this.instance.toneMapping=z,this.instance.toneMappingExposure=1.75,this.instance.shadowMap.enabled=!0,this.instance.shadowMap.type=_,this.instance.setClearColor("#211d20"),this.instance.setSize(this.sizes.width,this.sizes.height),this.instance.setPixelRatio(this.sizes.pixelRatio)}resize(){this.instance.setSize(this.sizes.width,this.sizes.height),this.instance.setPixelRatio(this.sizes.pixelRatio)}update(){this.instance.render(this.scence,this.camera.instance)}}class W{constructor(t){e(this,"experience");e(this,"scence");e(this,"sunLight");this.experience=t,this.scence=this.experience.scence,this.setSunLight(),this.setEnvironmentMap()}setSunLight(){this.sunLight=new M("#ffffff",4),this.sunLight.castShadow=!0,this.sunLight.shadow.camera.far=15,this.sunLight.shadow.mapSize.set(1024,1024),this.sunLight.shadow.normalBias=.05,this.sunLight.position.set(3.5,2,-1.25),this.scence.add(this.sunLight)}setEnvironmentMap(){}}class D{constructor(t){e(this,"experience");e(this,"scence");e(this,"environment");e(this,"resources");this.experience=t,this.scence=this.experience.scence,this.resources=this.experience.resources;const s=new R(new b(1,1,1),new y);this.scence.add(s),this.resources.on("ready",()=>{this.environment=new W(this.experience)})}}class G extends r{constructor(s){super();e(this,"sources");e(this,"item");e(this,"toLoad");e(this,"loaded");e(this,"loaders",{gltfLoader:new S,textureLoader:new j,cubeTextureLoader:new C});this.sources=s,this.item={},this.toLoad=this.sources.length,this.loaded=0,this.startLoading()}startLoading(){for(const s of this.sources)s.type==="gltfModel"?this.loaders.gltfLoader.load(s.path,n=>{this.sourceLoaded(s,n)}):s.type==="texture"?this.loaders.gltfLoader.load(s.path,n=>{this.sourceLoaded(s,n)}):s.type==="cubeTexture"&&this.loaders.cubeTextureLoader.load(s.path,n=>{this.sourceLoaded(s,n)})}sourceLoaded(s,n){this.item[s.name]=n,this.loaded++,this.loaded===this.toLoad&&this.emit("ready")}}var I=[{name:"environmentMapTexture",type:"cubeTexture",path:[new URL("/l00/static/jpg/px-a0e41bf9.jpg?url",self.location).href,new URL("/l00/static/jpg/nx-57f73ba7.jpg?url",self.location).href,new URL("/l00/static/jpg/py-7322f97e.jpg?url",self.location).href,new URL("/l00/static/jpg/ny-d209a134.jpg?url",self.location).href,new URL("/l00/static/jpg/pz-b0eb9498.jpg?url",self.location).href,new URL("/l00/static/jpg/nz-fc946930.jpg?url",self.location).href]}];class O{constructor(t){e(this,"canvas");e(this,"sizes");e(this,"time");e(this,"scence");e(this,"resources");e(this,"camera");e(this,"renderer");e(this,"world");this.canvas=t,this.sizes=new k,this.time=new P,this.scence=new E,this.resources=new G(I),this.camera=new B(this),this.renderer=new U(this),this.world=new D(this),this.sizes.on("resize",()=>this.resize()),this.time.on("tick",()=>this.update())}resize(){this.camera.resize(),this.renderer.resize()}update(){this.camera.update(),this.renderer.update()}render(){this.time.tick()}}const F=l({name:"index",setup(i){const t=a(),s=a(),n=a();let c;return u(()=>{}),w(()=>{const o=t.value;n.value,c=new O(o),c.render()}),(o,H)=>(m(),x("div",{class:"viewraper",ref_key:"viewraper",ref:n},[h("canvas",{ref_key:"canvas",ref:t},null,512),h("div",{guiwrap:"",ref_key:"guiwrap",ref:s},null,512)],512))}});var Q=T(F,[["__scopeId","data-v-25e26666"],["__file","/Volumes/Work/l00 Studio/l00/source/src/graphics-components/brunosimon-code-structuring/index.vue"]]);export{Q as default};
