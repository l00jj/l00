var v=Object.defineProperty;var w=(o,t,e)=>t in o?v(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var s=(o,t,e)=>(w(o,typeof t!="symbol"?t+"":t,e),e);import{d as y,r as p,j as z,C as b,o as L,c as M,a as m,K as T,p as A,e as G}from"./vendor-9f0bb9fc.js";import{P as S,O as E,W as F,s as x,C as k,a as _,D as R,M as c,b as D,A as C,E as P,G as g,c as f,T as H,d as W,e as l,f as I,g as O,h as N,i as j,j as B,S as U}from"./dat.gui.module-3ed960a2.js";import{E as u}from"./ProjectsRouter-09b8c1b1.js";import{g as h}from"./index-6d58611a.js";import{F as V}from"./FontLoader-446c44a8.js";import{_ as $}from"./plugin-vue_export-helper-4223c0cf.js";class q extends u{constructor(e){super();s(this,"viewArea");s(this,"width",0);s(this,"height",0);s(this,"pixelRatio",0);s(this,"onWindowResizeListener",()=>{this.updateSize(),this.emit("resize")});this.viewArea=e,this.updateSize(),this.setWindowResizeEmitter()}updateSize(){this.width=this.viewArea.offsetWidth,this.height=this.viewArea.offsetHeight,this.pixelRatio=Math.min(window.devicePixelRatio,2)}setWindowResizeEmitter(){window.addEventListener("resize",this.onWindowResizeListener)}removeWindowResizeEmitter(){window.removeEventListener("resize",this.onWindowResizeListener)}onResize(e){return this.on("resize",e)}destroy(){return this.removeWindowResizeEmitter(),this.clearEvents()}}class J extends u{constructor(){super();s(this,"start");s(this,"current");s(this,"elapsed");s(this,"delta");s(this,"onTickLoopFunction",()=>{const e=Date.now();this.delta=e-this.current,this.current=e,this.elapsed=this.current-this.start,this.emit("tick"),window.requestAnimationFrame(this.currentTickLoopFunction)});s(this,"currentTickLoopFunction",()=>{});this.start=Date.now(),this.current=this.start,this.elapsed=0,this.delta=16}tick(){this.currentTickLoopFunction!==this.onTickLoopFunction&&(this.currentTickLoopFunction=this.onTickLoopFunction,this.currentTickLoopFunction())}onTick(e){return this.on("tick",e)}destroy(){return this.currentTickLoopFunction=()=>{},this.clearEvents()}}class K{constructor(t){s(this,"experience");s(this,"sizes");s(this,"scene");s(this,"canvas");s(this,"instance");s(this,"controls");this.experience=t,this.sizes=this.experience.sizes,this.scene=this.experience.scene,this.canvas=this.experience.canvas,this.setInstance(),this.setOrbitControls()}setInstance(){this.instance=new S(75,this.sizes.width/this.sizes.height,.1,100),this.instance.position.set(0,-1.5,4),this.instance.lookAt(0,0,0),this.scene.add(this.instance)}setOrbitControls(){this.controls=new E(this.instance,this.canvas),this.controls.enableDamping=!0}resize(){this.instance.aspect=this.sizes.width/this.sizes.height,this.instance.updateProjectionMatrix()}update(){this.controls.update()}}class X{constructor(t){s(this,"experience");s(this,"canvas");s(this,"sizes");s(this,"scene");s(this,"camera");s(this,"instance");this.experience=t,this.canvas=this.experience.canvas,this.sizes=this.experience.sizes,this.scene=this.experience.scene,this.camera=this.experience.camera,this.setInstance()}setInstance(){this.instance=new F({canvas:this.canvas,antialias:!0,alpha:!0}),this.instance.physicallyCorrectLights=!0,this.instance.outputEncoding=x,this.instance.toneMapping=k,this.instance.toneMappingExposure=1.75,this.instance.shadowMap.enabled=!0,this.instance.shadowMap.type=_,this.instance.setSize(this.sizes.width,this.sizes.height),this.instance.setPixelRatio(this.sizes.pixelRatio)}resize(){this.instance.setSize(this.sizes.width,this.sizes.height),this.instance.setPixelRatio(this.sizes.pixelRatio)}update(){this.instance.render(this.scene,this.camera.instance)}}class Y{constructor(t){s(this,"experience");s(this,"scene");s(this,"sunLight");s(this,"resources");s(this,"debug");s(this,"debugFolder");s(this,"environmentMap");var e;this.experience=t,this.scene=this.experience.scene,this.resources=this.experience.resources,this.debug=this.experience.debug,this.debug.active&&(this.debugFolder=(e=this.debug.ui)==null?void 0:e.addFolder("environment"))}setSunLight(){var t,e,i,n;this.sunLight=new R("#ffffff",4),this.sunLight.castShadow=!0,this.sunLight.shadow.camera.far=15,this.sunLight.shadow.mapSize.set(1024,1024),this.sunLight.shadow.normalBias=.05,this.sunLight.position.set(3.5,2,-1.25),this.scene.add(this.sunLight),this.debug.active&&((t=this.debugFolder)==null||t.add(this.sunLight,"intensity").name("sunLightIntensity").min(0).max(10).step(.001),(e=this.debugFolder)==null||e.add(this.sunLight.position,"x").name("sunLightX").min(-5).max(5).step(.001),(i=this.debugFolder)==null||i.add(this.sunLight.position,"y").name("sunLightY").min(-5).max(5).step(.001),(n=this.debugFolder)==null||n.add(this.sunLight.position,"z").name("sunLightZ").min(-5).max(5).step(.001))}setEnvironmentMap(){var t;this.environmentMap={},this.environmentMap.intensity=.4,this.environmentMap.texture=this.resources.items.environmentMapTexture,this.environmentMap.texture.encoding=x,this.scene.environment=this.environmentMap.texture,this.environmentMap.updateMaterials=()=>{this.scene.traverse(e=>{e instanceof c&&e.material instanceof D&&(e.material.envMap=this.environmentMap.texture,e.material.envMapIntensity=this.environmentMap.intensity,e.material.needsUpdate=!0)})},this.environmentMap.updateMaterials(),this.debug.active&&((t=this.debugFolder)==null||t.add(this.environmentMap,"intensity").name("envMapIntensity").min(0).max(4).step(.001).onChange(()=>{this.environmentMap.updateMaterials()}))}}class Z{constructor(t){s(this,"experience");s(this,"scene");s(this,"debug");s(this,"debugFolder");s(this,"isShowAxesHelper",!0);s(this,"axesHelper");var e,i;this.experience=t,this.scene=this.experience.scene,this.debug=this.experience.debug,this.debug.active&&(this.debugFolder=(e=this.debug.ui)==null?void 0:e.addFolder("AxesHelper"),(i=this.debugFolder)==null||i.open(),this.setAxesHelper())}setAxesHelper(){var t;this.axesHelper=new C(1),this.toggleAxesHelper(),(t=this.debugFolder)==null||t.add(this,"isShowAxesHelper").onChange(e=>{this.toggleAxesHelper()})}toggleAxesHelper(t){(typeof t=="boolean"?t:this.isShowAxesHelper)?this.scene.add(this.axesHelper):this.scene.remove(this.axesHelper)}}class d extends P{constructor(t,e={}){const i=e.font;if(i===void 0)super();else{const n=i.generateShapes(t,e.size);e.depth=e.height!==void 0?e.height:50,e.bevelThickness===void 0&&(e.bevelThickness=10),e.bevelSize===void 0&&(e.bevelSize=8),e.bevelEnabled===void 0&&(e.bevelEnabled=!1),super(n,e)}this.type="TextGeometry"}}class Q{constructor(t){s(this,"textGroup");s(this,"experience");s(this,"sizes");s(this,"scene");s(this,"environment");s(this,"resource");s(this,"debug");s(this,"debugFolder");s(this,"material");s(this,"aspect",NaN);this.textGroup=new g,this.experience=t,this.sizes=t.sizes,this.scene=this.experience.scene,this.debug=this.experience.debug,this.debug.active,this.resource=this.experience.resources.items.font,this.setMaterial(),this.setText(),this.scene.add(this.textGroup)}setMaterial(){this.material=new f}updateOrientation(){const t=this.sizes.width/this.sizes.height,e=t>1?1:-1,i=Number.isNaN(this.aspect)?NaN:this.aspect>1?1:-1;return e!==i?(this.aspect=t,!0):!1}setText(){if(!this.updateOrientation())return;const t=this.material,e={font:this.resource,size:.5,height:.2,curveSegments:5,bevelEnabled:!0,bevelThickness:.03,bevelSize:.02,bevelOffset:0,bevelSegments:4};if(this.textGroup.clear(),this.aspect>1){const i=new d("Welcome to l00 studio",e),n=new c(i,t);i.center(),this.textGroup.add(n)}else{const i=new d("Welcome To",e),n=new c(i,t);i.center(),i.translate(0,.4,0);const r=new d("l00 Studio",e),a=new c(r,t);r.center(),r.translate(0,-.4,0),this.textGroup.add(n,a)}}resize(){this.setText()}update(){}}class ee{constructor(t){s(this,"experience");s(this,"scene");s(this,"environment");s(this,"resources");s(this,"geometryRatio",27);s(this,"toruGeometry");s(this,"coneGeometry");s(this,"material");s(this,"mesh");s(this,"meshsGroup");s(this,"playAnimationTime",-1);s(this,"animationDuration",2.5);s(this,"animationDelay",4);this.experience=t,this.scene=this.experience.scene,this.resources=this.experience.resources,this.setGeometry(),this.setMaterial(),this.setMesh()}setGeometry(){this.toruGeometry=new H(.3,.2,20,45),this.coneGeometry=new W(.4,.6,3)}setMaterial(){this.material=new f}setMesh(){this.meshsGroup=new g,this.scene.add(this.meshsGroup),Array(300).fill(0).map((t,e)=>{const i=new c(this.toruGeometry,this.material),{position:n,rotation:r,scale:a}=this.random();i.position.set(n.x,n.y,n.z),i.rotation.set(r.x,r.y,r.z),i.scale.set(a,a,a),this.meshsGroup.add(i)}),Array(300).fill(0).map((t,e)=>{const i=new c(this.coneGeometry,this.material),{position:n,rotation:r,scale:a}=this.random();i.position.set(n.x,n.y,n.z),i.rotation.set(r.x,r.y,r.z),i.scale.set(a,a,a),this.meshsGroup.add(i)})}random(){const t=this.geometryRatio;return{position:{x:(Math.random()-.5)*t,y:(Math.random()-.3)*t,z:(Math.random()-.8)*t},rotation:{x:Math.random()*Math.PI,y:Math.random()*Math.PI,z:Math.random()*Math.PI},scale:Math.random()}}playAnimation(){if(this.experience.isPlayAnimation){const t=Math.floor(this.experience.time.elapsed/1e3/this.animationDelay);t>this.playAnimationTime&&(this.playAnimationTime=t,this.animation())}}animation(){const t=this.animationDuration;this.meshsGroup.traverseVisible(e=>{if(!(e instanceof c))return;const{position:i,rotation:n,scale:r}=this.random();h.to(e.position,{duration:t,x:i.x}),h.to(e.position,{duration:t,y:i.y}),h.to(e.position,{duration:t,z:i.z}),h.to(e.rotation,{duration:t,x:n.x}),h.to(e.rotation,{duration:t,y:n.y}),h.to(e.rotation,{duration:t,z:n.z}),h.to(e.scale,{duration:t,x:r}),h.to(e.scale,{duration:t,y:r}),h.to(e.scale,{duration:t,z:r})})}update(){this.experience.isPlayAnimation&&this.playAnimation()}}class te{constructor(t){s(this,"experience");s(this,"scene");s(this,"environment");s(this,"resources");s(this,"axesHelper");s(this,"text");s(this,"geometrys");this.experience=t,this.scene=this.experience.scene,this.resources=this.experience.resources,this.resources.on("ready",()=>{this.text=new Q(this.experience),this.geometrys=new ee(this.experience),this.environment=new Y(this.experience),this.axesHelper=new Z(this.experience)})}resize(){var t;this.text&&((t=this.text)==null||t.resize())}update(){var t;(t=this.geometrys)==null||t.update()}}class se extends u{constructor(e){super();s(this,"sources");s(this,"items");s(this,"toLoad");s(this,"loaded");s(this,"loaders",{gltfLoader:new l,gltfDracoLoader:new l().setDRACOLoader(new I().setDecoderPath(new O("/assets/draco/").url)),textureLoader:new N,cubeTextureLoader:new j,fontLoader:new V});this.sources=e,this.items={},this.toLoad=this.sources.length,this.loaded=0,this.startLoading()}startLoading(){for(const e of this.sources)e.type==="gltfModel"?this.loaders.gltfLoader.load(e.path,i=>{this.sourceLoaded(e,i)}):e.type==="gltfDracoModel"?this.loaders.gltfDracoLoader.load(e.path,i=>{this.sourceLoaded(e,i)}):e.type==="texture"?this.loaders.textureLoader.load(e.path,i=>{this.sourceLoaded(e,i)}):e.type==="cubeTexture"?this.loaders.cubeTextureLoader.load(e.path,i=>{this.sourceLoaded(e,i)}):e.type==="fontJSON"&&this.loaders.fontLoader.load(e.path,i=>{this.sourceLoaded(e,i)})}sourceLoaded(e,i){this.items[e.name]=i,this.loaded++,this.loaded===this.toLoad&&this.emit("ready")}}class ie{constructor(t){s(this,"experience");s(this,"active",!1);s(this,"ui");this.experience=t,window.location.hash.includes("debug")&&this.toActive()}toActive(){this.active=!0,this.ui=new B,this.fixGui()}fixGui(){var i;const t=this.experience.viewArea,e=(i=this.ui)==null?void 0:i.domElement.parentElement;t.appendChild(e),e.style.position="absolute"}toWindowTest(){window.testExperience=this.experience}destroy(){var t;(t=this.ui)==null||t.destroy(),delete window.testExperience}}var ne="/l00/static/json/helvetiker_regular.typeface-d5c54676.json",oe=[{name:"font",type:"fontJSON",path:ne}];class re{constructor(t,e){s(this,"canvas");s(this,"viewArea");s(this,"sizes");s(this,"time");s(this,"scene");s(this,"resources");s(this,"camera");s(this,"renderer");s(this,"world");s(this,"isPlayAnimation",!0);s(this,"debug");this.canvas=t,this.viewArea=e,this.sizes=new q(e),this.time=new J,this.scene=new U,this.resources=new se(oe),this.camera=new K(this),this.renderer=new X(this),this.world=new te(this),this.debug=new ie(this),this.sizes.onResize(()=>this.resize()),this.time.onTick(()=>this.update())}resize(){this.camera.resize(),this.world.resize(),this.renderer.resize()}update(){this.camera.update(),this.world.update(),this.renderer.update()}render(){this.time.tick()}destroy(){this.sizes.destroy(),this.time.destroy(),this.scene.traverse(t=>{if(t instanceof c){t.geometry.dispose();for(const e in t.material){const i=t.material[e];i&&typeof i.dispose=="function"&&i.dispose()}}}),this.camera.controls.dispose(),this.renderer.instance.dispose(),this.debug.destroy()}}const ae=o=>(A("data-v-7c0fcf8f"),o=o(),G(),o),he=ae(()=>m("div",{class:"background"},null,-1)),ce=y({name:"l00-Simple3DText",props:{onMounted:{type:Function,required:!1}},setup(o){const t=o,e=p(),i=p();let n;return z(async()=>{const r=e.value,a=i.value;n=new re(r,a),t.onMounted&&typeof t.onMounted=="function"&&await t.onMounted(n),n.render()}),b(()=>{n==null||n.destroy()}),(r,a)=>(L(),M("section",T(r.$attrs,{ref_key:"viewArea",ref:i}),[he,m("canvas",{class:"",ref_key:"canvas",ref:e},null,512)],16))}});var fe=$(ce,[["__scopeId","data-v-7c0fcf8f"],["__file","/Volumes/Work/l00 Studio/l00/source/src/graphics-components/simple-3d-text/l00-Simple3DText.vue"]]);export{fe as S};
