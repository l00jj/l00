var Me=Object.defineProperty;var Ce=(a,e,t)=>e in a?Me(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var s=(a,e,t)=>(Ce(a,typeof e!="symbol"?e+"":e,t),t);import{k as u,d as y,K as L,h as w,i as z,l as b,M as ue,o as g,b as f,e as r,C as me,F as I,c as O,r as B,s as v,w as H,N as re,O as oe,u as _,T as he,p as G,g as W,E as R,x as pe,D as Le,n as ce,j as ze}from"./vendor-7f61e06f.js";import{G as T,L as U,a as A,D as V,P as j,T as q,C as Y,b as Z,O as J,V as M,W as X,s as S,A as F,c as ge,N as $,d as K,R as Q,e as ee,f as te,M as p,g as se,h as ie,i as be,j as Re,k as Te,l as Ae,S as ne,m as fe,n as we,o as Se,p as De,q as Pe,r as Ee,t as de,u as ke,v as He}from"./OrbitControls-67945ad9.js";import{E as D}from"./index-2d6bd065.js";import{F as ae}from"./FontLoader-6a376915.js";import{_ as x}from"./plugin-vue_export-helper-4223c0cf.js";import{l as Fe}from"./effectsList-8d5b6928.js";import{l as $e}from"./graphicsList-9024d8dd.js";import{T as N,h as Ie}from"./helvetiker_regular.typeface-dc8831a4.js";import{E as Ge,R as We,S as Ne,G as Oe,a as Be}from"./GammaCorrectionShader-0f916bc8.js";import{G as Ue,U as Ve}from"./UnrealBloomPass-43a74027.js";import"./preload-helper-33ac5944.js";import"./TopMenu-30c13fe9.js";import"./ProjectInfo-7c1d079e.js";class je{constructor(e){s(this,"main");s(this,"isActive",!1);s(this,"ui");this.main=e,window.location.hash.includes("debug")&&this.active()}active(){this.isActive=!0,this.ui=new T({autoPlace:!1}),this.fixGui(),this.toWindowTest()}fixGui(){if(!this.ui)return;const e=this.main.viewArea,t=this.ui.domElement;t.classList.add("a"),t.classList.add("taller-than-window");const i=window.document.createElement("div");i.classList.add("dg"),i.classList.add("ac"),i.style.position="absolute",i.appendChild(this.ui.domElement),e.appendChild(i)}toWindowTest(){window.debugView=this.main}addFolder(e){if(!this.ui||!(this.ui instanceof T))return i=>{};const t=this.ui.addFolder(e);return i=>{i(t)}}destroy(){var e;(e=this.ui)==null||e.destroy(),delete window.debugView}}class qe extends D{constructor(t){super();s(this,"viewArea");s(this,"width",0);s(this,"height",0);s(this,"pixelRatio",0);s(this,"onWindowResizeListener",()=>{this.updateSize(),this.emit("resize")});this.viewArea=t,this.updateSize(),this.setWindowResizeEmitter()}updateSize(){this.width=this.viewArea.offsetWidth,this.height=this.viewArea.offsetHeight,this.pixelRatio=Math.min(window.devicePixelRatio,2)}setWindowResizeEmitter(){window.addEventListener("resize",this.onWindowResizeListener)}removeWindowResizeEmitter(){window.removeEventListener("resize",this.onWindowResizeListener)}onResize(t){return this.on("resize",t)}destroy(){return this.removeWindowResizeEmitter(),this.clearEvents()}}class Ye extends D{constructor(){super();s(this,"start");s(this,"current");s(this,"elapsed");s(this,"delta");s(this,"requestAnimationFrameID",0);s(this,"onTickLoopFunction",()=>{const t=Date.now();this.delta=t-this.current,this.current=t,this.elapsed=this.current-this.start,this.emit("tick"),this.requestAnimationFrameID=window.requestAnimationFrame(this.currentTickLoopFunction)});s(this,"currentTickLoopFunction",()=>{});s(this,"isTicking",!1);this.start=Date.now(),this.current=this.start,this.elapsed=0,this.delta=16}tick(){this.currentTickLoopFunction!==this.onTickLoopFunction&&(this.currentTickLoopFunction=this.onTickLoopFunction,this.isTicking||(this.isTicking=!0,this.current=Date.now()-Math.trunc(1e3/60),this.currentTickLoopFunction()))}paused(){this.isTicking&&(window.cancelAnimationFrame(this.requestAnimationFrameID),this.currentTickLoopFunction=()=>{},this.isTicking=!1)}onTick(t){return this.on("tick",t)}destroy(){return this.currentTickLoopFunction=()=>{},this.clearEvents()}}class Ze extends D{constructor(t){super();s(this,"sources");s(this,"items");s(this,"loadTotal",0);s(this,"loaded",0);s(this,"LoadingManager",new U(()=>{this.loaded===this.loadTotal&&this.ready()},(t,i,n)=>{this.loadTotal=n,this.loaded=i,this.emit("progress",this.loaded,this.loadTotal)}));s(this,"loaders",{gltfLoader:new A(this.LoadingManager),gltfDracoLoader:new A(this.LoadingManager).setDRACOLoader(new V(this.LoadingManager).setDecoderPath(new j("/assets/draco/").url)),textureLoader:new q(this.LoadingManager),cubeTextureLoader:new Y(this.LoadingManager),fontLoader:new ae(this.LoadingManager)});s(this,"isReady",!1);this.sources=t,this.items={},this.startLoading()}startLoading(){if(this.sources.length===0)return this.ready();for(const t of this.sources)if(t.type==="gltfModel")this.loaders.gltfLoader.load(t.path,i=>{this.sourceLoaded(t,i)});else if(t.type==="gltfDracoModel")this.loaders.gltfDracoLoader.load(t.path,i=>{this.sourceLoaded(t,i)});else if(t.type==="texture")this.loaders.textureLoader.load(t.path,i=>{this.sourceLoaded(t,i)});else if(t.type==="cubeTexture")this.loaders.cubeTextureLoader.load(t.path,i=>{this.sourceLoaded(t,i)});else if(t.type==="fontJSON")this.loaders.fontLoader.load(t.path,i=>{this.sourceLoaded(t,i)});else throw`Unknow source.type: ${t.type}`}sourceLoaded(t,i){this.items[t.name]=i}ready(){this.isReady=!0,this.emit("ready")}onReady(t){return this.isReady?t():this.once("ready",t)}onProgress(t){return this.on("progress",t)}destroy(){return this.clearEvents()}}class Je{constructor(e){s(this,"main");s(this,"sizes");s(this,"scene");s(this,"canvas");s(this,"instance");s(this,"controls");this.main=e,this.sizes=this.main.sizes,this.scene=this.main.scene,this.canvas=this.main.canvas,this.setInstance(),this.setOrbitControls()}setInstance(){this.instance=new Z(45,this.sizes.width/this.sizes.height,.1,100),this.instance.position.set(0,1.45,-1.5),this.instance.lookAt(0,1.45,0),this.scene.add(this.instance)}setOrbitControls(){this.controls=new J(this.instance,this.canvas),this.controls.target=new M(0,1.45,0),this.controls.enableDamping=!0,this.controls.enabled=!1}resize(){this.instance.aspect=this.sizes.width/this.sizes.height,this.instance.updateProjectionMatrix()}update(){this.controls.update()}}class Xe extends D{constructor(t){super();s(this,"main");s(this,"finalRender");s(this,"coreRenderer");this.main=t,this.coreRenderer=new Ke(this)}onDestroy(t){this.on("destroy",t)}destroy(){this.coreRenderer.instance.dispose(),this.emit("destroy")}onResize(t){this.on("resize",t)}resize(){this.emit("resize")}update(){this.finalRender()}}class Ke{constructor(e){s(this,"renderer");s(this,"main");s(this,"canvas");s(this,"sizes");s(this,"scene");s(this,"camera");s(this,"renderToneMappingDebug");s(this,"instance");s(this,"resize",()=>{this.instance.setSize(this.sizes.width,this.sizes.height),this.instance.setPixelRatio(this.sizes.pixelRatio)});s(this,"render",()=>{this.instance.render(this.scene,this.camera.instance)});this.renderer=e,this.main=this.renderer.main,this.canvas=this.main.canvas,this.sizes=this.main.sizes,this.scene=this.main.scene,this.camera=this.main.camera,this.renderToneMappingDebug=this.main.debug.addFolder("RenderToneMapping"),this.setInstance()}setInstance(){this.instance=new X({canvas:this.canvas,antialias:!0,alpha:!0}),this.instance.physicallyCorrectLights=!0,this.instance.outputEncoding=S,this.instance.toneMapping=F,this.instance.toneMappingExposure=1.5,this.instance.shadowMap.enabled=!0,this.instance.shadowMap.type=ge,this.instance.setClearColor(16777215,0),this.resize(),this.renderToneMappingDebug(e=>{e.add(this.instance,"toneMapping",{No:$,Linear:K,Reinhard:Q,Cineon:ee,ACESFilmic:F}).onFinishChange(()=>{this.instance.toneMapping=Number(this.instance.toneMapping)}),e.add(this.instance,"toneMappingExposure").min(0).max(10).step(.001)}),this.renderer.onResize(this.resize),this.renderer.finalRender=this.render}}class Qe{constructor(e){s(this,"main");s(this,"scene");s(this,"resources");s(this,"addDebug");s(this,"sunLight");s(this,"environmentMap");this.main=e,this.scene=this.main.scene,this.resources=this.main.resources,this.addDebug=this.main.debug.addFolder("environment"),this.setSunLight(),this.setEnvironmentMap()}setSunLight(){this.sunLight=new te("#ffffff",5),this.sunLight.castShadow=!0,this.sunLight.shadow.camera.far=20,this.sunLight.shadow.mapSize.set(1024,1024),this.sunLight.shadow.normalBias=.05,this.sunLight.position.set(5,2,2),this.scene.add(this.sunLight),this.addDebug(e=>{e.add(this.sunLight,"intensity").name("sunLightIntensity").min(0).max(10).step(.001),e.add(this.sunLight.position,"x").name("sunLightX").min(-50).max(50).step(.001),e.add(this.sunLight.position,"y").name("sunLightY").min(-50).max(50).step(.001),e.add(this.sunLight.position,"z").name("sunLightZ").min(-50).max(50).step(.001)})}setEnvironmentMap(){this.environmentMap={},this.environmentMap.intensity=1.5,this.environmentMap.texture=this.resources.items.environmentMapTexture,this.environmentMap.texture.encoding=S,this.scene.environment=this.environmentMap.texture,this.environmentMap.updateMaterials=()=>{this.scene.traverse(e=>{e instanceof p&&e.material instanceof se&&(e.material.envMap=this.environmentMap.texture,e.material.envMapIntensity=this.environmentMap.intensity,e.material.needsUpdate=!0,e.castShadow=!0,e.receiveShadow=!0)})},this.environmentMap.updateMaterials(),this.addDebug(e=>{e.add(this.environmentMap,"intensity").name("envMapIntensity").min(0).max(4).step(.001).onChange(()=>{this.environmentMap.updateMaterials()})})}}class et{constructor(e){s(this,"main");s(this,"scene");s(this,"addDebug");s(this,"isShowAxesHelper",!0);s(this,"axesHelper");this.main=e,this.scene=this.main.scene,this.addDebug=this.main.debug.addFolder("AxesHelper"),this.setAxesHelper()}setAxesHelper(){this.addDebug(e=>{this.axesHelper=new ie(1),this.toggleAxesHelper(),e.open(),e.add(this,"isShowAxesHelper").onChange(t=>{this.toggleAxesHelper()})})}toggleAxesHelper(e){(typeof e=="boolean"?e:this.isShowAxesHelper)?this.scene.add(this.axesHelper):this.scene.remove(this.axesHelper)}}class tt{constructor(e){s(this,"main");s(this,"scene");s(this,"addDebug");s(this,"isControlCamera",!1);this.main=e,this.scene=this.main.scene,this.addDebug=this.main.debug.addFolder("CameraHelper"),this.setHelper()}setHelper(){this.addDebug(e=>{e.open(),e.add(this,"isControlCamera").onChange(t=>{this.toggleHelper(t)})}),this.addDebug(e=>{const t=this.main.camera;e.add(t.instance.position,"y").name("positionY").min(-10).max(10).step(.001),e.add(t.instance.position,"z").name("positionZ").min(-10).max(10).step(.001),e.add(t.controls.target,"x").name("lookAtX").min(-5).max(5).step(.001),e.add(t.controls.target,"y").name("lookAtY").min(-5).max(5).step(.001),e.add(t.controls.target,"z").name("lookAtZ").min(-5).max(5).step(.001)})}toggleHelper(e){this.main.canvas.style.pointerEvents=e?"unset":"",this.main.camera.controls.enabled=!!e}}class st{constructor(e){s(this,"main");s(this,"scene");s(this,"addDebug");s(this,"isShowBorder",!0);this.main=e,this.scene=this.main.scene,this.addDebug=this.main.debug.addFolder("CssHelper"),this.setControler(),this.toggleControler()}setControler(){this.addDebug(e=>{e.add(this,"isShowBorder").onChange(t=>{this.toggleControler(t)})})}toggleControler(e){this.isShowBorder}}class it{constructor(e){s(this,"main");s(this,"scene");s(this,"resources");s(this,"time");s(this,"addDebug");s(this,"resource");s(this,"model");s(this,"plane");s(this,"animation");this.main=e,this.scene=this.main.scene,this.resources=this.main.resources,this.time=this.main.time,this.addDebug=this.main.debug.addFolder("Model"),this.setModel(),this.setPlane()}setModel(){this.resource=this.main.resources.items["model-me"],this.model=this.resource.scene.children[0],this.model.rotation.y=Math.PI*1,this.scene.add(this.model),this.model.traverse(e=>{e instanceof p&&(e.castShadow=!0)}),this.addDebug(e=>{e.add(this.model.rotation,"y").name("rotationY").min(-2*Math.PI).max(2*Math.PI).step(.001)})}setPlane(){const e=new be(50,10),t=new Re({color:new Te("rgba(255,255,255,0)"),transparent:!0,opacity:1}),i=new p(e,t);i.rotation.x=-Math.PI/2,i.position.x=0,i.position.z=-4,this.plane=i,this.scene.add(this.plane),this.model.traverse(n=>{n instanceof p&&(n.castShadow=!0)})}setAnimation(){this.animation={},this.animation.mixer=new Ae(this.model),this.animation.actions={},this.animation.actions.idle=this.animation.mixer.clipAction(this.resource.animations[0]),this.animation.actions.walking=this.animation.mixer.clipAction(this.resource.animations[1]),this.animation.actions.running=this.animation.mixer.clipAction(this.resource.animations[2]),this.animation.actions.current=this.animation.actions.idle,this.animation.actions.current.play(),this.animation.play=e=>{const t=this.animation.actions[e],i=this.animation.actions.current;t.reset(),t.play(),t.crossFadeFrom(i,1),this.animation.actions.current=t}}update(){}}class nt{constructor(e){s(this,"main");s(this,"time");s(this,"progress",0);s(this,"progress1Rotates",[150*Math.PI/180,190*Math.PI/180]);s(this,"progress1Position",new M(0,1.45,-1.5));s(this,"progress1Target",new M(0,1.45,0));s(this,"progress2Rotate",(150+360)*Math.PI/180);s(this,"progress2Position",new M(0,.33,-3.3));s(this,"progress2Target",new M(0,1.11,0));s(this,"progress3Rotates",[(150+360)*Math.PI/180,(220+360)*Math.PI/180]);this.main=e,this.time=this.main.time,this.adjustParameters(),this.main.sizes.onResize(()=>this.adjustParameters()),this.computeProgress()}setProgress(e){this.progress=e}adjustParameters(){const e=window.innerWidth<=1024,t=[150,190],i=e?[0,1.4,-2]:[0,1.45,-1.5],n=e?[0,1.4,0]:[0,1.45,0],o=t[0]+360,l=e?[0,.5,-4]:[0,.33,-3.3],h=e?[0,.77,0]:[0,1.11,0],d=[t[0]+360,250+360];this.progress1Rotates=t.map(c=>c*Math.PI/180),this.progress1Position=new M(...i),this.progress1Target=new M(...n),this.progress2Rotate=o*Math.PI/180,this.progress2Position=new M(...l),this.progress2Target=new M(...h),this.progress3Rotates=d.map(c=>c*Math.PI/180)}computeProgress(){if(!this.main.world.model)return;const e=this.progress,t=this.main.camera,i=this.main.world.model;if(e<=1){const{progress1Rotates:n,progress:o}=this,l=n[0]+o*(n[1]-n[0]),h={duration:1,y:l};u.to(i.model.rotation,h);const d={duration:1,x:this.progress1Position.x,y:this.progress1Position.y,z:this.progress1Position.z};u.to(t.instance.position,d);const c={duration:1,x:this.progress1Target.x,y:this.progress1Target.y,z:this.progress1Target.z};u.to(t.controls.target,c)}else if(e<=2){const n=this.progress2Rotate,o={duration:1,y:n};u.to(i.model.rotation,o);const l={duration:1,x:this.progress2Position.x,y:this.progress2Position.y,z:this.progress2Position.z};u.to(t.instance.position,l);const h={duration:1,x:this.progress2Target.x,y:this.progress2Target.y,z:this.progress2Target.z};u.to(t.controls.target,h)}else if(e<=3){const{progress3Rotates:n,progress:o}=this,l=o%1,h=n[0]+l*(n[1]-n[0]),d={duration:1,y:h};u.to(i.model.rotation,d);const c={duration:1,x:this.progress2Position.x,y:this.progress2Position.y,z:this.progress2Position.z};u.to(t.instance.position,c);const m={duration:1,x:this.progress2Target.x,y:this.progress2Target.y,z:this.progress2Target.z};u.to(t.controls.target,m)}}update(){}}class at{constructor(e){s(this,"main");s(this,"scene");s(this,"environment");s(this,"resources");s(this,"guiAxesHelper");s(this,"guiCameraHelper");s(this,"guiCssHelper");s(this,"model");s(this,"commander");this.main=e,this.scene=this.main.scene,this.resources=this.main.resources,this.resources.onReady(()=>{this.model=new it(this.main),this.environment=new Qe(this.main),this.guiAxesHelper=new et(this.main),this.guiCameraHelper=new tt(this.main),this.guiCssHelper=new st(this.main),this.commander=new nt(this.main)})}resize(){}update(){var e,t;(e=this.model)==null||e.update(),(t=this.commander)==null||t.update()}}var rt=[{name:"environmentMapTexture",type:"cubeTexture",path:[new URL("/l00/static/jpg/px-5f94a820.jpg?url",self.location).href,new URL("/l00/static/jpg/nx-17c6256f.jpg?url",self.location).href,new URL("/l00/static/jpg/py-eb6ff9ff.jpg?url",self.location).href,new URL("/l00/static/jpg/ny-bedb4db1.jpg?url",self.location).href,new URL("/l00/static/jpg/pz-4e8175e8.jpg?url",self.location).href,new URL("/l00/static/jpg/nz-ee7dfac2.jpg?url",self.location).href]},{name:"model-me",type:"gltfDracoModel",path:new URL("/l00/static/gltf/me-1d61ce68.gltf?url",self.location).href}];class ot extends D{constructor(t,i){super();s(this,"canvas");s(this,"viewArea");s(this,"sizes");s(this,"time");s(this,"scene");s(this,"resources");s(this,"camera");s(this,"renderer");s(this,"world");s(this,"debug");this.canvas=t,this.viewArea=i,this.debug=new je(this),this.sizes=new qe(i),this.time=new Ye,this.scene=new ne,this.resources=new Ze(rt),this.camera=new Je(this),this.renderer=new Xe(this),this.world=new at(this),this.sizes.onResize(()=>this.resize()),this.time.onTick(()=>this.update())}resize(){this.camera.resize(),this.world.resize(),this.renderer.resize()}update(){this.camera.update(),this.world.update(),this.renderer.update()}render(){this.time.tick()}pausedRender(){this.time.paused()}destroy(){this.sizes.destroy(),this.time.destroy(),this.renderer.destroy(),this.camera.controls.dispose(),this.resources.destroy(),this.debug.destroy(),this.scene.traverse(t=>{if(t instanceof p){t.geometry.dispose();for(const i in t.material){const n=t.material[i];n&&typeof n.dispose=="function"&&n.dispose()}}}),this.emit("destroyed")}onDestroyed(t){return this.once("destroyed",t)}}const ht=y({name:"Section-1-Scene-Model",props:{progress:{type:Number,required:!0}},setup(a){const e=a,t=L("rendersAreaMap"),i=L("loadingManager"),n=w(),o=w(),l=w();let h;z(async()=>{const c=n.value,m=o.value;h=new ot(c,m),h.render(),t&&t.set(l.value,h),i&&i.add(h)}),b(()=>{h==null||h.destroy()});const d=c=>{!h||!h.world.commander||(h.world.commander.setProgress(c),h.world.commander.computeProgress())};return z(()=>{b(ue(()=>e.progress,d))}),(c,m)=>(g(),f(I,null,[r("div",{class:"viewReactArea",ref_key:"viewReactArea",ref:l},null,512),me(c.$slots,"default",{},void 0,!0),r("div",{class:"viewArea",ref_key:"viewArea",ref:o},[r("canvas",{class:"background",ref_key:"canvas",ref:n},null,512)],512)],64))}});var ct=x(ht,[["__scopeId","data-v-b52e8ec6"],["__file","/Volumes/Work/l00 Studio/l00/source/root/home/components/Section-1-Scene-Model.vue"]]);const ve=a=>(G("data-v-b7f3132e"),a=a(),W(),a),dt={class:"viewarea"},lt=ve(()=>r("div",{class:"content"},[r("div",{class:"title"},[r("span",null,"He"),r("span",null,"llo")]),r("div",{class:"left"},[r("span",null,[R("Welcome to"),r("br"),R("l00 Studio")])]),r("div",{class:"right"},[r("span",null,"\u6211\u53EB\u5C0F\u5218")])],-1)),ut=[lt],mt={class:"viewarea"},pt=ve(()=>r("div",{class:"content"},[r("div",{class:"title"},[r("span",null,"\u91CE"),r("span",null,"\u7801")]),r("div",{class:"top"},[r("span",null,"// \u597D\u5B66\u7684\u4E00\u679A[\u91CE\u751F]JS[\u7801\u519C]")]),r("div",{class:"bottom"},[r("span",null,"< Es6 Vue Threejs"),r("span",null,"C4d Blender AE/>")])],-1)),gt=[pt],ft=y({name:"Section-1-Scene-Text",props:{scrollMidline:{type:Number,required:!0},progress:{type:Number,required:!0}},emits:["update:progress"],setup(a,{emit:e}){const t=a,i=O({get(){return t.progress},set(d){e("update:progress",d)}}),h=class{constructor(c){s(this,"el",{});s(this,"top",0);s(this,"bottom",0);s(this,"height",0);s(this,"effect",{blurMax:50,translateYMax:25});s(this,"isShow",!1);s(this,"transitionName","fade");s(this,"contentStyle",{filter:"",transform:"",opacity:1});s(this,"currentProgress",0);s(this,"lastProgress",-1/0);s(this,"index");this.index=c}computedProgress(c){this.top>=c?this.changeShowState(!1):this.bottom<c?this.changeShowState(!1):this.changeShowState(!0)}changeShowState(c){if(c){const m=(t.scrollMidline-this.top)/this.height;i.value=this.index+m}this.isShow!==c&&(this.transitionName=h.isReverse?"fade-reverse":"fade",this.isShow=c)}};let n=h;s(n,"lastScroll",t.scrollMidline),s(n,"isReverse",!1);const o=(()=>{const d=B([new n(0),new n(2)]),c=()=>{d.forEach((C,xe)=>{C.top=0;for(let k=C.el;k;k=k.offsetParent)C.top+=k.offsetTop;C.height=C.el.offsetHeight,C.bottom=C.top+C.el.offsetHeight,xe+1===d.length&&(C.bottom=1/0)})},m=()=>{window.addEventListener("resize",c),c()},ye=()=>{window.removeEventListener("resize",c)};return z(()=>m()),b(()=>ye()),d})(),l=d=>{n.isReverse=n.lastScroll-d>0,n.lastScroll=d;for(let c of o)c.computedProgress(d)};return z(()=>{l(t.scrollMidline),b(ue(()=>t.scrollMidline,l))}),(d,c)=>(g(),f(I,null,[r("div",{class:"section section1",ref:m=>_(o)[0].el=m},[v(he,{name:_(o)[0].transitionName,persisted:""},{default:H(()=>[re(r("div",dt,ut,512),[[oe,_(o)[0].isShow]])]),_:1},8,["name"])],512),r("div",{class:"section section2",ref:m=>_(o)[1].el=m},[v(he,{name:_(o)[1].transitionName,persisted:""},{default:H(()=>[re(r("div",mt,gt,512),[[oe,_(o)[1].isShow]])]),_:1},8,["name"])],512)],64))}});var wt=x(ft,[["__scopeId","data-v-b7f3132e"],["__file","/Volumes/Work/l00 Studio/l00/source/root/home/components/Section-1-Scene-Text.vue"]]);const vt={class:"container"},_t=y({name:"Section-1",props:{scrollMidline:{type:Number,required:!0}},setup(a){const e=a,t=w(0);return(i,n)=>(g(),f("section",vt,[v(ct,{progress:t.value},{default:H(()=>[v(wt,{scrollMidline:e.scrollMidline,progress:t.value,"onUpdate:progress":n[0]||(n[0]=o=>t.value=o)},null,8,["scrollMidline","progress"])]),_:1},8,["progress"])]))}});var yt=x(_t,[["__scopeId","data-v-72323502"],["__file","/Volumes/Work/l00 Studio/l00/source/root/home/components/Section-1.vue"]]);const xt=a=>(G("data-v-935b1c3e"),a=a(),W(),a),Mt=["href"],Ct={class:"card"},Lt=["src","alt"],zt=["href"],bt=xt(()=>r("div",{class:"more"},"\u67E5\u770B\u66F4\u591A",-1)),Rt=[bt],Tt=y({name:"Section-2-ExamplesList",props:{list:{type:Array,required:!0},base:{type:String,required:!0}},setup(a){const e=a,t=e.list,n=class{};let i=n;return s(i,"origin",new URL("/l00/",location.origin).href),s(i,"from",l=>new URL(`./${e.base}/#/${l}`,n.origin).href),(o,l)=>(g(),f("ul",null,[(g(!0),f(I,null,pe(_(t),h=>(g(),f("li",null,[r("a",{href:i.from(h.id),target:"blank"},[r("div",Ct,[r("img",{src:h.coverUrl,alt:h.id,loading:"lazy"},null,8,Lt)])],8,Mt)]))),256)),r("a",{href:i.from(""),target:"blank"},Rt,8,zt)]))}});var le=x(Tt,[["__scopeId","data-v-935b1c3e"],["__file","/Volumes/Work/l00 Studio/l00/source/root/home/components/Section-2-ExamplesList.vue"]]);const At={class:"container"},St={class:"target"},Dt=y({name:"index",props:{isPlay:{type:Boolean,required:!0},color:{type:[String,Array],required:!1},perspective:{type:Array,required:!1}},setup(a){const e=a,t=B({sideNumbers:16,sideHeight:45,sideRotate:0,sideRadius:0,sideTextOffset:46,perspectiveMin:100,perspectiveMax:1e3}),i=(h,d)=>(d=10**d,Math.round(h*d)/d);Le(()=>{const h=360/t.sideNumbers;t.sideRotate=i(h,5),t.sideRadius=i(t.sideHeight/2/Math.tan(Math.PI*h/360),5)});const n=O(()=>Object.entries({"--side-height":`${t.sideHeight}px`,"--side-rotate":`${t.sideRotate}deg`,"--side-translateZ":`${t.sideRadius}px`,"--side-textOffset":`${t.sideTextOffset}px`,"--perspectiveMin":`${e.perspective&&e.perspective[0]?e.perspective[0]:t.perspectiveMin}px`,"--perspectiveMax":`${e.perspective&&e.perspective[1]?e.perspective[1]:t.perspectiveMax}px`}).reduce((h,d)=>`${h}${d[0]}:${d[1]};`,""));class o{constructor(d){s(this,"id",Symbol());s(this,"style",{"--i":0});this.style["--i"]=d}}const l=O(()=>Array(t.sideNumbers).fill(0).map((h,d)=>new o(d)));return(h,d)=>(g(),f("div",At,[r("div",{class:ze(["view",{paused:!e.isPlay}]),style:ce(_(n))},[r("div",St,[(g(!0),f(I,null,pe(_(l),c=>(g(),f("div",{class:"side",key:c.id,style:ce(c.style)},[me(h.$slots,"default")],4))),128))])],6)]))}});var Pt=x(Dt,[["__scopeId","data-v-60814af9"],["__file","/Volumes/Work/l00 Studio/l00/source/root/home/components/Section-2-1-Banner-Css3DText/index.vue"]]);const Et=a=>(G("data-v-12e6d4f6"),a=a(),W(),a),kt={class:"viewArea"},Ht=Et(()=>r("span",{style:{"font-size":"3.5rem"}},[r("i",{style:{color:"#ff246f"}},"l00"),R("web"),r("i",{style:{color:"#12b5ff"}},"w"),R("elcome")],-1)),Ft=y({name:"Section-2-1-Banner-Css3DText",setup(a){const e=L("rendersAreaMap"),t=w(),i=B({isPlay:!0,time:{isTicking:!0},render(){this.isPlay=!0,this.time.isTicking=!0},pausedRender(){this.isPlay=!1,this.time.isTicking=!1},onDestroyed(){}});return z(async()=>{e&&e.set(t.value,i)}),(n,o)=>(g(),f("div",kt,[r("div",{class:"viewReactArea",ref_key:"viewReactArea",ref:t},null,512),v(Pt,{perspective:[100,300],isPlay:i.isPlay},{default:H(()=>[Ht]),_:1},8,["isPlay"])]))}});var $t=x(Ft,[["__scopeId","data-v-12e6d4f6"],["__file","/Volumes/Work/l00 Studio/l00/source/root/home/components/Section-2-1-Banner-Css3DText.vue"]]);class It{constructor(e){s(this,"main");s(this,"isActive",!1);s(this,"ui");this.main=e,window.location.hash.includes("debug")&&this.active()}active(){this.isActive=!0,this.ui=new T({autoPlace:!1}),this.fixGui(),this.toWindowTest()}fixGui(){if(!this.ui)return;const e=this.main.viewArea,t=this.ui.domElement;t.classList.add("a"),t.classList.add("taller-than-window");const i=window.document.createElement("div");i.classList.add("dg"),i.classList.add("ac"),i.style.position="absolute",i.appendChild(this.ui.domElement),e.appendChild(i)}toWindowTest(){window.debugView=this.main}addFolder(e){if(!this.ui||!(this.ui instanceof T))return i=>{};const t=this.ui.addFolder(e);return i=>{i(t)}}destroy(){var e;(e=this.ui)==null||e.destroy(),delete window.debugView}}class Gt{constructor(e,t){s(this,"function");s(this,"isOnce");this.function=e,this.isOnce=t.isOnce?t.isOnce:!1}}class P{constructor(){s(this,"__emittersMap__",new WeakMap);s(this,"__emitters__",new Map)}on(e,t){if(typeof e!="string"||e===""||typeof t!="function")return!1;let i=this.__emitters__.get(e);if(i||(i=new Set,this.__emitters__.set(e,i)),this.__emittersMap__.has(t))return!1;{const n=new Gt(t,{isOnce:!1});this.__emittersMap__.set(t,n),i.add(n)}return!0}once(e,t){if(this.on(e,t)){const i=this.__emittersMap__.get(t);if(!i)return!1;i.isOnce=!0}else return!1;return!0}off(e,t){const i=this.__emitters__.get(e);if(!i)return!1;const n=this.__emittersMap__.get(t);return n?(this.__emittersMap__.delete(t),i.delete(n),i.size===0&&this.__emitters__.delete(e),!0):!1}offAll(e){const t=this.__emitters__.get(e);return t?(t.clear(),this.__emitters__.delete(e),!0):!1}clearEvents(){return this.__emitters__.clear(),!0}async emit(e,...t){const i=this.__emitters__.get(e);if(!!i)for(let n of i.values()){try{await n.function.apply(void 0,t)}catch(o){console.error(o)}n.isOnce&&this.off(e,n.function)}}}class Wt extends P{constructor(t){super();s(this,"viewArea");s(this,"width",0);s(this,"height",0);s(this,"pixelRatio",0);s(this,"onWindowResizeListener",()=>{this.updateSize(),this.emit("resize")});this.viewArea=t,this.updateSize(),this.setWindowResizeEmitter()}updateSize(){this.width=this.viewArea.offsetWidth,this.height=this.viewArea.offsetHeight,this.pixelRatio=Math.min(window.devicePixelRatio,2)}setWindowResizeEmitter(){window.addEventListener("resize",this.onWindowResizeListener)}removeWindowResizeEmitter(){window.removeEventListener("resize",this.onWindowResizeListener)}onResize(t){return this.on("resize",t)}destroy(){return this.removeWindowResizeEmitter(),this.clearEvents()}}class Nt extends P{constructor(){super();s(this,"start");s(this,"current");s(this,"elapsed");s(this,"delta");s(this,"requestAnimationFrameID",0);s(this,"onTickLoopFunction",()=>{const t=Date.now();this.delta=t-this.current,this.current=t,this.elapsed=this.current-this.start,this.emit("tick"),this.requestAnimationFrameID=window.requestAnimationFrame(this.currentTickLoopFunction)});s(this,"currentTickLoopFunction",()=>{});s(this,"isTicking",!1);this.start=Date.now(),this.current=this.start,this.elapsed=0,this.delta=16}tick(){this.currentTickLoopFunction!==this.onTickLoopFunction&&(this.currentTickLoopFunction=this.onTickLoopFunction,this.isTicking||(this.isTicking=!0,this.current=Date.now()-16,this.currentTickLoopFunction()))}paused(){this.isTicking&&(window.cancelAnimationFrame(this.requestAnimationFrameID),this.currentTickLoopFunction=()=>{},this.isTicking=!1)}onTick(t){return this.on("tick",t)}destroy(){return this.currentTickLoopFunction=()=>{},this.clearEvents()}}class Ot extends P{constructor(t){super();s(this,"sources");s(this,"items");s(this,"loadTotal",0);s(this,"loaded",0);s(this,"LoadingManager",new U(()=>{this.loaded===this.loadTotal&&this.ready()},(t,i,n)=>{this.loadTotal=n,this.loaded=i,this.emit("progress",this.loaded,this.loadTotal)}));s(this,"loaders",{gltfLoader:new A(this.LoadingManager),gltfDracoLoader:new A(this.LoadingManager).setDRACOLoader(new V(this.LoadingManager).setDecoderPath(new j("/assets/draco/").url)),textureLoader:new q(this.LoadingManager),cubeTextureLoader:new Y(this.LoadingManager),fontLoader:new ae(this.LoadingManager)});s(this,"isReady",!1);this.sources=t,this.items={},this.startLoading()}startLoading(){if(this.sources.length===0)return this.ready();for(const t of this.sources)if(t.type==="gltfModel")this.loaders.gltfLoader.load(t.path,i=>{this.sourceLoaded(t,i)});else if(t.type==="gltfDracoModel")this.loaders.gltfDracoLoader.load(t.path,i=>{this.sourceLoaded(t,i)});else if(t.type==="texture")this.loaders.textureLoader.load(t.path,i=>{this.sourceLoaded(t,i)});else if(t.type==="cubeTexture")this.loaders.cubeTextureLoader.load(t.path,i=>{this.sourceLoaded(t,i)});else if(t.type==="fontJSON")this.loaders.fontLoader.load(t.path,i=>{this.sourceLoaded(t,i)});else throw`Unknow source.type: ${t.type}`}sourceLoaded(t,i){this.items[t.name]=i}ready(){this.isReady=!0,this.emit("ready")}onReady(t){return this.isReady?t():this.once("ready",t)}onProgress(t){return this.on("progress",t)}destroy(){return this.clearEvents()}}class Bt{constructor(e){s(this,"main");s(this,"sizes");s(this,"scene");s(this,"canvas");s(this,"instance");s(this,"controls");s(this,"isNeedUpdate",!1);this.main=e,this.sizes=this.main.sizes,this.scene=this.main.scene,this.canvas=this.main.canvas,this.setInstance(),this.setOrbitControls()}setInstance(){this.instance=new Z(75,this.sizes.width/this.sizes.height,.1,100),this.instance.position.set(0,-1.5,4),this.instance.lookAt(0,0,0),this.scene.add(this.instance)}setOrbitControls(){this.controls=new J(this.instance,this.main.viewControlsArea),this.controls.enableDamping=!0}resize(){this.instance.aspect=this.sizes.width/this.sizes.height,this.instance.updateProjectionMatrix()}update(){this.isNeedUpdate=this.controls.update()}}class Ut extends P{constructor(t){super();s(this,"main");s(this,"finalRender");s(this,"coreRenderer");this.main=t,this.coreRenderer=new Vt(this)}onDestroy(t){this.on("destroy",t)}destroy(){this.coreRenderer.instance.dispose(),this.emit("destroy")}onResize(t){this.on("resize",t)}resize(){this.emit("resize")}update(){this.finalRender()}}class Vt{constructor(e){s(this,"renderer");s(this,"main");s(this,"canvas");s(this,"sizes");s(this,"scene");s(this,"camera");s(this,"renderToneMappingDebug");s(this,"instance");s(this,"resize",()=>{this.instance.setSize(this.sizes.width,this.sizes.height),this.instance.setPixelRatio(this.sizes.pixelRatio)});s(this,"render",()=>{this.instance.render(this.scene,this.camera.instance)});this.renderer=e,this.main=this.renderer.main,this.canvas=this.main.canvas,this.sizes=this.main.sizes,this.scene=this.main.scene,this.camera=this.main.camera,this.renderToneMappingDebug=this.main.debug.addFolder("RenderToneMapping"),this.setInstance()}setInstance(){this.instance=new X({canvas:this.canvas,antialias:!0,alpha:!0}),this.instance.outputEncoding=S,this.instance.toneMapping=$,this.instance.toneMappingExposure=1,this.instance.shadowMap.enabled=!0,this.instance.shadowMap.type=ge,this.instance.setClearColor(16777215,0),this.resize(),this.renderToneMappingDebug(e=>{e.add(this.instance,"toneMapping",{No:$,Linear:K,Reinhard:Q,Cineon:ee,ACESFilmic:F}).onFinishChange(()=>{this.instance.toneMapping=Number(this.instance.toneMapping)}),e.add(this.instance,"toneMappingExposure").min(0).max(10).step(.001)}),this.renderer.onResize(this.resize),this.renderer.finalRender=this.render}}class jt{constructor(e){s(this,"main");s(this,"scene");s(this,"resources");s(this,"addDebug");s(this,"sunLight");s(this,"environmentMap");this.main=e,this.scene=this.main.scene,this.resources=this.main.resources,this.addDebug=this.main.debug.addFolder("environment")}setSunLight(){this.sunLight=new te("#ffffff",5),this.sunLight.castShadow=!0,this.sunLight.shadow.camera.far=20,this.sunLight.shadow.mapSize.set(1024,1024),this.sunLight.shadow.normalBias=.05,this.sunLight.position.set(5,2,2),this.scene.add(this.sunLight),this.addDebug(e=>{e.add(this.sunLight,"intensity").name("sunLightIntensity").min(0).max(10).step(.001),e.add(this.sunLight.position,"x").name("sunLightX").min(-50).max(50).step(.001),e.add(this.sunLight.position,"y").name("sunLightY").min(-50).max(50).step(.001),e.add(this.sunLight.position,"z").name("sunLightZ").min(-50).max(50).step(.001)})}setEnvironmentMap(){this.environmentMap={},this.environmentMap.intensity=1.5,this.environmentMap.texture=this.resources.items.environmentMapTexture,this.environmentMap.texture.encoding=S,this.scene.environment=this.environmentMap.texture,this.environmentMap.updateMaterials=()=>{this.scene.traverse(e=>{e instanceof p&&e.material instanceof se&&(e.material.envMap=this.environmentMap.texture,e.material.envMapIntensity=this.environmentMap.intensity,e.material.needsUpdate=!0,e.castShadow=!0,e.receiveShadow=!0)})},this.environmentMap.updateMaterials(),this.addDebug(e=>{e.add(this.environmentMap,"intensity").name("envMapIntensity").min(0).max(4).step(.001).onChange(()=>{this.environmentMap.updateMaterials()})})}}class qt{constructor(e){s(this,"main");s(this,"scene");s(this,"addDebug");s(this,"isShowAxesHelper",!0);s(this,"axesHelper");this.main=e,this.scene=this.main.scene,this.addDebug=this.main.debug.addFolder("AxesHelper"),this.setAxesHelper()}setAxesHelper(){this.addDebug(e=>{this.axesHelper=new ie(1),this.toggleAxesHelper(),e.open(),e.add(this,"isShowAxesHelper").onChange(t=>{this.toggleAxesHelper()})})}toggleAxesHelper(e){(typeof e=="boolean"?e:this.isShowAxesHelper)?this.scene.add(this.axesHelper):this.scene.remove(this.axesHelper)}}class Yt{constructor(e){s(this,"main");s(this,"scene");s(this,"addDebug");s(this,"isControlCamera",!0);this.main=e,this.scene=this.main.scene,this.addDebug=this.main.debug.addFolder("CameraHelper"),this.setHelper()}setHelper(){this.addDebug(e=>{e.open(),e.add(this,"isControlCamera").onChange(t=>{this.toggleHelper(t)})}),this.addDebug(e=>{const t=this.main.camera;e.add(t.instance.position,"y").name("positionY").min(-10).max(10).step(.001),e.add(t.instance.position,"z").name("positionZ").min(-10).max(10).step(.001),e.add(t.controls.target,"x").name("lookAtX").min(-5).max(5).step(.001),e.add(t.controls.target,"y").name("lookAtY").min(-5).max(5).step(.001),e.add(t.controls.target,"z").name("lookAtZ").min(-5).max(5).step(.001)})}toggleHelper(e){this.main.canvas.style.pointerEvents=e?"unset":"none",this.main.camera.controls.enabled=!!e}}class Zt{constructor(e){s(this,"main");s(this,"textGroup");s(this,"sizes");s(this,"scene");s(this,"environment");s(this,"resource");s(this,"addDebug");s(this,"material");s(this,"aspect",NaN);this.textGroup=new fe,this.main=e,this.sizes=e.sizes,this.scene=this.main.scene,this.addDebug=this.main.debug.addFolder("Text"),this.resource=this.main.resources.items.font,this.setMaterial(),this.setText(),this.scene.add(this.textGroup)}setMaterial(){this.material=new we}updateOrientation(){const e=window.innerWidth/window.innerHeight,t=e>1?1:-1,i=Number.isNaN(this.aspect)?NaN:this.aspect>1?1:-1;return t!==i?(this.aspect=e,!0):!1}setText(){if(!this.updateOrientation())return;const e=this.material,t={font:this.resource,size:.5,height:.2,curveSegments:5,bevelEnabled:!0,bevelThickness:.03,bevelSize:.02,bevelOffset:0,bevelSegments:4};if(this.textGroup.clear(),this.aspect>1){const i=new N("Welcome to l00 Metaverse",t),n=new p(i,e);i.center(),this.textGroup.add(n)}else{const i=new N("Welcome to",t),n=new p(i,e);i.center(),i.translate(0,.4,0);const o=new N("l00 Metaverse",t),l=new p(o,e);o.center(),o.translate(0,-.4,0),this.textGroup.add(n,l)}}resize(){this.setText()}update(){}}class Jt{constructor(e){s(this,"main");s(this,"scene");s(this,"environment");s(this,"resources");s(this,"geometryRatio",27);s(this,"toruGeometry");s(this,"coneGeometry");s(this,"material");s(this,"mesh");s(this,"meshsGroup");s(this,"playAnimationTime",1/0);s(this,"animationDuration",2.5);s(this,"animationDelay",4);this.main=e,this.scene=this.main.scene,this.resources=this.main.resources,this.setGeometry(),this.setMaterial(),this.setMesh()}setGeometry(){this.toruGeometry=new Se(.3,.2,20,45),this.coneGeometry=new De(.4,.6,3)}setMaterial(){this.material=new we}setMesh(){this.meshsGroup=new fe,this.scene.add(this.meshsGroup),Array(300).fill(0).map((e,t)=>{const i=new p(this.toruGeometry,this.material),{position:n,rotation:o,scale:l}=this.random();i.position.set(n.x,n.y,n.z),i.rotation.set(o.x,o.y,o.z),i.scale.set(l,l,l),this.meshsGroup.add(i)}),Array(300).fill(0).map((e,t)=>{const i=new p(this.coneGeometry,this.material),{position:n,rotation:o,scale:l}=this.random();i.position.set(n.x,n.y,n.z),i.rotation.set(o.x,o.y,o.z),i.scale.set(l,l,l),this.meshsGroup.add(i)})}random(){const e=this.geometryRatio;return{position:{x:(Math.random()-.5)*e,y:(Math.random()-.3)*e,z:(Math.random()-.8)*e},rotation:{x:Math.random()*Math.PI,y:Math.random()*Math.PI,z:Math.random()*Math.PI},scale:Math.random()}}playAnimation(){Number.isNaN(this.playAnimationTime)&&(this.playAnimationTime=0),this.playAnimationTime+=this.main.time.delta/1e3,this.playAnimationTime>this.animationDelay&&(this.playAnimationTime=this.playAnimationTime%this.animationDelay,this.animation())}animation(){const e=this.animationDuration;this.meshsGroup.traverseVisible(t=>{if(!(t instanceof p))return;const{position:i,rotation:n,scale:o}=this.random();u.to(t.position,{duration:e,x:i.x}),u.to(t.position,{duration:e,y:i.y}),u.to(t.position,{duration:e,z:i.z}),u.to(t.rotation,{duration:e,x:n.x}),u.to(t.rotation,{duration:e,y:n.y}),u.to(t.rotation,{duration:e,z:n.z}),u.to(t.scale,{duration:e,x:o}),u.to(t.scale,{duration:e,y:o}),u.to(t.scale,{duration:e,z:o})})}update(){this.playAnimation()}}class Xt{constructor(e){s(this,"main");s(this,"time");s(this,"originalCameraPosition");s(this,"resetCameraControlTimeoutID",NaN);s(this,"isCameraControling",!1);this.main=e,this.time=this.main.time,this.setCameraControl()}setCameraControl(){this.originalCameraPosition=this.main.camera.instance.position.clone();const e=this.main.camera.controls;e.enableDamping=!0,e.enablePan=!1,e.enableZoom=!1,e.addEventListener("start",()=>this.onCameraControl(1)),e.addEventListener("end",()=>this.onCameraControl(-1)),e.addEventListener("change",()=>this.onCameraControl(0))}onCameraControl(e){e===0?(this.clearResetCameraControlTimeout(),this.setResetCameraControlTimeout()):e===1?(this.isCameraControling=!0,this.clearResetCameraControlTimeout()):(this.isCameraControling=!1,this.setResetCameraControlTimeout())}clearResetCameraControlTimeout(){Number.isNaN(this.resetCameraControlTimeoutID)||(window.clearTimeout(this.resetCameraControlTimeoutID),this.resetCameraControlTimeoutID=NaN)}setResetCameraControlTimeout(){this.main.camera.isNeedUpdate||this.isCameraControling||(this.resetCameraControlTimeoutID=window.setTimeout(()=>this.resetCameraControl(),250))}resetCameraControl(){if(!this.originalCameraPosition)return;const e=this.main.camera.instance,t=1,{x:i,y:n,z:o}=this.originalCameraPosition;u.to(e.position,{duration:t,x:i,y:n,z:o})}update(){}}class Kt{constructor(e){s(this,"main");s(this,"scene");s(this,"environment");s(this,"resources");s(this,"guiAxesHelper");s(this,"guiCameraHelper");s(this,"text");s(this,"geometrys");s(this,"commander");this.main=e,this.scene=this.main.scene,this.resources=this.main.resources,this.resources.onReady(()=>{this.text=new Zt(this.main),this.geometrys=new Jt(this.main),this.environment=new jt(this.main),this.guiAxesHelper=new qt(this.main),this.guiCameraHelper=new Yt(this.main),this.commander=new Xt(this.main)})}resize(){var e;this.text&&((e=this.text)==null||e.resize())}update(){var e,t;(e=this.geometrys)==null||e.update(),(t=this.commander)==null||t.update()}}var Qt=[{name:"font",type:"fontJSON",path:Ie}];class es extends P{constructor(t,i,n){super();s(this,"canvas");s(this,"viewArea");s(this,"viewControlsArea");s(this,"sizes");s(this,"time");s(this,"scene");s(this,"resources");s(this,"camera");s(this,"renderer");s(this,"world");s(this,"debug");this.canvas=t,this.viewArea=i,this.viewControlsArea=n||this.canvas,this.debug=new It(this),this.sizes=new Wt(i),this.time=new Nt,this.scene=new ne,this.resources=new Ot(Qt),this.camera=new Bt(this),this.renderer=new Ut(this),this.world=new Kt(this),this.sizes.onResize(()=>this.resize()),this.time.onTick(()=>this.update())}resize(){this.camera.resize(),this.world.resize(),this.renderer.resize()}update(){this.camera.update(),this.world.update(),this.renderer.update()}render(){this.time.tick()}pausedRender(){this.time.paused()}destroy(){this.sizes.destroy(),this.time.destroy(),this.renderer.destroy(),this.camera.controls.dispose(),this.resources.destroy(),this.debug.destroy(),this.scene.traverse(t=>{if(t instanceof p){t.geometry.dispose();for(const i in t.material){const n=t.material[i];n&&typeof n.dispose=="function"&&n.dispose()}}}),this.emit("destroyed")}onDestroyed(t){return this.once("destroyed",t)}}const ts=y({name:"Section-2-2-Banner-RenderView-Text",setup(a){const e=L("rendersAreaMap"),t=L("loadingManager"),i=w(),n=w(),o=w(),l=w();let h;return z(async()=>{const d=i.value,c=n.value,m=l.value;h=new es(d,c,m),h.render(),e&&e.set(o.value,h),t&&t.add(h)}),b(()=>{h==null||h.destroy()}),(d,c)=>(g(),f("div",{class:"viewArea",ref_key:"viewArea",ref:n},[r("div",{class:"viewReactArea",ref_key:"viewReactArea",ref:o},null,512),r("canvas",{class:"background",ref_key:"canvas",ref:i},null,512),r("div",{class:"viewControlsArea",ref_key:"viewControlsArea",ref:l},null,512)],512))}});var ss=x(ts,[["__scopeId","data-v-48de71da"],["__file","/Volumes/Work/l00 Studio/l00/source/root/home/components/Section-2-2-Banner-RenderView-Text.vue"]]);const is={class:"section"},ns={class:"container"},as={class:"banner"},rs={class:"container"},os={class:"banner"},hs=y({name:"Section-2",setup(a){const e=Fe.slice(0,10),t=$e.slice(0,10);return(i,n)=>(g(),f("section",is,[r("div",ns,[r("div",as,[v($t)]),v(le,{list:_(e),base:"effects",style:{background:"#333333"}},null,8,["list"])]),r("div",rs,[r("div",os,[v(ss)]),v(le,{list:_(t),base:"metaverse",style:{background:"#f4f4f4"}},null,8,["list"])])]))}});var cs=x(hs,[["__scopeId","data-v-72404c83"],["__file","/Volumes/Work/l00 Studio/l00/source/root/home/components/Section-2.vue"]]);class ds{constructor(e){s(this,"main");s(this,"isActive",!1);s(this,"ui");this.main=e,window.location.hash.includes("debug")&&this.active()}active(){this.isActive=!0,this.ui=new T({autoPlace:!1}),this.fixGui(),this.toWindowTest()}fixGui(){if(!this.ui)return;const e=this.main.viewArea,t=this.ui.domElement;t.classList.add("a"),t.classList.add("taller-than-window");const i=window.document.createElement("div");i.classList.add("dg"),i.classList.add("ac"),i.style.position="absolute",i.appendChild(this.ui.domElement),e.appendChild(i)}toWindowTest(){window.debugView=this.main}addFolder(e){if(!this.ui||!(this.ui instanceof T))return i=>{};const t=this.ui.addFolder(e);return i=>{i(t)}}destroy(){var e;(e=this.ui)==null||e.destroy(),delete window.debugView}}class ls{constructor(e,t){s(this,"function");s(this,"isOnce");this.function=e,this.isOnce=t.isOnce?t.isOnce:!1}}class E{constructor(){s(this,"__emittersMap__",new WeakMap);s(this,"__emitters__",new Map)}on(e,t){if(typeof e!="string"||e===""||typeof t!="function")return!1;let i=this.__emitters__.get(e);if(i||(i=new Set,this.__emitters__.set(e,i)),this.__emittersMap__.has(t))return!1;{const n=new ls(t,{isOnce:!1});this.__emittersMap__.set(t,n),i.add(n)}return!0}once(e,t){if(this.on(e,t)){const i=this.__emittersMap__.get(t);if(!i)return!1;i.isOnce=!0}else return!1;return!0}off(e,t){const i=this.__emitters__.get(e);if(!i)return!1;const n=this.__emittersMap__.get(t);return n?(this.__emittersMap__.delete(t),i.delete(n),i.size===0&&this.__emitters__.delete(e),!0):!1}offAll(e){const t=this.__emitters__.get(e);return t?(t.clear(),this.__emitters__.delete(e),!0):!1}clearEvents(){return this.__emitters__.clear(),!0}async emit(e,...t){const i=this.__emitters__.get(e);if(!!i)for(let n of i.values()){try{await n.function.apply(void 0,t)}catch(o){console.error(o)}n.isOnce&&this.off(e,n.function)}}}class us extends E{constructor(t){super();s(this,"viewArea");s(this,"width",0);s(this,"height",0);s(this,"pixelRatio",0);s(this,"onWindowResizeListener",()=>{this.updateSize(),this.emit("resize")});this.viewArea=t,this.updateSize(),this.setWindowResizeEmitter()}updateSize(){this.width=this.viewArea.offsetWidth,this.height=this.viewArea.offsetHeight,this.pixelRatio=Math.min(window.devicePixelRatio,2)}setWindowResizeEmitter(){window.addEventListener("resize",this.onWindowResizeListener)}removeWindowResizeEmitter(){window.removeEventListener("resize",this.onWindowResizeListener)}onResize(t){return this.on("resize",t)}destroy(){return this.removeWindowResizeEmitter(),this.clearEvents()}}class ms extends E{constructor(){super();s(this,"start");s(this,"current");s(this,"elapsed");s(this,"delta");s(this,"requestAnimationFrameID",0);s(this,"onTickLoopFunction",()=>{const t=Date.now();this.delta=t-this.current,this.current=t,this.elapsed=this.current-this.start,this.emit("tick"),this.requestAnimationFrameID=window.requestAnimationFrame(this.currentTickLoopFunction)});s(this,"currentTickLoopFunction",()=>{});s(this,"isTicking",!1);this.start=Date.now(),this.current=this.start,this.elapsed=0,this.delta=16}tick(){this.currentTickLoopFunction!==this.onTickLoopFunction&&(this.currentTickLoopFunction=this.onTickLoopFunction,this.isTicking||(this.isTicking=!0,this.current=Date.now()-Math.trunc(1e3/60),this.currentTickLoopFunction()))}paused(){this.isTicking&&(window.cancelAnimationFrame(this.requestAnimationFrameID),this.currentTickLoopFunction=()=>{},this.isTicking=!1)}onTick(t){return this.on("tick",t)}destroy(){return this.currentTickLoopFunction=()=>{},this.clearEvents()}}class ps extends E{constructor(t){super();s(this,"sources");s(this,"items");s(this,"loaded",0);s(this,"loadTotal",0);s(this,"LoadingManager",new U(()=>{this.loaded===this.loadTotal&&this.ready()},(t,i,n)=>{this.loadTotal=n,this.loaded=i,this.emit("progress",this.loaded,this.loadTotal)}));s(this,"loaders",{gltfLoader:new A(this.LoadingManager),gltfDracoLoader:new A(this.LoadingManager).setDRACOLoader(new V(this.LoadingManager).setDecoderPath(new j("/assets/draco/").url)),textureLoader:new q(this.LoadingManager),cubeTextureLoader:new Y(this.LoadingManager),fontLoader:new ae(this.LoadingManager)});s(this,"isReady",!1);this.sources=t,this.items={},this.startLoading()}startLoading(){if(this.sources.length===0)return this.ready();for(const t of this.sources)if(t.type==="gltfModel")this.loaders.gltfLoader.load(t.path,i=>{this.sourceLoaded(t,i)});else if(t.type==="gltfDracoModel")this.loaders.gltfDracoLoader.load(t.path,i=>{this.sourceLoaded(t,i)});else if(t.type==="texture")this.loaders.textureLoader.load(t.path,i=>{this.sourceLoaded(t,i)});else if(t.type==="cubeTexture")this.loaders.cubeTextureLoader.load(t.path,i=>{this.sourceLoaded(t,i)});else if(t.type==="fontJSON")this.loaders.fontLoader.load(t.path,i=>{this.sourceLoaded(t,i)});else throw`Unknow source.type: ${t.type}`}sourceLoaded(t,i){this.items[t.name]=i}ready(){this.isReady=!0,this.emit("ready")}onReady(t){return this.isReady?t():this.once("ready",t)}onProgress(t){return this.on("progress",t)}destroy(){return this.clearEvents()}}class gs{constructor(e){s(this,"main");s(this,"sizes");s(this,"scene");s(this,"canvas");s(this,"instance");s(this,"controls");s(this,"isNeedUpdate",!1);this.main=e,this.sizes=this.main.sizes,this.scene=this.main.scene,this.canvas=this.main.canvas,this.setInstance(),this.setOrbitControls()}setInstance(){this.instance=new Z(45,this.sizes.width/this.sizes.height,.1,100),this.instance.position.set(0,0,-1.5),this.instance.lookAt(0,0,0),this.scene.add(this.instance)}setOrbitControls(){this.controls=new J(this.instance,this.main.viewControlsArea),this.controls.target=new M(0,0,0),this.controls.enableDamping=!0,this.controls.enabled=!0}resize(){this.instance.aspect=this.sizes.width/this.sizes.height,this.instance.updateProjectionMatrix()}update(){this.isNeedUpdate=this.controls.update()}}class fs{constructor(e){s(this,"renderer");s(this,"coreRenderer");s(this,"sizes");s(this,"scene");s(this,"resources");s(this,"camera");s(this,"webGLRenderTargetResize");s(this,"webGLRenderTargetDestroy");s(this,"webGLRenderTarget");s(this,"effectComposer");s(this,"renderPass");s(this,"resize",()=>{this.effectComposer.setSize(this.sizes.width,this.sizes.height),this.effectComposer.setPixelRatio(this.sizes.pixelRatio)});s(this,"render",()=>{this.effectComposer.render()});this.renderer=e,this.coreRenderer=this.renderer.coreRenderer,{sizes:this.sizes,scene:this.scene,resources:this.resources,camera:this.camera}=this.renderer.main,this.setWebGLRenderTarget(),this.setEffectComposer(),this.resources.onReady(()=>{this.setRenderEffectPass()}),this.renderer.onResize(this.resize),this.renderer.finalRender=this.render}setWebGLRenderTarget(){const e={minFilter:de,magFilter:de,format:ke,encoding:S},t=this.coreRenderer.instance;t.getPixelRatio()===1&&(this.webGLRenderTarget=new Pe(this.sizes.width,this.sizes.height,e),t.getPixelRatio()===1&&t.capabilities.isWebGL2&&(this.webGLRenderTarget.samples=4),this.webGLRenderTargetDestroy=()=>{var i;(i=this.webGLRenderTarget)==null||i.dispose()},this.renderer.onDestroy(this.webGLRenderTargetDestroy))}setEffectComposer(){this.effectComposer=new Ge(this.coreRenderer.instance,this.webGLRenderTarget),this.resize()}setRenderEffectPass(){this.renderPass=new We(this.scene,this.camera.instance),this.effectComposer.addPass(this.renderPass);const e=new Ue;e.goWild=!1,this.effectComposer.addPass(e);const t=new Ve(new Ee(0,0),.5,0,0);this.effectComposer.addPass(t),this.renderer.onDestroy(()=>t.dispose());const i=new Ne(Oe);this.effectComposer.addPass(i),this.setSMAAPass()}setSMAAPass(){const e=this.renderer.coreRenderer.instance;if(e.getPixelRatio()!==1||e.capabilities.isWebGL2)return;const t=new Be(0,0);this.effectComposer.addPass(t)}}class ws extends E{constructor(t){super();s(this,"main");s(this,"finalRender");s(this,"coreRenderer");this.main=t,this.coreRenderer=new vs(this),new fs(this)}onDestroy(t){this.on("destroy",t)}destroy(){this.coreRenderer.instance.dispose(),this.emit("destroy")}onResize(t){this.on("resize",t)}resize(){this.emit("resize")}update(){this.finalRender()}}class vs{constructor(e){s(this,"renderer");s(this,"main");s(this,"canvas");s(this,"sizes");s(this,"scene");s(this,"camera");s(this,"renderToneMappingDebug");s(this,"instance");s(this,"resize",()=>{this.instance.setSize(this.sizes.width,this.sizes.height),this.instance.setPixelRatio(this.sizes.pixelRatio)});s(this,"render",()=>{this.instance.render(this.scene,this.camera.instance)});this.renderer=e,this.main=this.renderer.main,this.canvas=this.main.canvas,this.sizes=this.main.sizes,this.scene=this.main.scene,this.camera=this.main.camera,this.renderToneMappingDebug=this.main.debug.addFolder("RenderToneMapping"),this.setInstance()}setInstance(){this.instance=new X({canvas:this.canvas,antialias:!0,alpha:!0}),this.instance.toneMappingExposure=1,this.resize(),this.renderToneMappingDebug(e=>{e.add(this.instance,"toneMapping",{No:$,Linear:K,Reinhard:Q,Cineon:ee,ACESFilmic:F}).onFinishChange(()=>{this.instance.toneMapping=Number(this.instance.toneMapping)}),e.add(this.instance,"toneMappingExposure").min(0).max(10).step(.001)}),this.renderer.onResize(this.resize),this.renderer.finalRender=this.render}}class _s{constructor(e){s(this,"main");s(this,"scene");s(this,"resources");s(this,"addDebug");s(this,"sunLight");s(this,"environmentMap");this.main=e,this.scene=this.main.scene,this.resources=this.main.resources,this.addDebug=this.main.debug.addFolder("environment"),this.setSunLight()}setSunLight(){this.sunLight=new te("#ffffff",5),this.sunLight.castShadow=!0,this.sunLight.shadow.camera.far=20,this.sunLight.shadow.mapSize.set(1024,1024),this.sunLight.shadow.normalBias=.05,this.sunLight.position.set(5,2,2),this.scene.add(this.sunLight),this.addDebug(e=>{e.add(this.sunLight,"intensity").name("sunLightIntensity").min(0).max(10).step(.001),e.add(this.sunLight.position,"x").name("sunLightX").min(-50).max(50).step(.001),e.add(this.sunLight.position,"y").name("sunLightY").min(-50).max(50).step(.001),e.add(this.sunLight.position,"z").name("sunLightZ").min(-50).max(50).step(.001)})}setEnvironmentMap(){this.environmentMap={},this.environmentMap.intensity=1.5,this.environmentMap.texture=this.resources.items.environmentMapTexture,this.environmentMap.texture.encoding=S,this.scene.environment=this.environmentMap.texture,this.environmentMap.updateMaterials=()=>{this.scene.traverse(e=>{e instanceof p&&e.material instanceof se&&(e.material.envMap=this.environmentMap.texture,e.material.envMapIntensity=this.environmentMap.intensity,e.material.needsUpdate=!0,e.castShadow=!0,e.receiveShadow=!0)})},this.environmentMap.updateMaterials(),this.addDebug(e=>{e.add(this.environmentMap,"intensity").name("envMapIntensity").min(0).max(4).step(.001).onChange(()=>{this.environmentMap.updateMaterials()})})}}class ys{constructor(e){s(this,"main");s(this,"scene");s(this,"addDebug");s(this,"isShowAxesHelper",!0);s(this,"axesHelper");this.main=e,this.scene=this.main.scene,this.addDebug=this.main.debug.addFolder("AxesHelper"),this.setAxesHelper()}setAxesHelper(){this.addDebug(e=>{this.axesHelper=new ie(1),this.toggleAxesHelper(),e.open(),e.add(this,"isShowAxesHelper").onChange(t=>{this.toggleAxesHelper()})})}toggleAxesHelper(e){(typeof e=="boolean"?e:this.isShowAxesHelper)?this.scene.add(this.axesHelper):this.scene.remove(this.axesHelper)}}class xs{constructor(e){s(this,"main");s(this,"scene");s(this,"addDebug");s(this,"isControlCamera",!0);this.main=e,this.scene=this.main.scene,this.addDebug=this.main.debug.addFolder("CameraHelper"),this.setHelper()}setHelper(){this.isControlCamera=this.main.camera.controls.enabled,this.addDebug(e=>{e.open(),e.add(this,"isControlCamera").onChange(t=>{this.toggleHelper(t)})}),this.addDebug(e=>{const t=this.main.camera;e.add(t.instance.position,"y").name("positionY").min(-10).max(10).step(.001),e.add(t.instance.position,"z").name("positionZ").min(-10).max(10).step(.001),e.add(t.controls.target,"x").name("lookAtX").min(-5).max(5).step(.001),e.add(t.controls.target,"y").name("lookAtY").min(-5).max(5).step(.001),e.add(t.controls.target,"z").name("lookAtZ").min(-5).max(5).step(.001)})}toggleHelper(e){this.main.canvas.style.pointerEvents=e?"unset":"",this.main.camera.controls.enabled=!!e}}class Ms{constructor(e){s(this,"main");s(this,"scene");s(this,"addDebug");s(this,"isShowBorder",!0);this.main=e,this.scene=this.main.scene,this.addDebug=this.main.debug.addFolder("CssHelper"),this.setControler(),this.toggleControler()}setControler(){this.addDebug(e=>{e.add(this,"isShowBorder").onChange(t=>{this.toggleControler(t)})})}toggleControler(e){this.isShowBorder}}class Cs{constructor(e){s(this,"main");s(this,"scene");s(this,"resources");s(this,"time");s(this,"addDebug");s(this,"material");s(this,"resource");s(this,"model");s(this,"animation");this.main=e,this.scene=this.main.scene,this.resources=this.main.resources,this.time=this.main.time,this.addDebug=this.main.debug.addFolder("Model"),this.setMaterial(),this.setModel(),this.setAnimation()}setMaterial(){const e=new He,t=this.resources.items.matcap;e.matcap=t,e.needsUpdate=!0,this.material=e}setModel(){this.resource=this.main.resources.items["model-myhead"],this.model=this.resource.scene.children[0],this.model.rotation.y=Math.PI*1,this.model.rotation.x=Math.PI*-.03,this.model.position.y=-.05,this.scene.add(this.model),this.model.traverse(e=>{e instanceof p&&(e.name==="test"&&(e.visible=!1),e.castShadow=!0,e.material=this.material)}),this.addDebug(e=>{e.add(this.model.rotation,"y").name("rotationY").min(-2*Math.PI).max(2*Math.PI).step(.001)})}setAnimation(){this.animation={},this.animation.rotation={},this.animation.rotation.update=()=>{this.model.rotation.y+=this.time.delta*2e-4}}update(){this.animation.rotation.update()}}class Ls{constructor(e){s(this,"main");s(this,"time");s(this,"originalCameraPosition");s(this,"resetCameraControlTimeoutID",NaN);s(this,"isCameraControling",!1);this.main=e,this.time=this.main.time,this.setCameraControl()}setCameraControl(){this.originalCameraPosition=this.main.camera.instance.position.clone();const e=this.main.camera.controls;e.enableDamping=!0,e.maxPolarAngle=Math.PI*.7,e.enablePan=!1,e.enableZoom=!1,e.addEventListener("start",()=>this.onCameraControl(1)),e.addEventListener("end",()=>this.onCameraControl(-1)),e.addEventListener("change",()=>this.onCameraControl(0))}onCameraControl(e){e===0?(this.clearResetCameraControlTimeout(),this.setResetCameraControlTimeout()):e===1?(this.isCameraControling=!0,this.clearResetCameraControlTimeout()):(this.isCameraControling=!1,this.setResetCameraControlTimeout())}clearResetCameraControlTimeout(){Number.isNaN(this.resetCameraControlTimeoutID)||(window.clearTimeout(this.resetCameraControlTimeoutID),this.resetCameraControlTimeoutID=NaN)}setResetCameraControlTimeout(){this.main.camera.isNeedUpdate||this.isCameraControling||(this.resetCameraControlTimeoutID=window.setTimeout(()=>this.resetCameraControl()))}resetCameraControl(){if(!this.originalCameraPosition)return;const e=this.main.camera.instance,t=1,{x:i,y:n,z:o}=this.originalCameraPosition;u.to(e.position,{duration:t,x:i,y:n,z:o})}update(){}}class zs{constructor(e){s(this,"main");s(this,"scene");s(this,"environment");s(this,"resources");s(this,"guiAxesHelper");s(this,"guiCameraHelper");s(this,"guiCssHelper");s(this,"model");s(this,"commander");this.main=e,this.scene=this.main.scene,this.resources=this.main.resources,this.resources.onReady(()=>{this.model=new Cs(this.main),this.environment=new _s(this.main),this.guiAxesHelper=new ys(this.main),this.guiCameraHelper=new xs(this.main),this.guiCssHelper=new Ms(this.main),this.commander=new Ls(this.main)})}resize(){}update(){var e,t;(e=this.model)==null||e.update(),(t=this.commander)==null||t.update()}}var bs=[{name:"matcap",type:"texture",path:new URL("/l00/static/png/1B1B1B_999999_575757_747474-PS-bf501b3f.png?url",self.location).href},{name:"model-myhead",type:"gltfDracoModel",path:new URL("/l00/static/gltf/my head-08ad7dc7.gltf?url",self.location).href}];class Rs extends E{constructor(t,i,n){super();s(this,"canvas");s(this,"viewArea");s(this,"viewControlsArea");s(this,"sizes");s(this,"time");s(this,"scene");s(this,"resources");s(this,"camera");s(this,"renderer");s(this,"world");s(this,"debug");this.canvas=t,this.viewArea=i,this.viewControlsArea=n||this.canvas,this.debug=new ds(this),this.sizes=new us(i),this.time=new ms,this.scene=new ne,this.resources=new ps(bs),this.camera=new gs(this),this.renderer=new ws(this),this.world=new zs(this),this.sizes.onResize(()=>this.resize()),this.time.onTick(()=>this.update())}resize(){this.camera.resize(),this.world.resize(),this.renderer.resize()}update(){this.camera.update(),this.world.update(),this.renderer.update()}render(){this.time.tick()}pausedRender(){this.time.paused()}destroy(){this.sizes.destroy(),this.time.destroy(),this.renderer.destroy(),this.camera.controls.dispose(),this.resources.destroy(),this.debug.destroy(),this.scene.traverse(t=>{if(t instanceof p){t.geometry.dispose();for(const i in t.material){const n=t.material[i];n&&typeof n.dispose=="function"&&n.dispose()}}}),this.emit("destroyed")}onDestroyed(t){return this.once("destroyed",t)}}const Ts=y({name:"Section-3-RenderView-Head",setup(a){const e=L("rendersAreaMap"),t=L("loadingManager"),i=w(),n=w(),o=w(),l=w();let h;return z(async()=>{const d=i.value,c=n.value,m=l.value;h=new Rs(d,c,m),h.render(),e&&e.set(o.value,h),t&&t.add(h)}),b(()=>{h==null||h.destroy()}),(d,c)=>(g(),f("div",{class:"viewArea",ref_key:"viewArea",ref:n},[r("div",{class:"viewReactArea",ref_key:"viewReactArea",ref:o},null,512),r("canvas",{class:"",ref_key:"canvas",ref:i},null,512),r("div",{class:"viewControlsArea",ref_key:"viewControlsArea",ref:l},null,512)],512))}});var As=x(Ts,[["__scopeId","data-v-10622e6e"],["__file","/Volumes/Work/l00 Studio/l00/source/root/home/components/Section-3-RenderView-Head.vue"]]);const _e=a=>(G("data-v-724e6404"),a=a(),W(),a),Ss={class:"container"},Ds={class:"head"},Ps=_e(()=>r("div",{class:"content main"},[r("span",{class:"important"},"Author: l00.\u5C0F\u5218"),r("span",{class:"important"},"WeChatID: junjian12"),r("span",null,"Powered by: Vue.js / Three.js / Cinema4D / Blender")],-1)),Es=_e(()=>r("div",{class:"content copyright"},[r("span",null,[R(" BGM: And So It Begins \u2014 CC BY 3.0"),r("br"),R(" Audio Library: youtu.be/JpoEFiAJdxo ")])],-1)),ks=y({name:"Section-3",setup(a){return(e,t)=>(g(),f("section",null,[r("div",Ss,[r("div",Ds,[v(As)]),Ps,Es])]))}});var Hs=x(ks,[["__scopeId","data-v-724e6404"],["__file","/Volumes/Work/l00 Studio/l00/source/root/home/components/Section-3.vue"]]);const Fs={class:"main"},$s=y({name:"l00-Home-Main",props:{scrollMidline:{type:Number,required:!0}},setup(a){const e=a;return(t,i)=>(g(),f("div",Fs,[v(yt,{scrollMidline:e.scrollMidline},null,8,["scrollMidline"]),v(cs,{style:{"margin-top":"-50vh"}}),v(Hs)]))}});var Ks=x($s,[["__scopeId","data-v-31432ea4"],["__file","/Volumes/Work/l00 Studio/l00/source/root/home/l00-Home-Main.vue"]]);export{Ks as default};
